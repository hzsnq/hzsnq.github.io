import{B as e,C as t,s as a,L as l,d as s,M as n,r as u,m as o,a as d,y as c,b as i,c as f,w as m,e as r,n as v,g as _,u as p,f as y,t as D,h,i as I,F as g,q as b,k as x,j as P,E as C,G as Y,l as j}from"./index-5c3c44fe.js";import{_ as F,b as R,a as k}from"./NavBar.c3c1f6a6.js";import{_ as w}from"./download.6031f376.js";import{d as A}from"./dayjs.min.8200664b.js";import{u as $}from"./investment.67092ecb.js";const M=k(s({__name:"investmentDetails",setup(s){const k=$(),{investmentInfo:M}=n(k),{downloadFile:E}=function(){const{VITE_APP_BASE_URL:s}=l;return{downloadFile:function(l){e({url:`${s}${l}`,responseType:"blob",success:e=>{if(200===e.statusCode){console.log("ä¸‹è½½æˆåŠŸ");const l=plus.io.convertLocalFileSystemURL(e.tempFilePath);plus.io.resolveLocalFileSystemURL(l,(function(e){e.name,e.getParent((function(l){console.log(l.fullPath),e.moveTo({fullPath:l.fullPath+"/"},"pdf.pdf",(function(e){t({tempFilePath:e.fullPath,success:function(e){const t=e.savedFilePath;console.log("savedFilePath",t),a({icon:"none",title:`save success ${t}`})}})}),(function(e){}))}))}))}}})}}}(),T=u({isNotification:!0,backgroundColor:"#fff",isBack:!0}),B=u(""),L=u(""),S=u([]),N=u({}),q=u([]),z=u(!0),U=u(!0);o((e=>{console.log("ðŸš€ ~ file: investmentDetails.vue:14 ~ onLoad ~ options:",e),B.value=(null==e?void 0:e.eId)||"",L.value=(null==e?void 0:e.fId)||""})),d((()=>{!async function(){let e={id:L.value};const[t,a]=await c.getFundsDetail(e);!t&&a&&(null==a?void 0:a.success)&&(console.log("ðŸš€ ~ file: investmentDetails.vue:42 ~ getFundsDetail ~ r:",null==a?void 0:a.data),N.value=(null==a?void 0:a.data)||{})}(),async function(){let e={entityId:B.value,fundId:L.value};const[t,a]=await c.getInvestmentDetail(e);!t&&a&&(null==a?void 0:a.success)&&(console.log("ðŸš€ ~ file: investmentDetails.vue:28 ~ getDetail ~ r:",null==a?void 0:a.data),S.value=(null==a?void 0:a.data)||[])}(),async function(){var e,t;let a={entityId:B.value,fundId:L.value,pageNum:1,pageSize:1e5};const[l,s]=await c.getPurchasedFundAll(a);!l&&s&&(null==s?void 0:s.success)&&(console.log("ðŸš€ ~ file: investmentDetails.vue:42 ~ getPurchasedFundByEntityId ~ r:",null==(e=null==s?void 0:s.data)?void 0:e.list),q.value=(null==(t=null==s?void 0:s.data)?void 0:t.list)||[])}()}));const G=e=>{"inv"===e?z.value=!z.value:U.value=!U.value},V=()=>{x({url:"/pages/investment/reInvestment"})};return(e,t)=>{const a=F,l=P,s=C(Y("uni-icons"),R),n=j;return i(),f(l,{class:"common-bg"},{default:m((()=>[r(a,v(_(p(T))),null,16),r(l,{class:"investment"},{default:m((()=>[r(l,{class:"title"},{default:m((()=>[y("Investment Details")])),_:1}),r(l,{class:"item"},{default:m((()=>[r(l,{class:"fund-title"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>{var e,t;return[y(D((null==(e=p(N))?void 0:e.name)||(null==(t=p(N))?void 0:t.nameCN)),1)]})),_:1})])),_:1}),r(l,{class:"fund-info"},{default:m((()=>[r(l,{class:"fund-item"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>[y("Funds Category")])),_:1}),r(l,{class:"text"},{default:m((()=>{var e,t;return[y(D((null==(e=p(N))?void 0:e.fundType)||(null==(t=p(N))?void 0:t.fundTypeCN)),1)]})),_:1})])),_:1}),r(l,{class:"fund-item"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>[y("Invest Term")])),_:1}),r(l,{class:"text"},{default:m((()=>{var e;return[y(D(null==(e=p(N))?void 0:e.bprojectDurationMonth)+" months",1)]})),_:1})])),_:1}),r(l,{class:"fund-item"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>[y("Minimum Required Investment Amount")])),_:1}),r(l,{class:"text"},{default:m((()=>{var e,t;return[y("$"+D(null==(e=p(N))?void 0:e.purchaseMinAmount)+" "+D(null==(t=p(N))?void 0:t.currency),1)]})),_:1})])),_:1}),r(l,{class:"fund-item"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>[y("Fixed Interest Rate(Per annum)")])),_:1}),r(l,{class:"text"},{default:m((()=>{var e;return[y(D(null==(e=p(N))?void 0:e.byearlyReturnRate)+"%",1)]})),_:1})])),_:1}),r(l,{class:"fund-item"},{default:m((()=>[r(l,{class:"name"},{default:m((()=>[y("Investment Type")])),_:1}),r(l,{class:"text"},{default:m((()=>{var e,t;return[y(D((null==(e=p(N))?void 0:e.investmentType)||(null==(t=p(N))?void 0:t.investmentTypeCN)),1)]})),_:1})])),_:1})])),_:1}),r(l,{class:"common-info"},{default:m((()=>[r(l,{class:"common-title p-b-20"},{default:m((()=>[y("Investment Details")])),_:1}),r(l,{class:"common-text"},{default:m((()=>[y("Total Investment Amount: $"+D(p(M).purchasedAmount),1)])),_:1}),r(l,{class:"common-text"},{default:m((()=>[y("Current Investment Return: $"+D(p(M).currentReturn),1)])),_:1}),r(l,{class:"common-text"},{default:m((()=>[y("Cumulative Expected Interest Amount: $"+D(p(M).totalReturn),1)])),_:1})])),_:1}),r(l,{class:"common-info"},{default:m((()=>[r(l,{class:"flex justify-between align-center"},{default:m((()=>[r(l,{class:"common-title"},{default:m((()=>[y("Investment Record")])),_:1}),r(l,{class:"more",onClick:t[0]||(t[0]=e=>G("inv"))},{default:m((()=>[y(D(p(z)?"hide":"more")+" ",1),r(s,{type:p(z)?"bottom":"top",size:"12",color:"#BE9670"},null,8,["type"])])),_:1})])),_:1})])),_:1}),p(z)?(i(),f(l,{key:0,class:"common-table"},{default:m((()=>[r(l,{class:"th flex justify-between align-center"},{default:m((()=>[r(l,{class:"tl"},{default:m((()=>[y("Payment Date")])),_:1}),r(l,{class:"tl"},{default:m((()=>[y("Investment Amount")])),_:1}),r(l,{class:"tl"},{default:m((()=>[y("Current Return")])),_:1}),r(l,{class:"ta"},{default:m((()=>[y("Action")])),_:1})])),_:1}),(i(!0),h(g,null,I(p(S),((e,t)=>(i(),f(l,{class:"td flex justify-between align-center",key:t},{default:m((()=>[r(l,{class:"tl"},{default:m((()=>[y(D(e.paymentDate?p(A)(e.paymentDate).format("YYYY.MM.DD"):""),1)])),_:2},1024),r(l,{class:"tl"},{default:m((()=>[y("$"+D(e.investmentAmount),1)])),_:2},1024),r(l,{class:"tl"},{default:m((()=>[y("$"+D(e.currentReturn),1)])),_:2},1024),r(l,{class:"ta",onClick:t=>(async e=>{let t={date:A(e.paymentDate).subtract(1,"month").format("YYYY-MM-DD"),id:e.idList.join(",")};console.log("ðŸš€ ~ file: detail.vue:383 ~ handleDownloadEmailById ~ params:",t),E(`/beaver-admin/purchased-funds/exportPdf?date=${t.date}&id=${t.id}`)})(e)},{default:m((()=>[r(n,{class:"common-icon",src:w})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):b("v-if",!0),r(l,{class:"common-info"},{default:m((()=>[r(l,{class:"flex justify-between align-center"},{default:m((()=>[r(l,{class:"common-title"},{default:m((()=>[y("Purchase Record")])),_:1}),r(l,{class:"more",onClick:t[1]||(t[1]=e=>G("pur"))},{default:m((()=>[y(D(p(U)?"hide":"more")+" ",1),r(s,{type:p(U)?"bottom":"top",size:"12",color:"#BE9670"},null,8,["type"])])),_:1})])),_:1})])),_:1}),p(U)?(i(),f(l,{key:1,class:"common-table"},{default:m((()=>[r(l,{class:"th flex justify-between align-center"},{default:m((()=>[r(l,{class:"tl"},{default:m((()=>[y("Purchased Amount")])),_:1}),r(l,{class:"tl"},{default:m((()=>[y("Interest Start Date")])),_:1}),r(l,{class:"tl"},{default:m((()=>[y("Interest End Date")])),_:1}),r(l,{class:"ta"},{default:m((()=>[y("Action")])),_:1})])),_:1}),(i(!0),h(g,null,I(p(q),((e,t)=>(i(),f(l,{class:"td flex justify-between align-center",key:t},{default:m((()=>[r(l,{class:"tl"},{default:m((()=>[y(D(e.purchasedAmount),1)])),_:2},1024),r(l,{class:"tl"},{default:m((()=>[y(D(e.purchaseStartDate?p(A)(e.purchaseStartDate).format("YYYY.MM.DD"):""),1)])),_:2},1024),r(l,{class:"tl"},{default:m((()=>[y(D(e.purchaseEndDate?p(A)(e.purchaseEndDate).format("YYYY.MM.DD"):""),1)])),_:2},1024),r(l,{class:"ta"},{default:m((()=>[r(l,{class:"detail",onClick:t=>(e=>{x({url:`/pages/investment/purchaseDetails?pId=${e.id}&fId=${e.fundId}`})})(e)},{default:m((()=>[y("Details")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):b("v-if",!0)])),_:1}),r(l,{class:"btn",onClick:V},{default:m((()=>[y(" Re-Investment ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-8df2afd3"]]);export{M as default};
