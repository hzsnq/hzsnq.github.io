import{d as e,r as a,I as l,a as s,T as o,b as t,c as n,w as r,e as i,n as u,g as c,u as d,f,t as m,k as p,s as g,y as v,Y as _,j as b,E as y,G as k,l as w,X as h}from"./index-61664f9b.js";import{u as V,_ as C,b as j,a as x}from"./NavBar.df2199e1.js";import{_ as L,a as $,b as B}from"./uni-forms.12d1d605.js";import{u as E}from"./useLocale.927edf99.js";const I=""+new URL("logo-ba2c7c56.png",import.meta.url).href,U=x(e({__name:"login",setup(e){const x=a(!1),{t:U,handleLanguageChange:G}=E(),{setUserInfo:q}=l(),{backToOne:z}=V(),H=()=>{x.value=!x.value,G(x.value?"en":"zh-Hans"),M.value.title=U("login.login")},M=a({title:U("login.login"),backgroundColor:"transparent",textColor:"#fff",isBack:!0}),O=a(null);s((()=>{x.value="en"===o()}));const T=a(!1),A=a({email:"",password:""}),F={email:{rules:[{required:!0,errorMessage:"please input your email"}]},password:{rules:[{required:!0,errorMessage:"please input your password"}]}},N=()=>{T.value=!T.value},P=()=>{p({url:"/pages/login/recovery"})},R=()=>{T.value?O.value.validate().then((()=>{!async function(){let e=A.value;const[a,l]=await v.userLogin(e);if(!a&&l&&(null==l?void 0:l.success)){let e={token:l.data.token,roles:[],clientEmail:l.data.clientEmail};_("userInfo",e),q(e),z()}}()})).catch((e=>{console.log("err",e)})):g({title:"Please view privacy policy",icon:"none"})};return(e,a)=>{const l=C,s=b,o=y(k("uni-icons"),j),p=w,g=y(k("uni-easyinput"),L),v=y(k("uni-forms-item"),$),_=y(k("uni-forms"),B),V=h;return t(),n(s,{class:"login"},{default:r((()=>[i(l,u(c(d(M))),null,16),i(s,{class:"lang"},{default:r((()=>[i(s),i(s,{class:"flex align-center justify-center",onClick:H},{default:r((()=>[f(m(d(x)?"English":"中文")+" ",1),i(o,{type:"bottom",color:"#fff",size:"16"})])),_:1})])),_:1}),i(s,{class:"logo"},{default:r((()=>[i(p,{class:"bg",src:I}),i(s,{class:"text"},{default:r((()=>[f(m(e.$t("login.welcome")),1)])),_:1}),i(s,{class:"text"},{default:r((()=>[f("BHG GLOBAL")])),_:1})])),_:1}),i(s,{class:"form"},{default:r((()=>[i(_,{ref_key:"loginForm",ref:O,rules:F,modelValue:d(A),"label-position":"top"},{default:r((()=>[i(v,{label:e.$t("login.email")+":",name:"email"},{default:r((()=>[i(g,{modelValue:d(A).email,"onUpdate:modelValue":a[0]||(a[0]=e=>d(A).email=e),placeholder:""},null,8,["modelValue"])])),_:1},8,["label"]),i(v,{label:e.$t("login.password")+":",name:"password"},{default:r((()=>[i(g,{modelValue:d(A).password,"onUpdate:modelValue":a[1]||(a[1]=e=>d(A).password=e),placeholder:"",type:"password"},null,8,["modelValue"]),i(s,{class:"forget",onClick:P},{default:r((()=>[f(m(e.$t("login.forget"))+"?",1)])),_:1})])),_:1},8,["label"])])),_:1},8,["modelValue"]),i(s,{class:"login-btn",onClick:R},{default:r((()=>[f(m(e.$t("login.login")),1)])),_:1})])),_:1}),i(s,{class:"privacy"},{default:r((()=>[i(V,{checked:d(T),color:"#be9670",style:{transform:"scale(0.6)"},onClick:N},null,8,["checked"]),f(" "+m(e.$t("login.privacy")),1)])),_:1})])),_:1})}}}),[["__scopeId","data-v-4de389b9"]]);export{U as default};
