import{d as a,r as l,o as e,a as s,z as t,y as n,s as i,b as o,c,w as u,e as d,h as f,i as r,u as v,F as m,n as _,g as p,j as g,p as k,f as y,t as b,A as h,q as j,B as x,C,l as U,D as E}from"./index-5c3c44fe.js";import{_ as F}from"./TabBar.6a38cc49.js";import{_ as w,a as L}from"./NavBar.c3c1f6a6.js";import{_ as P}from"./download.6031f376.js";import{g as T}from"./index.e278db5d.js";import{d as D}from"./dayjs.min.8200664b.js";const I=L(a({__name:"index",setup(a){const L=l("Upcoming"),I=l([]),M=l(null),N=l(1),Y=l(10),z=l({isNotification:!0,backgroundColor:"#fff"}),B=l([{name:"New Event",value:"Upcoming"},{name:"Past Event",value:"End"}]);e((()=>{q()})),s((()=>{})),t((()=>{N.value=N.value+1,q()}));async function q(){var a,l,e;let s={pageNum:N.value,pageSize:Y.value,status:L.value};const[t,o]=await n.getEventAll(s);!t&&o&&(1===N.value?I.value=(null==(a=o.data)?void 0:a.list)||[]:(null==(l=o.data)?void 0:l.list.length)<=0?(N.value=N.value-1,i({icon:"none",title:"There's no more"})):I.value=I.value.concat((null==(e=o.data)?void 0:e.list)||[]),console.log("ðŸš€ ~ file: index.vue:86 ~ getEventList ~ eventList:",I.value))}return(a,l)=>{const e=g,s=w,t=U,n=E,Y=F;return o(),c(e,{class:"common-bg"},{default:u((()=>[d(s,_(p(v(z))),{content:u((()=>[d(e,{class:"flex align-center"},{default:u((()=>[(o(!0),f(m,null,r(v(B),((a,l)=>(o(),c(e,{class:k(v(L)===a.value?"bar-title act":"bar-title"),key:l,onClick:l=>(a=>{L.value=a.value,M.value=null,N.value=1,I.value=[],q()})(a)},{default:u((()=>[y(b(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},16),d(e,{class:"event"},{default:u((()=>[(o(!0),f(m,null,r(v(I),((a,l)=>(o(),c(e,{key:l,class:k(a.id===v(M)?"item item-act":"item")},{default:u((()=>[d(e,{class:"center"},{default:u((()=>[d(e,{class:"left"},{default:u((()=>[d(t,{class:"event-bg",src:a.mainImg,mode:"aspectFill","lazy-load":!0},null,8,["src"])])),_:2},1024),d(e,{class:"right"},{default:u((()=>[h("div",null,[d(e,{class:"name"},{default:u((()=>[y(b(a.title),1)])),_:2},1024),d(e,{class:"time"},{default:u((()=>[y(" Time: "+b(a.startTime?v(D)(a.startTime).format("DD/MM/YYYY HH.MM"):""),1)])),_:2},1024),"Online"===a.type?(o(),c(e,{key:0,class:"location"},{default:u((()=>[y("Location: Online")])),_:1})):(o(),c(e,{key:1,class:"location"},{default:u((()=>[y("Location: "+b(a.location),1)])),_:2},1024))]),h("div",{class:"btn-group"},["Upcoming"===a.status?(o(),c(e,{key:0,class:"btn upcoming"},{default:u((()=>[y("Upcoming")])),_:1})):j("v-if",!0),d(e,{class:"btn detail",onClick:l=>(a=>{M.value===a.id?M.value=null:M.value=a.id})(a)},{default:u((()=>[y("Detail")])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),d(e,{class:"detail-box"},{default:u((()=>[a.briefIntroduction?(o(),f(m,{key:0},[d(e,{class:"title"},{default:u((()=>[y("Event details")])),_:1}),d(e,{class:"rich-text"},{default:u((()=>[d(n,{nodes:a.briefIntroduction},null,8,["nodes"])])),_:2},1024)],64)):j("v-if",!0),a.link?(o(),f(m,{key:1},[d(e,{class:"title"},{default:u((()=>[y("Entry Link")])),_:1}),d(e,{class:"link"},{default:u((()=>[y(b(a.link),1)])),_:2},1024)],64)):j("v-if",!0),a.fileUrl?(o(),f(m,{key:2},[d(e,{class:"title"},{default:u((()=>[y("File")])),_:1}),d(e,{class:"down"},{default:u((()=>[d(e,{class:"flex justify-between align-center"},{default:u((()=>[d(e,null,{default:u((()=>[y(b(a.fileUrl?v(T)(a.fileUrl):""),1)])),_:2},1024),d(e,{onClick:l=>(a=>{x({url:a.fileUrl,success:function(a){let l=a.tempFilePath;C({tempFilePath:l,success:function(a){let l=a.savedFilePath;console.log("savedFilePath",l),i({icon:"none",title:`save success ${l}`})}})}})})(a)},{default:u((()=>[d(t,{class:"icon",src:P})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)],64)):j("v-if",!0)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1}),d(Y)])),_:1})}}}),[["__scopeId","data-v-a4f1a9f6"]]);export{I as default};
