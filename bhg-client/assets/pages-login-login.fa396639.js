import{d as a,r as e,I as l,a as s,a1 as o,b as t,c as n,w as r,e as i,n as u,g as c,u as d,f,t as m,k as p,s as g,y as _,a5 as v,j as b,E as y,G as k,l as w,a4 as h}from"./index-5c3c44fe.js";import{u as V,_ as C,b as j,a as x}from"./NavBar.c3c1f6a6.js";import{_ as L,a as $,b as B}from"./uni-forms.af745596.js";import{u as E}from"./useLocale.1b37ce39.js";const I=""+new URL("logo-ba2c7c56.png",import.meta.url).href,U=x(a({__name:"login",setup(a){const x=e(!1),{t:U,handleLanguageChange:G}=E(),{setUserInfo:q}=l(),{backToOne:z}=V(),H=()=>{x.value=!x.value,G(x.value?"en":"zh-Hans"),M.value.title=U("login.login")},M=e({title:U("login.login"),backgroundColor:"transparent",textColor:"#fff",isBack:!0}),O=e(null);s((()=>{x.value="en"===o()}));const A=e(!1),F=e({email:"",password:""}),N={email:{rules:[{required:!0,errorMessage:"please input your email"}]},password:{rules:[{required:!0,errorMessage:"please input your password"}]}},P=()=>{A.value=!A.value},R=()=>{p({url:"/pages/login/recovery"})},T=()=>{A.value?O.value.validate().then((()=>{!async function(){let a=F.value;const[e,l]=await _.userLogin(a);if(!e&&l&&(null==l?void 0:l.success)){let a={token:l.data.token,roles:[],clientEmail:l.data.clientEmail};v("userInfo",a),q(a),z()}}()})).catch((a=>{console.log("err",a)})):g({title:"Please view privacy policy",icon:"none"})};return(a,e)=>{const l=C,s=b,o=y(k("uni-icons"),j),p=w,g=y(k("uni-easyinput"),L),_=y(k("uni-forms-item"),$),v=y(k("uni-forms"),B),V=h;return t(),n(s,{class:"login"},{default:r((()=>[i(l,u(c(d(M))),null,16),i(s,{class:"lang"},{default:r((()=>[i(s),i(s,{class:"flex align-center justify-center",onClick:H},{default:r((()=>[f(m(d(x)?"English":"中文")+" ",1),i(o,{type:"bottom",color:"#fff",size:"16"})])),_:1})])),_:1}),i(s,{class:"logo"},{default:r((()=>[i(p,{class:"bg",src:I}),i(s,{class:"text"},{default:r((()=>[f(m(a.$t("login.welcome")),1)])),_:1}),i(s,{class:"text"},{default:r((()=>[f("BHG GLOBAL")])),_:1})])),_:1}),i(s,{class:"form"},{default:r((()=>[i(v,{ref_key:"loginForm",ref:O,rules:N,modelValue:d(F),"label-position":"top"},{default:r((()=>[i(_,{label:a.$t("login.email")+":",name:"email"},{default:r((()=>[i(g,{modelValue:d(F).email,"onUpdate:modelValue":e[0]||(e[0]=a=>d(F).email=a),placeholder:""},null,8,["modelValue"])])),_:1},8,["label"]),i(_,{label:a.$t("login.password")+":",name:"password"},{default:r((()=>[i(g,{modelValue:d(F).password,"onUpdate:modelValue":e[1]||(e[1]=a=>d(F).password=a),placeholder:"",type:"password"},null,8,["modelValue"]),i(s,{class:"forget",onClick:R},{default:r((()=>[f(m(a.$t("login.forget"))+"?",1)])),_:1})])),_:1},8,["label"])])),_:1},8,["modelValue"]),i(s,{class:"login-btn",onClick:T},{default:r((()=>[f(m(a.$t("login.login")),1)])),_:1})])),_:1}),i(s,{class:"privacy"},{default:r((()=>[i(V,{checked:d(A),color:"#be9670",style:{transform:"scale(0.6)"},onClick:P},null,8,["checked"]),f(" "+m(a.$t("login.privacy")),1)])),_:1})])),_:1})}}}),[["__scopeId","data-v-4de389b9"]]);export{U as default};
