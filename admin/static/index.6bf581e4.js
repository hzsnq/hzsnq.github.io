import{_ as e,a as o,j as a,S as r,k as l,r as s,o as n,b as d,e as i,A as t,w as c,Z as m,D as g,G as p,z as u,E as f,h,$ as x,a0 as w,a1 as b,p as F,C as _}from"./index.2bf7b6c1.js";import{_ as v}from"./index.5de5f2c8.js";const V={class:"login-container"},y={class:"login-card"},C=(e=>(g("data-v-6102512d"),e=e(),p(),e))((()=>t("div",{class:"title"},[t("img",{src:"./static/logo-text-2.f252b556.png"})],-1))),U={class:"content"},k={class:"show-code"},z=["src"],j=_(" 登 录 ");var q=e(o({__name:"index",setup(e){const o=a(),g=r(),p=l({loading:!1,codeUrl:"",loginForm:{username:"admin",password:"gome2022c3",code:"abcd"},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},handleLogin:()=>{g.value.validate((e=>{if(!e)return!1;p.loading=!0,u().login({username:p.loginForm.username,password:p.loginForm.password}).then((()=>{p.loading=!1,o.push({path:"/"}).catch((e=>{console.warn(e)}))})).catch((()=>{f.error("用户名或密码错误！"),p.loading=!1,p.createCode(),p.loginForm.password=""}))}))},createCode:()=>{p.loginForm.code="",p.codeUrl="/api/v1/login/code?"+1e3*Math.random()}});return(e,o)=>{const a=s("el-input"),r=s("el-form-item"),l=s("el-button"),u=s("el-form");return n(),d("div",V,[i(v,{class:"theme-switch"}),t("div",y,[C,t("div",U,[i(u,{ref_key:"loginFormDom",ref:g,model:p.loginForm,rules:p.loginRules,onKeyup:m(p.handleLogin,["enter"])},{default:c((()=>[i(r,{prop:"username"},{default:c((()=>[i(a,{modelValue:p.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>p.loginForm.username=e),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":h(x),size:"large"},null,8,["modelValue","prefix-icon"])])),_:1}),i(r,{prop:"password"},{default:c((()=>[i(a,{modelValue:p.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>p.loginForm.password=e),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":h(w),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])])),_:1}),i(r,{prop:"code"},{default:c((()=>[i(a,{modelValue:p.loginForm.code,"onUpdate:modelValue":o[2]||(o[2]=e=>p.loginForm.code=e),placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":h(b),maxlength:"4",size:"large"},null,8,["modelValue","prefix-icon"]),t("span",k,[t("img",{src:p.codeUrl,onClick:o[3]||(o[3]=(...e)=>p.createCode&&p.createCode(...e))},null,8,z)])])),_:1}),i(l,{loading:p.loading,type:"primary",size:"large",onClick:F(p.handleLogin,["prevent"])},{default:c((()=>[j])),_:1},8,["loading","onClick"])])),_:1},8,["model","rules","onKeyup"])])])])}}}),[["__scopeId","data-v-6102512d"]]);export{q as default};
