/* empty css             *//* empty css                   *//* empty css                 *//* empty css                 *//* empty css                   */import{P as pe}from"./index-a6d3aa60.js";import{i as ue,_ as Te}from"./el-descriptions-item-07110d7c.js";/* empty css                */import"./useUser-6c5288a9.js";import{d as me,o as ce,r as f,C as ie,b as _,g as y,i as m,t as oe,f as a,e as l,w as s,k as Y,X as _e,l as ve,F as k,h as F,c as q,Y as Q,E as fe,N as be,L as ye,M as ke,Z as Ue,$ as Ce,a0 as Ve,a1 as De,G as Ie,_ as ge,a as xe,a2 as de,a3 as Ne,Q as O,S as Pe,T as Se,a4 as Ye,a5 as qe,a6 as Re,j as Le,v as Ae,x as Me,R as $e,a7 as Be,W as Fe,U as ze}from"./index-5b70a67c.js";import{u as Oe}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-1ce847ca.js";/* empty css                     *//* empty css                       */import{i as je}from"./validate-add6ff74.js";import{a as g}from"./index-4a2da8ba.js";const we=Symbol("client"),Ke={class:"pop-top"},We={class:"title"},Ge={class:"form"},Qe={key:0},Xe={class:"add-container"},Ze=me({__name:"CreatOrEditClient",setup(j){const{cId:C}=ue(we),{func:X}=ue(pe);ce(async()=>{await W(),await H(),await z(),C.value&&I()});const U=f([]),K=f([]),R=f([]),D=f(),t=ie({email:"",name:"",password:"asdf1234",password2:"asdf1234",countryCode:"",mobile:"",birth:"",beaverId:"",clientType:"",upperClient:"",level2UpperClientId:"",withheldTax:!1,tfNum:"",bsb:"",accountName:"",accountNumber:"",startDate:"",endDate:"",targetAmount:"",linkToValueup:!1,investmentCreateRequestList:[]}),A=ie({email:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(c,n,o)=>{n===""?o(new Error("Please input Email")):je(n)?o():o(new Error("Email format is incorrect!"))},trigger:"blur"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(c,n,o)=>{n===""?o(new Error("Please input the Password again")):n!==t.password?o(new Error("Two inputs don't match!")):o()},trigger:"blur"}]}),M=async c=>{c&&await c.validate((n,o)=>{n?(console.log("submit!"),C.value?G():w()):(Q.error("Please enter correct content!"),console.log("error submit!",o))})};async function W(){let c={};const[n,o]=await g.queryUpperClients(c);!n&&o&&(R.value=(o==null?void 0:o.data)||[])}async function H(){let c={type:"client_type"};const[n,o]=await g.queryDictionary(c);!n&&o&&(K.value=(o==null?void 0:o.data)||[])}async function z(){let c={type:"investment_entity_type"};const[n,o]=await g.queryDictionary(c);!n&&o&&(U.value=(o==null?void 0:o.data)||[])}async function w(){let c=t;const[n,o]=await g.createClient(c);!n&&o&&o.success&&(Q.success("Created successfully"),setTimeout(()=>{X()},1e3))}async function G(){let c={...t,id:C.value};const[n,o]=await g.editClient(c);!n&&o&&o.success&&(Q.success("Edit successfully"),setTimeout(()=>{X()},1e3))}async function I(){var x,v,u,N,E,T,P,p,e,d,i,$,V,S,b,J,ee,le,te;let c={id:C.value};const[n,o]=await g.queryClientDetailByIdWhenEdit(c);!n&&o&&(console.log(o.data),t.email=((x=o.data)==null?void 0:x.email)||"",t.name=((v=o.data)==null?void 0:v.name)||"",t.countryCode=((u=o.data)==null?void 0:u.countryCode)||"",t.mobile=((N=o.data)==null?void 0:N.mobile)||"",t.birth=((E=o.data)==null?void 0:E.birth)||"",t.beaverId=((T=o.data)==null?void 0:T.beaverId)||"",t.clientType=String((P=o.data)==null?void 0:P.clientType)||"",t.upperClient=((p=o.data)==null?void 0:p.upperClient)||"",t.level2UpperClientId=((e=o.data)==null?void 0:e.level2UpperClientId)||"",t.withheldTax=((d=o.data)==null?void 0:d.withheldTax)||!1,t.tfNum=((i=o.data)==null?void 0:i.tfNum)||"",t.bsb=(($=o.data)==null?void 0:$.bsb)||"",t.accountName=((V=o.data)==null?void 0:V.accountName)||"",t.accountNumber=((S=o.data)==null?void 0:S.accountNumber)||"",t.startDate=((b=o.data)==null?void 0:b.startDate)||"",t.endDate=((J=o.data)==null?void 0:J.endDate)||"",t.targetAmount=((ee=o.data)==null?void 0:ee.targetAmount)||"",t.linkToValueup=((le=o.data)==null?void 0:le.linkToValueup)||!1,t.investmentCreateRequestList=((te=o.data)==null?void 0:te.investmentCreateRequestList)||[])}const h=()=>{t.investmentCreateRequestList.push({entityName:"",entityType:"",kycResult:!1})},ae=c=>{t.investmentCreateRequestList.splice(c,1)},ne=()=>{t.targetAmount>999999.99?t.targetAmount=999999.99:t.targetAmount=t.targetAmount.replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""};return(c,n)=>{const o=fe,x=be,v=ye,u=ke,N=Ue,E=Ce,T=Ve,P=De,p=Ie;return _(),y(k,null,[m("div",Ke,[m("div",We,oe(a(C)?"Edit Client":"Create Client"),1),m("div",null,[l(x,{type:"primary",color:"#4E9F1C",onClick:n[0]||(n[0]=e=>M(a(D)))},{default:s(()=>[Y(oe(a(C)?"Edit Client":"New Client")+" ",1),l(o,null,{default:s(()=>[l(a(_e))]),_:1})]),_:1})])]),m("div",Ge,[l(p,{ref_key:"ruleFormRef",ref:D,model:a(t),rules:a(A),"label-width":"200px","status-icon":""},{default:s(()=>[l(u,{label:"Email",prop:"email"},{default:s(()=>[l(v,{modelValue:a(t).email,"onUpdate:modelValue":n[1]||(n[1]=e=>a(t).email=e)},null,8,["modelValue"])]),_:1}),a(C)?ve("",!0):(_(),y("div",Qe,[l(u,{label:"Password",prop:"password"},{default:s(()=>[l(v,{modelValue:a(t).password,"onUpdate:modelValue":n[2]||(n[2]=e=>a(t).password=e),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),l(u,{label:"Password confirmation",prop:"password2"},{default:s(()=>[l(v,{modelValue:a(t).password2,"onUpdate:modelValue":n[3]||(n[3]=e=>a(t).password2=e),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1})])),l(u,{label:"Name",prop:"name"},{default:s(()=>[l(v,{modelValue:a(t).name,"onUpdate:modelValue":n[4]||(n[4]=e=>a(t).name=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Country code",prop:"countryCode"},{default:s(()=>[l(v,{modelValue:a(t).countryCode,"onUpdate:modelValue":n[5]||(n[5]=e=>a(t).countryCode=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Mobile",prop:"mobile"},{default:s(()=>[l(v,{modelValue:a(t).mobile,"onUpdate:modelValue":n[6]||(n[6]=e=>a(t).mobile=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Birth",prop:"birth"},{default:s(()=>[l(N,{modelValue:a(t).birth,"onUpdate:modelValue":n[7]||(n[7]=e=>a(t).birth=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"Beaver id",prop:"beaverId"},{default:s(()=>[l(v,{modelValue:a(t).beaverId,"onUpdate:modelValue":n[8]||(n[8]=e=>a(t).beaverId=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Client type",prop:"clientType"},{default:s(()=>[l(T,{modelValue:a(t).clientType,"onUpdate:modelValue":n[9]||(n[9]=e=>a(t).clientType=e),placeholder:"Select Client type"},{default:s(()=>[(_(!0),y(k,null,F(a(K),(e,d)=>(_(),q(E,{label:e.code,value:e.value,key:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"Level1 Upper Client",prop:"upperClient"},{default:s(()=>[l(T,{modelValue:a(t).upperClient,"onUpdate:modelValue":n[10]||(n[10]=e=>a(t).upperClient=e),placeholder:"Please Select"},{default:s(()=>[(_(!0),y(k,null,F(a(R),(e,d)=>(_(),q(E,{label:e.name,value:e.id,key:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"Level2 Upper Client",prop:"level2UpperClientId"},{default:s(()=>[l(T,{modelValue:a(t).level2UpperClientId,"onUpdate:modelValue":n[11]||(n[11]=e=>a(t).level2UpperClientId=e),placeholder:"Please Select"},{default:s(()=>[(_(!0),y(k,null,F(a(R),(e,d)=>(_(),q(E,{label:e.name,value:e.id,key:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"withheldTax",prop:"withheldTax"},{default:s(()=>[l(P,{modelValue:a(t).withheldTax,"onUpdate:modelValue":n[12]||(n[12]=e=>a(t).withheldTax=e),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),l(u,{label:"TFN",prop:"tfNum"},{default:s(()=>[l(v,{modelValue:a(t).tfNum,"onUpdate:modelValue":n[13]||(n[13]=e=>a(t).tfNum=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Bsb",prop:"bsb"},{default:s(()=>[l(v,{modelValue:a(t).bsb,"onUpdate:modelValue":n[14]||(n[14]=e=>a(t).bsb=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Account name",prop:"accountName"},{default:s(()=>[l(v,{modelValue:a(t).accountName,"onUpdate:modelValue":n[15]||(n[15]=e=>a(t).accountName=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Account number",prop:"accountNumber"},{default:s(()=>[l(v,{modelValue:a(t).accountNumber,"onUpdate:modelValue":n[16]||(n[16]=e=>a(t).accountNumber=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Start date",prop:"startDate"},{default:s(()=>[l(N,{modelValue:a(t).startDate,"onUpdate:modelValue":n[17]||(n[17]=e=>a(t).startDate=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"End date",prop:"endDate"},{default:s(()=>[l(N,{modelValue:a(t).endDate,"onUpdate:modelValue":n[18]||(n[18]=e=>a(t).endDate=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"Target amount",prop:"targetAmount"},{default:s(()=>[l(v,{modelValue:a(t).targetAmount,"onUpdate:modelValue":n[19]||(n[19]=e=>a(t).targetAmount=e),type:"number",onInput:ne},null,8,["modelValue"])]),_:1}),l(u,{label:"Link to valueup",prop:"linkToValueup"},{default:s(()=>[l(P,{modelValue:a(t).linkToValueup,"onUpdate:modelValue":n[20]||(n[20]=e=>a(t).linkToValueup=e)},null,8,["modelValue"])]),_:1}),l(u,{label:"Investment Entities",prop:"investmentCreateRequestList"},{default:s(()=>[m("div",Xe,[l(x,{type:"success",onClick:h},{default:s(()=>[Y("Add")]),_:1})]),(_(!0),y(k,null,F(a(t).investmentCreateRequestList,(e,d)=>(_(),y("div",{class:"inner-form",key:d},[l(u,{label:"Entity type"},{default:s(()=>[l(T,{filterable:"",clearable:"",modelValue:e.entityType,"onUpdate:modelValue":i=>e.entityType=i,placeholder:"please select","no-data-text":"no data"},{default:s(()=>[(_(!0),y(k,null,F(a(U),i=>(_(),q(E,{key:i.code,label:i.code,value:i.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{label:"Entity name"},{default:s(()=>[l(v,{modelValue:e.entityName,"onUpdate:modelValue":i=>e.entityName=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{label:"Kyc result"},{default:s(()=>[l(P,{modelValue:e.kycResult,"onUpdate:modelValue":i=>e.kycResult=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(x,{type:"danger",onClick:i=>ae(d)},{default:s(()=>[Y("Remove")]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1},8,["model","rules"])])],64)}}});const re=ge(Ze,[["__scopeId","data-v-b7cb50a3"]]);const se=j=>(Ae("data-v-b337b364"),j=j(),Me(),j),He={class:"client"},Je=se(()=>m("div",{class:"title"},"Client List",-1)),el={class:"tool-box"},ll={class:"flex"},tl={class:"table"},al={class:"table-name"},nl={class:"pointer"},ol={class:"action"},sl=["onClick"],ul=["onClick"],il=["onClick"],dl=se(()=>m("span",null,"Are you sure to delete this?",-1)),rl={class:"dialog-footer"},pl={class:"pagination"},ml=se(()=>m("div",null,null,-1)),cl=me({__name:"index",setup(j){const{setBreadcrumbList:C}=Oe(),X=xe(),U=f(),K=f(!0),R=[{name:"add",component:re},{name:"edit",component:re}],D=f(null),t=[{value:0,label:"Client",name:"name"},{value:1,label:"Email",name:"email"},{value:2,label:"Mobile",name:"mobile"}],Z=f([]),L=f(null),A=f(null),M=f(""),W=f([]),H=f(0),z=f(10),w=f(1),G=f(null),I=f(!1);ce(()=>{h(),ae()});async function h(){var $,V,S;D.value=null;let p={pageSize:z.value,pageNum:w.value},e={};L.value!==null&&(e={[t[L.value].name]:M.value}),A.value!==null&&(e={...e,clientType:($=Z.value[A.value])==null?void 0:$.value});const[d,i]=await g.queryClients(e,p);K.value=!1,!d&&i?(console.log(i.data),H.value=((V=i.data)==null?void 0:V.total)||0,W.value=((S=i.data)==null?void 0:S.list)||[]):console.log(d)}async function ae(){let p={type:"client_type"};const[e,d]=await g.queryDictionary(p);!e&&d&&(Z.value=(d==null?void 0:d.data)||[])}const ne=p=>{w.value=p,h()},c=()=>{L.value=null,M.value="",w.value=1,h()},n=()=>{w.value=1,h()},o=()=>{C([{name:"Create Client"}]),D.value=R.findIndex(p=>p.name==="add"),G.value=null,U.value.handleIsShow()},x=p=>{C([{name:`${p.name}`}]),X.push({path:`/client/detail/${p.id}`}).catch(e=>{console.warn(e)})},v=p=>{C([{name:"Edit Client"}]),D.value=R.findIndex(e=>e.name==="edit"),G.value=p.id,U.value.handleIsShow()},u=()=>{I.value=!0},N=async p=>{const e={id:p.id},[d,i]=await g.delClient(e);!d&&i&&(i.data&&Q.success("delete success"),I.value=!1,h())},E=async p=>{const e={id:p.id},[d,i]=await g.resetClientPassword(e);!d&&i&&i.data&&Q.success("reset success")},T=()=>{U.value&&U.value.handleIsShow()},P=()=>{h()};return de(pe,{func:T}),de(we,{cId:G}),(p,e)=>{const d=Ce,i=Ve,$=ye,V=be,S=fe,b=$e,J=Be,ee=Fe,le=Pe,te=ze,he=Se,Ee=Ye;return _(),y(k,null,[Ne((_(),y("div",He,[Je,m("div",el,[m("div",ll,[l(i,{class:"select",modelValue:a(L),"onUpdate:modelValue":e[0]||(e[0]=r=>O(L)?L.value=r:null),clearable:"",placeholder:"Filter by"},{default:s(()=>[(_(),y(k,null,F(t,r=>l(d,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l($,{modelValue:a(M),"onUpdate:modelValue":e[1]||(e[1]=r=>O(M)?M.value=r:null),class:"m-lr-20 width-200",placeholder:"Search","prefix-icon":a(qe),clearable:""},null,8,["modelValue","prefix-icon"]),l(V,{class:"text-white",type:"primary",color:"#BE9670",onClick:n},{default:s(()=>[Y(" Search ")]),_:1}),l(V,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:c},{default:s(()=>[Y(" Clear ")]),_:1}),l(i,{class:"select m-l-20",modelValue:a(A),"onUpdate:modelValue":e[2]||(e[2]=r=>O(A)?A.value=r:null),clearable:"",placeholder:"Client type",onChange:P},{default:s(()=>[(_(!0),y(k,null,F(a(Z),r=>(_(),q(d,{key:r.value,label:r.code,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m("div",null,[l(V,{type:"primary",color:"#4E9F1C",onClick:o},{default:s(()=>[Y(" New Client "),l(S,null,{default:s(()=>[l(a(_e))]),_:1})]),_:1})])]),m("div",tl,[a(W).length>0?(_(),q(le,{key:0,data:a(W),height:"600","row-style":{height:"80px"}},{default:s(()=>[l(b,{prop:"id",label:"Client ID",align:"center"}),l(b,{prop:"name",label:"Client",align:"left",width:"180"},{default:s(r=>[m("div",al,[m("span",null,oe(r.row.name),1)])]),_:1}),l(b,{prop:"birth",label:"Birth",align:"left"}),l(b,{prop:"email",label:"Email",width:"200"}),l(b,{prop:"mobile",label:"Mobile"}),l(b,{prop:"clientType",label:"Client Type"}),l(b,{prop:"",label:"Total Investment Amount",width:"150"}),l(b,{prop:"",label:"Pervious Month Investment Return (End of month)",width:"150"}),l(b,{prop:"",label:"Total current Investment Return",width:"150"}),l(b,{prop:"",label:"Action",align:"center",fixed:"right"},{default:s(r=>[m("div",nl,[l(ee,{placement:"bottom",width:170,trigger:"hover"},{reference:s(()=>[l(S,{size:30,color:"#969696"},{default:s(()=>[l(a(Re))]),_:1})]),default:s(()=>[m("div",ol,[m("div",{class:"item",onClick:B=>x(r.row)},"View",8,sl),m("div",{class:"item",onClick:B=>v(r.row)},"Edit",8,ul),m("div",{class:"item",onClick:B=>E(r.row)},"Reset password",8,il),m("div",{class:"item",onClick:e[3]||(e[3]=B=>u())},"Delete"),l(J,{modelValue:a(I),"onUpdate:modelValue":e[5]||(e[5]=B=>O(I)?I.value=B:null),title:"Message",width:"30%","align-center":""},{footer:s(()=>[m("span",rl,[l(V,{onClick:e[4]||(e[4]=B=>I.value=!1)},{default:s(()=>[Y("Cancel")]),_:1}),l(V,{type:"primary",onClick:B=>N(r.row)},{default:s(()=>[Y(" Confirm ")]),_:2},1032,["onClick"])])]),default:s(()=>[dl]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(_(),q(te,{key:1,"image-size":200}))]),m("div",pl,[ml,l(he,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:a(H),"page-size":a(z),"onUpdate:pageSize":e[6]||(e[6]=r=>O(z)?z.value=r:null),"current-page":a(w),"onUpdate:currentPage":e[7]||(e[7]=r=>O(w)?w.value=r:null),onCurrentChange:ne},null,8,["total","page-size","current-page"])])])),[[Ee,a(K)]]),l(a(Te),{ref_key:"rightPanel",ref:U,onBackFn:h},{content:s(()=>[a(D)!==null?(_(),q(Le(R[a(D)].component),{key:0})):ve("",!0)]),_:1},512)],64)}}});const Il=ge(cl,[["__scopeId","data-v-b337b364"]]);export{Il as default};
