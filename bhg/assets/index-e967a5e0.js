import{a as T}from"./index-06066bd7.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                   *//* empty css                  */import{i as ge,_ as we}from"./index-68a634a2.js";import{d as ae,o as oe,r as f,D as le,b as c,g as y,i as m,e,w as n,k as U,f as l,a0 as ne,F as w,h as Y,c as D,J as X,E as se,Q as ue,N as re,O as he,U as Ee,a1 as ie,a2 as de,a3 as ke,H as Ue,v as pe,x as me,_ as ce,a as Te,a4 as te,a5 as De,T as A,W as xe,X as Ie,a6 as Pe,a7 as Ne,t as Ye,a8 as Se,j as qe,l as Re,V as Le,a9 as Me,$ as Ae,Y as $e}from"./index-1ae8a691.js";import{u as Be}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-da327601.js";/* empty css                     *//* empty css                  *//* empty css                       */import{P as fe}from"./index-e099722b.js";import{i as Fe}from"./validate-add6ff74.js";import{C as ze}from"./CreatePurchase.vue_vue_type_style_index_0_scoped_0b5a1580_lang-dd48f447.js";/* empty css                        *//* empty css                *//* empty css                    */import"./useUser-15c0fb72.js";const je=C=>(pe("data-v-d04482e4"),C=C(),me(),C),Ke={class:"pop-top"},Oe=je(()=>m("div",{class:"title"},"Create Client",-1)),He={class:"form"},Je={class:"add-container"},Qe=ae({__name:"CreateClient",setup(C){const{func:K}=ge(fe);oe(async()=>{await P(),await B(),await J()});const O=f([]),x=f([]),S=f([]),$=f(),o=le({email:"",name:"",password:"asdf1234",password2:"asdf1234",countryCode:"",mobile:"",birth:"",beaverId:"",clientType:"",upperClient:"",level2UpperClientId:"",withheldTax:!1,tfNum:"",bsb:"",accountName:"",accountNumber:"",startDate:"",endDate:"",targetAmount:"",linkToValueup:!1,investmentCreateRequestList:[]}),h=le({email:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(p,t,u)=>{t===""?u(new Error("Please input Email")):Fe(t)?u():u(new Error("Email format is incorrect!"))},trigger:"blur"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(p,t,u)=>{t===""?u(new Error("Please input the Password again")):t!==o.password?u(new Error("Two inputs don't match!")):u()},trigger:"blur"}]}),I=async p=>{p&&await p.validate((t,u)=>{t?(console.log("submit!"),q()):(X.error("Please enter correct content!"),console.log("error submit!",u))})};async function P(){let p={};const[t,u]=await T.queryUpperClients(p);!t&&u&&(S.value=(u==null?void 0:u.data)||[])}async function B(){let p={type:"client_type"};const[t,u]=await T.queryDictionary(p);!t&&u&&(x.value=(u==null?void 0:u.data)||[])}async function J(){let p={type:"investment_entity_type"};const[t,u]=await T.queryDictionary(p);!t&&u&&(O.value=(u==null?void 0:u.data)||[])}async function q(){let p=o;const[t,u]=await T.createClient(p);!t&&u&&u.success&&(X.success("Created successfully"),setTimeout(()=>{K()},1e3))}const g=()=>{o.investmentCreateRequestList.push({entityName:"",entityType:"",kycResult:!1})},Q=p=>{o.investmentCreateRequestList.splice(p,1)},E=()=>{o.targetAmount>999999.99?o.targetAmount=999999.99:o.targetAmount=o.targetAmount.replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""};return(p,t)=>{const u=se,F=ue,v=re,r=he,R=Ee,L=ie,M=de,z=ke,Z=Ue;return c(),y(w,null,[m("div",Ke,[Oe,m("div",null,[e(F,{type:"primary",color:"#4E9F1C",onClick:t[0]||(t[0]=a=>I(l($)))},{default:n(()=>[U(" New Client "),e(u,null,{default:n(()=>[e(l(ne))]),_:1})]),_:1})])]),m("div",He,[e(Z,{ref_key:"ruleFormRef",ref:$,model:l(o),rules:l(h),"label-width":"200px","status-icon":""},{default:n(()=>[e(r,{label:"Email",prop:"email"},{default:n(()=>[e(v,{modelValue:l(o).email,"onUpdate:modelValue":t[1]||(t[1]=a=>l(o).email=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Password",prop:"password"},{default:n(()=>[e(v,{modelValue:l(o).password,"onUpdate:modelValue":t[2]||(t[2]=a=>l(o).password=a),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,{label:"Password confirmation",prop:"password2"},{default:n(()=>[e(v,{modelValue:l(o).password2,"onUpdate:modelValue":t[3]||(t[3]=a=>l(o).password2=a),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,{label:"Name",prop:"name"},{default:n(()=>[e(v,{modelValue:l(o).name,"onUpdate:modelValue":t[4]||(t[4]=a=>l(o).name=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Country code",prop:"countryCode"},{default:n(()=>[e(v,{modelValue:l(o).countryCode,"onUpdate:modelValue":t[5]||(t[5]=a=>l(o).countryCode=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Mobile",prop:"mobile"},{default:n(()=>[e(v,{modelValue:l(o).mobile,"onUpdate:modelValue":t[6]||(t[6]=a=>l(o).mobile=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Birth",prop:"birth"},{default:n(()=>[e(R,{modelValue:l(o).birth,"onUpdate:modelValue":t[7]||(t[7]=a=>l(o).birth=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"Beaver id",prop:"beaverId"},{default:n(()=>[e(v,{modelValue:l(o).beaverId,"onUpdate:modelValue":t[8]||(t[8]=a=>l(o).beaverId=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Client type",prop:"clientType"},{default:n(()=>[e(M,{modelValue:l(o).clientType,"onUpdate:modelValue":t[9]||(t[9]=a=>l(o).clientType=a),placeholder:"Select Client type"},{default:n(()=>[(c(!0),y(w,null,Y(l(x),(a,i)=>(c(),D(L,{label:a.code,value:a.value,key:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"Level1 Upper Client",prop:"upperClient"},{default:n(()=>[e(M,{modelValue:l(o).upperClient,"onUpdate:modelValue":t[10]||(t[10]=a=>l(o).upperClient=a),placeholder:"Please Select"},{default:n(()=>[(c(!0),y(w,null,Y(l(S),(a,i)=>(c(),D(L,{label:a.name,value:a.id,key:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"Level2 Upper Client",prop:"level2UpperClientId"},{default:n(()=>[e(M,{modelValue:l(o).level2UpperClientId,"onUpdate:modelValue":t[11]||(t[11]=a=>l(o).level2UpperClientId=a),placeholder:"Please Select"},{default:n(()=>[(c(!0),y(w,null,Y(l(S),(a,i)=>(c(),D(L,{label:a.name,value:a.id,key:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"withheldTax",prop:"withheldTax"},{default:n(()=>[e(z,{modelValue:l(o).withheldTax,"onUpdate:modelValue":t[12]||(t[12]=a=>l(o).withheldTax=a),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),e(r,{label:"TFN",prop:"tfNum"},{default:n(()=>[e(v,{modelValue:l(o).tfNum,"onUpdate:modelValue":t[13]||(t[13]=a=>l(o).tfNum=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Bsb",prop:"bsb"},{default:n(()=>[e(v,{modelValue:l(o).bsb,"onUpdate:modelValue":t[14]||(t[14]=a=>l(o).bsb=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Account name",prop:"accountName"},{default:n(()=>[e(v,{modelValue:l(o).accountName,"onUpdate:modelValue":t[15]||(t[15]=a=>l(o).accountName=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Account number",prop:"accountNumber"},{default:n(()=>[e(v,{modelValue:l(o).accountNumber,"onUpdate:modelValue":t[16]||(t[16]=a=>l(o).accountNumber=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Start date",prop:"startDate"},{default:n(()=>[e(R,{modelValue:l(o).startDate,"onUpdate:modelValue":t[17]||(t[17]=a=>l(o).startDate=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"End date",prop:"endDate"},{default:n(()=>[e(R,{modelValue:l(o).endDate,"onUpdate:modelValue":t[18]||(t[18]=a=>l(o).endDate=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"Target amount",prop:"targetAmount"},{default:n(()=>[e(v,{modelValue:l(o).targetAmount,"onUpdate:modelValue":t[19]||(t[19]=a=>l(o).targetAmount=a),type:"number",onInput:E},null,8,["modelValue"])]),_:1}),e(r,{label:"Link to valueup",prop:"linkToValueup"},{default:n(()=>[e(z,{modelValue:l(o).linkToValueup,"onUpdate:modelValue":t[20]||(t[20]=a=>l(o).linkToValueup=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Investment Entities",prop:"investmentCreateRequestList"},{default:n(()=>[m("div",Je,[e(F,{type:"success",onClick:g},{default:n(()=>[U("Add")]),_:1})]),(c(!0),y(w,null,Y(l(o).investmentCreateRequestList,(a,i)=>(c(),y("div",{class:"inner-form",key:i},[e(r,{label:"Entity type"},{default:n(()=>[e(M,{filterable:"",clearable:"",modelValue:a.entityType,"onUpdate:modelValue":s=>a.entityType=s,placeholder:"please select","no-data-text":"no data"},{default:n(()=>[(c(!0),y(w,null,Y(l(O),s=>(c(),D(L,{key:s.code,label:s.code,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{label:"Entity name"},{default:n(()=>[e(v,{modelValue:a.entityName,"onUpdate:modelValue":s=>a.entityName=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{label:"Kyc result"},{default:n(()=>[e(z,{modelValue:a.kycResult,"onUpdate:modelValue":s=>a.kycResult=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(F,{type:"danger",onClick:s=>Q(i)},{default:n(()=>[U("Remove")]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1},8,["model","rules"])])],64)}}}),We=ce(Qe,[["__scopeId","data-v-d04482e4"]]),ee=C=>(pe("data-v-07cce7ef"),C=C(),me(),C),Xe={class:"client"},Ge=ee(()=>m("div",{class:"title"},"Client List",-1)),Ze={class:"tool-box"},el={class:"flex"},ll={class:"table"},tl=["onClick"],al={class:"pointer"},ol={class:"action"},nl=["onClick"],sl=["onClick"],ul=ee(()=>m("span",null,"Are you sure to delete this?",-1)),rl={class:"dialog-footer"},il={class:"pagination"},dl=ee(()=>m("div",null,null,-1)),pl=ae({__name:"index",setup(C){const{setBreadcrumbList:K}=Be(),O=Te(),x=f(),S=f(!0),$=[{name:"add",component:We}],o=f(null),G=[{value:0,label:"Client",name:"name"},{value:1,label:"Email",name:"email"},{value:2,label:"Mobile",name:"mobile"}],H=f([]),h=f(null),I=f(null),P=f(""),B=f([]),J=f(0),q=f(10),g=f(1),Q=f(null),E=f(!1);oe(()=>{p(),t()});async function p(){var W,k,j;o.value=null;let i={pageSize:q.value,pageNum:g.value},s={};h.value!==null&&(s={[G[h.value].name]:P.value}),I.value!==null&&(s={...s,clientType:(W=H.value[I.value])==null?void 0:W.value});const[_,b]=await T.queryClients(s,i);S.value=!1,!_&&b?(console.log(b.data),J.value=((k=b.data)==null?void 0:k.total)||0,B.value=((j=b.data)==null?void 0:j.list)||[]):console.log(_)}async function t(){let i={type:"client_type"};const[s,_]=await T.queryDictionary(i);!s&&_&&(H.value=(_==null?void 0:_.data)||[])}const u=i=>{g.value=i,p()},F=()=>{h.value=null,P.value="",g.value=1,p()},v=()=>{g.value=1,p()},r=()=>{K([{name:"Create Client"}]),o.value=$.findIndex(i=>i.name==="add"),Q.value=null,x.value.handleIsShow()},R=i=>{K([{name:`${i.name}`}]),O.push({path:`/client/detail/${i.id}`}).catch(s=>{console.warn(s)})},L=()=>{E.value=!0},M=async i=>{const s={id:i.id},[_,b]=await T.delClient(s);!_&&b&&(b.data&&X.success("delete success"),E.value=!1,p())},z=async i=>{const s={id:i.id},[_,b]=await T.resetClientPassword(s);!_&&b&&b.data&&X.success("reset success")},Z=()=>{x.value&&x.value.handleIsShow()},a=()=>{p()};return te(fe,{func:Z}),te(ze,{cId:Q}),(i,s)=>{const _=ie,b=de,W=re,k=ue,j=se,V=Le,ve=Me,_e=Ae,be=xe,ye=$e,Ve=Ie,Ce=Pe;return c(),y(w,null,[De((c(),y("div",Xe,[Ge,m("div",Ze,[m("div",el,[e(b,{class:"select",modelValue:l(h),"onUpdate:modelValue":s[0]||(s[0]=d=>A(h)?h.value=d:null),clearable:"",placeholder:"Filter by"},{default:n(()=>[(c(),y(w,null,Y(G,d=>e(_,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(W,{modelValue:l(P),"onUpdate:modelValue":s[1]||(s[1]=d=>A(P)?P.value=d:null),class:"m-lr-20 width-200",placeholder:"Search","prefix-icon":l(Ne),clearable:""},null,8,["modelValue","prefix-icon"]),e(k,{class:"text-white",type:"primary",color:"#BE9670",onClick:v},{default:n(()=>[U(" Search ")]),_:1}),e(k,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:F},{default:n(()=>[U(" Clear ")]),_:1}),e(b,{class:"select m-l-20",modelValue:l(I),"onUpdate:modelValue":s[2]||(s[2]=d=>A(I)?I.value=d:null),clearable:"",placeholder:"Client type",onChange:a},{default:n(()=>[(c(!0),y(w,null,Y(l(H),d=>(c(),D(_,{key:d.value,label:d.code,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m("div",null,[e(k,{type:"primary",color:"#4E9F1C",onClick:r},{default:n(()=>[U(" New Client "),e(j,null,{default:n(()=>[e(l(ne))]),_:1})]),_:1})])]),m("div",ll,[l(B).length>0?(c(),D(be,{key:0,data:l(B),height:"600","row-style":{height:"80px"}},{default:n(()=>[e(V,{prop:"id",label:"Client ID",align:"center",fixed:"left",width:"100"}),e(V,{prop:"name",label:"Client",align:"left",width:"180",fixed:"left"},{default:n(d=>[m("div",{class:"table-name pointer",onClick:N=>R(d.row)},[m("span",null,Ye(d.row.name),1)],8,tl)]),_:1}),e(V,{prop:"birth",label:"Birth",align:"left",width:"150"}),e(V,{prop:"email",label:"Email",width:"200"}),e(V,{prop:"mobile",label:"Mobile",width:"200",align:"center"}),e(V,{prop:"clientType",label:"Client Type",width:"150",align:"center"}),e(V,{prop:"",label:"Total Investment Amount",width:"150"}),e(V,{prop:"",label:"Pervious Month Investment Return (End of month)",width:"150"}),e(V,{prop:"",label:"Total current Investment Return",width:"150"}),e(V,{prop:"",label:"Action",align:"center",fixed:"right"},{default:n(d=>[m("div",al,[e(_e,{placement:"bottom",width:170,trigger:"hover"},{reference:n(()=>[e(j,{size:30,color:"#969696"},{default:n(()=>[e(l(Se))]),_:1})]),default:n(()=>[m("div",ol,[m("div",{class:"item",onClick:N=>R(d.row)},"View",8,nl),m("div",{class:"item",onClick:N=>z(d.row)},"Reset password",8,sl),m("div",{class:"item",onClick:s[3]||(s[3]=N=>L())},"Delete"),e(ve,{modelValue:l(E),"onUpdate:modelValue":s[5]||(s[5]=N=>A(E)?E.value=N:null),title:"Message",width:"30%","align-center":""},{footer:n(()=>[m("span",rl,[e(k,{onClick:s[4]||(s[4]=N=>E.value=!1)},{default:n(()=>[U("Cancel")]),_:1}),e(k,{type:"primary",onClick:N=>M(d.row)},{default:n(()=>[U(" Confirm ")]),_:2},1032,["onClick"])])]),default:n(()=>[ul]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(c(),D(ye,{key:1,"image-size":200}))]),m("div",il,[dl,e(Ve,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:l(J),"page-size":l(q),"onUpdate:pageSize":s[6]||(s[6]=d=>A(q)?q.value=d:null),"current-page":l(g),"onUpdate:currentPage":s[7]||(s[7]=d=>A(g)?g.value=d:null),onCurrentChange:u},null,8,["total","page-size","current-page"])])])),[[Ce,l(S)]]),e(l(we),{ref_key:"rightPanel",ref:x,onBackFn:p},{content:n(()=>[l(o)!==null?(c(),D(qe($[l(o)].component),{key:0})):Re("",!0)]),_:1},512)],64)}}});const Pl=ce(pl,[["__scopeId","data-v-07cce7ef"]]);export{Pl as default};
