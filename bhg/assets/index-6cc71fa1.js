import{a as U}from"./index-1beab65c.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                  */import{i as K,_ as Ie}from"./index-38ed8943.js";import"./useUser-7f9c8acd.js";import{d as H,o as J,r as m,D as te,b as v,g as I,i as s,t as f,f as t,e,w as a,k as _,$ as ne,F as D,h as W,c as B,J as j,E as ie,P as se,N as re,O as Ve,a1 as de,a2 as ce,H as Ce,_ as X,ak as Pe,al as Ne,v as ue,x as pe,a4 as le,a5 as xe,T,V as ke,W as Se,a6 as Te,a7 as Ue,l as ae,a8 as De,j as $e,U as Le,a9 as Ae,Z as Fe,X as Be}from"./index-298568e1.js";import{u as Me}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-b6e11d1a.js";/* empty css                     */import{P as me}from"./index-e099722b.js";import{i as Re}from"./validate-add6ff74.js";/* empty css                             */const Z=Symbol("notification"),qe={class:"pop-top"},ze={class:"title"},Oe={class:"form"},Ye=H({__name:"CreatOrEditNotification",setup(E){const{nId:b}=K(Z),{func:c}=K(me);J(()=>{C(),b.value&&x()});const V=m([]),y=m(),d=te({adminUserEmail:"",roleId:null,password:"asdf1234",password2:"asdf1234"}),l=te({adminUserEmail:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(u,o,n)=>{o===""?n(new Error("Please input Email")):Re(o)?n():n(new Error("Email format is incorrect!"))},trigger:"blur"}],roleId:[{required:!0,message:"Please select Role",trigger:"change"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(u,o,n)=>{o===""?n(new Error("Please input the Password again")):o!==d.password?n(new Error("Two inputs don't match!")):n()},trigger:"blur"}]}),L=async u=>{u&&await u.validate((o,n)=>{o?(console.log("submit!"),b.value?R():M()):(j.error("Please enter correct content!"),console.log("error submit!",n))})};async function C(){let u={};const[o,n]=await U.queryRoles(u);!o&&n&&(V.value=(n==null?void 0:n.data)||[])}async function M(){let u=d;const[o,n]=await U.createAdminUser(u);!o&&n&&n.success&&(j.success("Created successfully"),setTimeout(()=>{c()},1e3))}async function R(){let u={...d,id:b.value};const[o,n]=await U.editAdmin(u);!o&&n&&n.success&&(j.success("Edit successfully"),setTimeout(()=>{c()},1e3))}async function x(){let u={id:b.value};await U.queryEventByIdWhenEdit(u)}return(u,o)=>{const n=ie,P=se,A=re,k=Ve,q=de,z=ce,O=Ce;return v(),I(D,null,[s("div",qe,[s("div",ze,f(t(b)?"Edit notification":"Create notification"),1),s("div",null,[e(P,{type:"primary",color:"#4E9F1C",onClick:o[0]||(o[0]=g=>L(t(y)))},{default:a(()=>[_(f(t(b)?"Edit notification":"New notification")+" ",1),e(n,null,{default:a(()=>[e(t(ne))]),_:1})]),_:1})])]),s("div",Oe,[e(O,{ref_key:"ruleFormRef",ref:y,model:t(d),rules:t(l),"label-width":"200px","status-icon":""},{default:a(()=>[e(k,{label:"Email",prop:"adminUserEmail"},{default:a(()=>[e(A,{modelValue:t(d).adminUserEmail,"onUpdate:modelValue":o[1]||(o[1]=g=>t(d).adminUserEmail=g)},null,8,["modelValue"])]),_:1}),e(k,{label:"Role",prop:"roleId"},{default:a(()=>[e(z,{modelValue:t(d).roleId,"onUpdate:modelValue":o[2]||(o[2]=g=>t(d).roleId=g),placeholder:"Select Role"},{default:a(()=>[(v(!0),I(D,null,W(t(V),(g,Y)=>(v(),B(q,{label:g.roleName,value:g.id,key:Y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"Password",prop:"password"},{default:a(()=>[e(A,{modelValue:t(d).password,"onUpdate:modelValue":o[3]||(o[3]=g=>t(d).password=g),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(k,{label:"Password confirmation",prop:"password2"},{default:a(()=>[e(A,{modelValue:t(d).password2,"onUpdate:modelValue":o[4]||(o[4]=g=>t(d).password2=g),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])],64)}}});const oe=X(Ye,[["__scopeId","data-v-10a1c1dc"]]),je=E=>(ue("data-v-a56bf5f1"),E=E(),pe(),E),Ke=je(()=>s("div",{class:"pop-top"},[s("div",{class:"title"},"View notification"),s("div")],-1)),We={class:"form"},He=H({__name:"ViewNotification",setup(E){const{nId:b}=K(Z),c=m({});J(()=>{V()});async function V(){let y={id:b.value};const[d,p]=await U.queryEventById(y);!d&&p&&(console.log(p.data),c.value=(p==null?void 0:p.data)||{})}return(y,d)=>{const p=Pe,$=Ne;return v(),I(D,null,[Ke,s("div",We,[e($,{column:1,border:""},{default:a(()=>[e(p,{label:"ID","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f((l=t(c))==null?void 0:l.id),1)]}),_:1}),e(p,{label:"Name","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f((l=t(c))==null?void 0:l.name),1)]}),_:1}),e(p,{label:"Message","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.message)||"EMPTY"),1)]}),_:1}),e(p,{label:"Email","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f((l=t(c))==null?void 0:l.email),1)]}),_:1}),e(p,{label:"Create at","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f((l=t(c))==null?void 0:l.createAt),1)]}),_:1}),e(p,{label:"Update At","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.updateAt)||"EMPTY"),1)]}),_:1}),e(p,{label:"Phone","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.phone)||"EMPTY"),1)]}),_:1}),e(p,{label:"Interest","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.interest)||"EMPTY"),1)]}),_:1}),e(p,{label:"Suburb","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.suburb)||"EMPTY"),1)]}),_:1}),e(p,{label:"State","label-align":"center",align:"center"},{default:a(()=>{var l;return[_(f(((l=t(c))==null?void 0:l.state)||"EMPTY"),1)]}),_:1})]),_:1})])],64)}}});const Je=X(He,[["__scopeId","data-v-a56bf5f1"]]),G=E=>(ue("data-v-a0d4d12a"),E=E(),pe(),E),Xe={class:"Notification"},Ze=G(()=>s("div",{class:"title"},"Notification List",-1)),Ge={class:"tool-box"},Qe={class:"flex"},et={class:"table"},tt={class:"table-name"},lt={class:"table-cut"},at={class:"table-img"},ot=["src"],nt={class:"pointer"},it={class:"action"},st=["onClick"],rt=["onClick"],dt=G(()=>s("span",null,"Are you sure to delete this?",-1)),ct={class:"dialog-footer"},ut={class:"pagination"},pt=G(()=>s("div",null,null,-1)),mt=H({__name:"index",setup(E){const{setBreadcrumbList:b}=Me(),c=m(),V=m(!0),y=[{name:"view",component:Je},{name:"add",component:oe},{name:"edit",component:oe}],d=m(null),p=[{value:0,label:"Title",name:"email"},{value:1,label:"Location",name:"location"}],$=m(),l=m(null),L=m(null),C=m(""),M=m([]),R=m(0),x=m(10),u=m(1),o=m(null),n=m(!1);J(()=>{P(),A()});async function P(){d.value=null,x.value,u.value,l.value!==null&&(p[l.value].name+"",C.value),V.value=!1}async function A(){let w={type:"language"};const[r,N]=await U.queryDictionary(w);!r&&N?$.value=(N==null?void 0:N.data)||[]:console.log(r)}const k=w=>{u.value=w,P()},q=()=>{l.value=null,C.value="",u.value=1,P()},z=()=>{u.value=1,P()},O=()=>{b([{name:"Create Notification"}]),d.value=y.findIndex(w=>w.name==="add"),o.value=null,c.value.handleIsShow()},g=w=>{b([{name:"View Notification"}]),d.value=y.findIndex(r=>r.name==="view"),o.value=w.id,c.value.handleIsShow()},Y=w=>{b([{name:"Edit Notification"}]),d.value=y.findIndex(r=>r.name==="edit"),o.value=w.id,c.value.handleIsShow()},_e=()=>{n.value=!0},fe=async w=>{w.id};return le(me,{func:()=>{c.value&&c.value.handleIsShow()}}),le(Z,{nId:o}),(w,r)=>{const N=de,Q=ce,ge=re,F=se,ee=ie,h=Le,ve=Ae,be=Fe,we=ke,he=Be,Ee=Se,ye=Te;return v(),I(D,null,[xe((v(),I("div",Xe,[Ze,s("div",Ge,[s("div",Qe,[e(Q,{class:"select",modelValue:t(l),"onUpdate:modelValue":r[0]||(r[0]=i=>T(l)?l.value=i:null),clearable:"",placeholder:"Filter by"},{default:a(()=>[(v(),I(D,null,W(p,i=>e(N,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(ge,{modelValue:t(C),"onUpdate:modelValue":r[1]||(r[1]=i=>T(C)?C.value=i:null),class:"m-lr-20",placeholder:"Search","prefix-icon":t(Ue),clearable:""},null,8,["modelValue","prefix-icon"]),e(F,{class:"text-white",type:"primary",color:"#BE9670",onClick:z},{default:a(()=>[_(" Search ")]),_:1}),e(F,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:q},{default:a(()=>[_(" Clear ")]),_:1}),e(Q,{class:"select m-l-20",modelValue:t(L),"onUpdate:modelValue":r[2]||(r[2]=i=>T(L)?L.value=i:null),clearable:"",placeholder:"Language"},{default:a(()=>[(v(!0),I(D,null,W(t($),i=>(v(),B(N,{key:i.value,label:i.code,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",null,[e(F,{type:"primary",color:"#4E9F1C",onClick:O},{default:a(()=>[_(" New Notification "),e(ee,null,{default:a(()=>[e(t(ne))]),_:1})]),_:1})])]),s("div",et,[t(M).length>0?(v(),B(we,{key:0,data:t(M),height:"600","row-style":{height:"80px"}},{default:a(()=>[e(h,{prop:"id",label:"Notification ID",align:"center"},{default:a(i=>[s("div",tt,[s("span",null,f(i.row.id),1)])]),_:1}),e(h,{prop:"title",label:"Title",align:"left"}),e(h,{prop:"startTime",label:"Start Time",align:"left"}),e(h,{prop:"location",label:"Location"}),e(h,{prop:"briefIntroduction",label:"Introduction"},{default:a(i=>[s("div",lt,f(i.row.briefIntroduction),1)]),_:1}),e(h,{prop:"language",label:"Language"}),e(h,{prop:"mainImg",label:"Image"},{default:a(i=>[s("div",at,[i.row.mainImg?(v(),I("img",{key:0,class:"img-bg",src:i.row.mainImg},null,8,ot)):ae("",!0)])]),_:1}),e(h,{prop:"link",label:"Link"}),e(h,{prop:"file",label:"File"}),e(h,{prop:"status",label:"Status"}),e(h,{prop:"",label:"Action",align:"center"},{default:a(i=>[s("div",nt,[e(be,{placement:"bottom",width:170,trigger:"hover"},{reference:a(()=>[e(ee,{size:30,color:"#969696"},{default:a(()=>[e(t(De))]),_:1})]),default:a(()=>[s("div",it,[s("div",{class:"item",onClick:S=>g(i.row)},"View",8,st),s("div",{class:"item",onClick:S=>Y(i.row)},"Edit",8,rt),s("div",{class:"item",onClick:r[3]||(r[3]=S=>_e())},"Delete"),e(ve,{modelValue:t(n),"onUpdate:modelValue":r[5]||(r[5]=S=>T(n)?n.value=S:null),title:"Message",width:"30%","align-center":""},{footer:a(()=>[s("span",ct,[e(F,{onClick:r[4]||(r[4]=S=>n.value=!1)},{default:a(()=>[_("Cancel")]),_:1}),e(F,{type:"primary",onClick:S=>fe(i.row)},{default:a(()=>[_(" Confirm ")]),_:2},1032,["onClick"])])]),default:a(()=>[dt]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(v(),B(he,{key:1,"image-size":200}))]),s("div",ut,[pt,e(Ee,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:t(R),"page-size":t(x),"onUpdate:pageSize":r[6]||(r[6]=i=>T(x)?x.value=i:null),"current-page":t(u),"onUpdate:currentPage":r[7]||(r[7]=i=>T(u)?u.value=i:null),onCurrentChange:k},null,8,["total","page-size","current-page"])])])),[[ye,t(V)]]),e(t(Ie),{ref_key:"rightPanel",ref:c,onBackFn:P},{content:a(()=>[t(d)!==null?(v(),B($e(y[t(d)].component),{key:0})):ae("",!0)]),_:1},512)],64)}}});const St=X(mt,[["__scopeId","data-v-a0d4d12a"]]);export{St as default};
