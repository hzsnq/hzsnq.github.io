import{a as D}from"./index-35b0e3a1.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                *//* empty css                  */import{i as he,_ as Ee}from"./index-79b2cd3e.js";import{d as ne,o as se,r as f,G as ae,b as m,h as y,j as c,f as e,e as n,l as V,g as l,a1 as ue,F as h,i as Y,c as E,K as J,E as ie,R as re,O as de,P as ke,V as Ue,a2 as pe,a3 as me,a4 as Te,I as De,x as ce,y as fe,_ as ve,a as xe,a5 as oe,a6 as Ie,a7 as H,U as A,X as Pe,Y as Ne,a8 as Ye,a9 as Se,t as Re,aa as qe,k as Le,m as Me,W as Ae,ab as $e,a0 as Be,Z as Fe}from"./index-5a0eb1b1.js";import{u as ze}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-bdfc2e53.js";/* empty css                     *//* empty css                  *//* empty css                       */import{P as _e}from"./index-e099722b.js";import{i as Ke}from"./validate-add6ff74.js";import{C as je}from"./CreatePurchase.vue_vue_type_style_index_0_scoped_0b5a1580_lang-dd48f447.js";/* empty css                        *//* empty css                *//* empty css                    */import"./useUser-46e05e2c.js";const Oe=g=>(ce("data-v-d04482e4"),g=g(),fe(),g),Ge={class:"pop-top"},We=Oe(()=>c("div",{class:"title"},"Create Client",-1)),Xe={class:"form"},Ze={class:"add-container"},He=ne({__name:"CreateClient",setup(g){const{func:j}=he(_e);se(async()=>{await P(),await B(),await W()});const O=f([]),x=f([]),S=f([]),$=f(),o=ae({email:"",name:"",password:"asdf1234",password2:"asdf1234",countryCode:"",mobile:"",birth:"",beaverId:"",clientType:"",upperClient:"",level2UpperClientId:"",withheldTax:!1,tfNum:"",bsb:"",accountName:"",accountNumber:"",startDate:"",endDate:"",targetAmount:"",linkToValueup:!1,investmentCreateRequestList:[]}),k=ae({email:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(p,t,u)=>{t===""?u(new Error("Please input Email")):Ke(t)?u():u(new Error("Email format is incorrect!"))},trigger:"blur"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(p,t,u)=>{t===""?u(new Error("Please input the Password again")):t!==o.password?u(new Error("Two inputs don't match!")):u()},trigger:"blur"}]}),I=async p=>{p&&await p.validate((t,u)=>{t?(console.log("submit!"),R()):(J.error("Please enter correct content!"),console.log("error submit!",u))})};async function P(){let p={};const[t,u]=await D.queryUpperClients(p);!t&&u&&(S.value=(u==null?void 0:u.data)||[])}async function B(){let p={type:"client_type"};const[t,u]=await D.queryDictionary(p);!t&&u&&(x.value=(u==null?void 0:u.data)||[])}async function W(){let p={type:"investment_entity_type"};const[t,u]=await D.queryDictionary(p);!t&&u&&(O.value=(u==null?void 0:u.data)||[])}async function R(){let p=o;const[t,u]=await D.createClient(p);!t&&u&&u.success&&(J.success("Created successfully"),setTimeout(()=>{j()},1e3))}const w=()=>{o.investmentCreateRequestList.push({entityName:"",entityType:"",kycResult:!1})},X=p=>{o.investmentCreateRequestList.splice(p,1)},U=()=>{o.targetAmount>999999.99?o.targetAmount=999999.99:o.targetAmount=o.targetAmount.replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""};return(p,t)=>{const u=ie,F=re,v=de,i=ke,q=Ue,L=pe,M=me,z=Te,ee=De;return m(),y(h,null,[c("div",Ge,[We,c("div",null,[e(F,{type:"primary",color:"#4E9F1C",onClick:t[0]||(t[0]=a=>I(l($)))},{default:n(()=>[V(" New Client "),e(u,null,{default:n(()=>[e(l(ue))]),_:1})]),_:1})])]),c("div",Xe,[e(ee,{ref_key:"ruleFormRef",ref:$,model:l(o),rules:l(k),"label-width":"200px","status-icon":""},{default:n(()=>[e(i,{label:"Email",prop:"email"},{default:n(()=>[e(v,{modelValue:l(o).email,"onUpdate:modelValue":t[1]||(t[1]=a=>l(o).email=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Password",prop:"password"},{default:n(()=>[e(v,{modelValue:l(o).password,"onUpdate:modelValue":t[2]||(t[2]=a=>l(o).password=a),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(i,{label:"Password confirmation",prop:"password2"},{default:n(()=>[e(v,{modelValue:l(o).password2,"onUpdate:modelValue":t[3]||(t[3]=a=>l(o).password2=a),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(i,{label:"Name",prop:"name"},{default:n(()=>[e(v,{modelValue:l(o).name,"onUpdate:modelValue":t[4]||(t[4]=a=>l(o).name=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Country code",prop:"countryCode"},{default:n(()=>[e(v,{modelValue:l(o).countryCode,"onUpdate:modelValue":t[5]||(t[5]=a=>l(o).countryCode=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Mobile",prop:"mobile"},{default:n(()=>[e(v,{modelValue:l(o).mobile,"onUpdate:modelValue":t[6]||(t[6]=a=>l(o).mobile=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Birth",prop:"birth"},{default:n(()=>[e(q,{modelValue:l(o).birth,"onUpdate:modelValue":t[7]||(t[7]=a=>l(o).birth=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"Beaver id",prop:"beaverId"},{default:n(()=>[e(v,{modelValue:l(o).beaverId,"onUpdate:modelValue":t[8]||(t[8]=a=>l(o).beaverId=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Client type",prop:"clientType"},{default:n(()=>[e(M,{modelValue:l(o).clientType,"onUpdate:modelValue":t[9]||(t[9]=a=>l(o).clientType=a),placeholder:"Select Client type"},{default:n(()=>[(m(!0),y(h,null,Y(l(x),(a,r)=>(m(),E(L,{label:a.code,value:a.value,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"Level1 Upper Client",prop:"upperClient"},{default:n(()=>[e(M,{modelValue:l(o).upperClient,"onUpdate:modelValue":t[10]||(t[10]=a=>l(o).upperClient=a),placeholder:"Please Select"},{default:n(()=>[(m(!0),y(h,null,Y(l(S),(a,r)=>(m(),E(L,{label:a.name,value:a.id,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"Level2 Upper Client",prop:"level2UpperClientId"},{default:n(()=>[e(M,{modelValue:l(o).level2UpperClientId,"onUpdate:modelValue":t[11]||(t[11]=a=>l(o).level2UpperClientId=a),placeholder:"Please Select"},{default:n(()=>[(m(!0),y(h,null,Y(l(S),(a,r)=>(m(),E(L,{label:a.name,value:a.id,key:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"withheldTax",prop:"withheldTax"},{default:n(()=>[e(z,{modelValue:l(o).withheldTax,"onUpdate:modelValue":t[12]||(t[12]=a=>l(o).withheldTax=a),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),e(i,{label:"TFN",prop:"tfNum"},{default:n(()=>[e(v,{modelValue:l(o).tfNum,"onUpdate:modelValue":t[13]||(t[13]=a=>l(o).tfNum=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Bsb",prop:"bsb"},{default:n(()=>[e(v,{modelValue:l(o).bsb,"onUpdate:modelValue":t[14]||(t[14]=a=>l(o).bsb=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Account name",prop:"accountName"},{default:n(()=>[e(v,{modelValue:l(o).accountName,"onUpdate:modelValue":t[15]||(t[15]=a=>l(o).accountName=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Account number",prop:"accountNumber"},{default:n(()=>[e(v,{modelValue:l(o).accountNumber,"onUpdate:modelValue":t[16]||(t[16]=a=>l(o).accountNumber=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Start date",prop:"startDate"},{default:n(()=>[e(q,{modelValue:l(o).startDate,"onUpdate:modelValue":t[17]||(t[17]=a=>l(o).startDate=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"End date",prop:"endDate"},{default:n(()=>[e(q,{modelValue:l(o).endDate,"onUpdate:modelValue":t[18]||(t[18]=a=>l(o).endDate=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"Target amount",prop:"targetAmount"},{default:n(()=>[e(v,{modelValue:l(o).targetAmount,"onUpdate:modelValue":t[19]||(t[19]=a=>l(o).targetAmount=a),type:"number",onInput:U},null,8,["modelValue"])]),_:1}),e(i,{label:"Link to valueup",prop:"linkToValueup"},{default:n(()=>[e(z,{modelValue:l(o).linkToValueup,"onUpdate:modelValue":t[20]||(t[20]=a=>l(o).linkToValueup=a)},null,8,["modelValue"])]),_:1}),e(i,{label:"Investment Entities",prop:"investmentCreateRequestList"},{default:n(()=>[c("div",Ze,[e(F,{type:"success",onClick:w},{default:n(()=>[V("Add")]),_:1})]),(m(!0),y(h,null,Y(l(o).investmentCreateRequestList,(a,r)=>(m(),y("div",{class:"inner-form",key:r},[e(i,{label:"Entity type"},{default:n(()=>[e(M,{filterable:"",clearable:"",modelValue:a.entityType,"onUpdate:modelValue":s=>a.entityType=s,placeholder:"please select","no-data-text":"no data"},{default:n(()=>[(m(!0),y(h,null,Y(l(O),s=>(m(),E(L,{key:s.code,label:s.code,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{label:"Entity name"},{default:n(()=>[e(v,{modelValue:a.entityName,"onUpdate:modelValue":s=>a.entityName=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{label:"Kyc result"},{default:n(()=>[e(z,{modelValue:a.kycResult,"onUpdate:modelValue":s=>a.kycResult=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(F,{type:"danger",onClick:s=>X(r)},{default:n(()=>[V("Remove")]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1},8,["model","rules"])])],64)}}}),Je=ve(He,[["__scopeId","data-v-d04482e4"]]),te=g=>(ce("data-v-1ae2a4bf"),g=g(),fe(),g),Qe={class:"client"},el=te(()=>c("div",{class:"title"},"Client List",-1)),ll={class:"tool-box"},tl={class:"flex"},al={class:"table"},ol=["onClick"],nl={class:"pointer"},sl={class:"action"},ul=["onClick"],il=["onClick"],rl=te(()=>c("span",null,"Are you sure to delete this?",-1)),dl={class:"dialog-footer"},pl={class:"pagination"},ml=te(()=>c("div",null,null,-1)),cl=ne({__name:"index",setup(g){const{setBreadcrumbList:j}=ze(),O=xe(),x=f(),S=f(!0),$=[{name:"add",component:Je}],o=f(null),Q=[{value:0,label:"Client",name:"name"},{value:1,label:"Email",name:"email"},{value:2,label:"Mobile",name:"mobile"}],G=f([]),k=f(null),I=f(null),P=f(""),B=f([]),W=f(0),R=f(10),w=f(1),X=f(null),U=f(!1);se(()=>{p(),t()});async function p(){var Z,T,K;o.value=null;let r={pageSize:R.value,pageNum:w.value},s={};k.value!==null&&(s={[Q[k.value].name]:P.value}),I.value!==null&&(s={...s,clientType:(Z=G.value[I.value])==null?void 0:Z.value});const[_,b]=await D.queryClients(s,r);S.value=!1,!_&&b?(console.log(b.data),W.value=((T=b.data)==null?void 0:T.total)||0,B.value=((K=b.data)==null?void 0:K.list)||[]):console.log(_)}async function t(){let r={type:"client_type"};const[s,_]=await D.queryDictionary(r);!s&&_&&(G.value=(_==null?void 0:_.data)||[])}const u=r=>{w.value=r,p()},F=()=>{k.value=null,P.value="",w.value=1,p()},v=()=>{w.value=1,p()},i=()=>{j([{name:"Create Client"}]),o.value=$.findIndex(r=>r.name==="add"),X.value=null,x.value.handleIsShow()},q=r=>{j([{name:`${r.name}`}]),O.push({path:`/client/detail/${r.id}`}).catch(s=>{console.warn(s)})},L=()=>{U.value=!0},M=async r=>{const s={id:r.id},[_,b]=await D.delClient(s);!_&&b&&(b.data&&J.success("delete success"),U.value=!1,p())},z=async r=>{const s={id:r.id},[_,b]=await D.resetClientPassword(s);!_&&b&&b.data&&J.success("reset success")},ee=()=>{x.value&&x.value.handleIsShow()},a=()=>{p()};return oe(_e,{func:ee}),oe(je,{cId:X}),(r,s)=>{const _=pe,b=me,Z=de,T=re,K=ie,C=Ae,be=$e,ye=Be,Ce=Pe,Ve=Fe,ge=Ne,le=Ie("permission"),we=Ye;return m(),y(h,null,[H((m(),y("div",Qe,[el,c("div",ll,[c("div",tl,[e(b,{class:"select",modelValue:l(k),"onUpdate:modelValue":s[0]||(s[0]=d=>A(k)?k.value=d:null),clearable:"",placeholder:"Filter by"},{default:n(()=>[(m(),y(h,null,Y(Q,d=>e(_,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(Z,{modelValue:l(P),"onUpdate:modelValue":s[1]||(s[1]=d=>A(P)?P.value=d:null),class:"m-lr-20 width-200",placeholder:"Search","prefix-icon":l(Se),clearable:""},null,8,["modelValue","prefix-icon"]),e(T,{class:"text-white",type:"primary",color:"#BE9670",onClick:v},{default:n(()=>[V(" Search ")]),_:1}),e(T,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:F},{default:n(()=>[V(" Clear ")]),_:1}),e(b,{class:"select m-l-20",modelValue:l(I),"onUpdate:modelValue":s[2]||(s[2]=d=>A(I)?I.value=d:null),clearable:"",placeholder:"Client type",onChange:a},{default:n(()=>[(m(!0),y(h,null,Y(l(G),d=>(m(),E(_,{key:d.value,label:d.code,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),c("div",null,[H((m(),E(T,{type:"primary",color:"#4E9F1C",onClick:i},{default:n(()=>[V(" New Client "),e(K,null,{default:n(()=>[e(l(ue))]),_:1})]),_:1})),[[le,"Client"]])])]),c("div",al,[l(B).length>0?(m(),E(Ce,{key:0,data:l(B),height:"600","row-style":{height:"80px"}},{default:n(()=>[e(C,{prop:"id",label:"Client ID",align:"center",fixed:"left",width:"100"}),e(C,{prop:"name",label:"Client",align:"left",width:"180",fixed:"left"},{default:n(d=>[c("div",{class:"table-name pointer",onClick:N=>q(d.row)},[c("span",null,Re(d.row.name),1)],8,ol)]),_:1}),e(C,{prop:"birth",label:"Birth",align:"left",width:"150"}),e(C,{prop:"email",label:"Email",width:"200"}),e(C,{prop:"mobile",label:"Mobile",width:"200",align:"center"}),e(C,{prop:"clientType",label:"Client Type",width:"150",align:"center"}),e(C,{prop:"",label:"Total Investment Amount",width:"150"}),e(C,{prop:"",label:"Pervious Month Investment Return (End of month)",width:"150"}),e(C,{prop:"",label:"Total current Investment Return",width:"150"}),e(C,{prop:"",label:"Action",align:"center",fixed:"right"},{default:n(d=>[c("div",nl,[e(ye,{placement:"bottom",width:170,trigger:"hover"},{reference:n(()=>[e(K,{size:30,color:"#969696"},{default:n(()=>[e(l(qe))]),_:1})]),default:n(()=>[c("div",sl,[c("div",{class:"item",onClick:N=>q(d.row)},"View",8,ul),H((m(),y("div",{class:"item",onClick:N=>z(d.row)},[V("Reset password")],8,il)),[[le,"Client"]]),H((m(),y("div",{class:"item",onClick:s[3]||(s[3]=N=>L())},[V("Delete")])),[[le,"Client"]]),e(be,{modelValue:l(U),"onUpdate:modelValue":s[5]||(s[5]=N=>A(U)?U.value=N:null),title:"Message",width:"30%","align-center":""},{footer:n(()=>[c("span",dl,[e(T,{onClick:s[4]||(s[4]=N=>U.value=!1)},{default:n(()=>[V("Cancel")]),_:1}),e(T,{type:"primary",onClick:N=>M(d.row)},{default:n(()=>[V(" Confirm ")]),_:2},1032,["onClick"])])]),default:n(()=>[rl]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(m(),E(Ve,{key:1,"image-size":200}))]),c("div",pl,[ml,e(ge,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:l(W),"page-size":l(R),"onUpdate:pageSize":s[6]||(s[6]=d=>A(R)?R.value=d:null),"current-page":l(w),"onUpdate:currentPage":s[7]||(s[7]=d=>A(w)?w.value=d:null),onCurrentChange:u},null,8,["total","page-size","current-page"])])])),[[we,l(S)]]),e(l(Ee),{ref_key:"rightPanel",ref:x,onBackFn:p},{content:n(()=>[l(o)!==null?(m(),E(Le($[l(o)].component),{key:0})):Me("",!0)]),_:1},512)],64)}}});const Yl=ve(cl,[["__scopeId","data-v-1ae2a4bf"]]);export{Yl as default};
