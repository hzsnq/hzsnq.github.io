import{a as x}from"./index-06066bd7.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                   *//* empty css                  */import{i as oe,_ as gt}from"./index-68a634a2.js";/* empty css                       */import{d as pe,a as Je,o as _e,r as b,D as se,R as H,b as A,g as U,i as a,t as f,f as e,e as t,w as l,k as v,a0 as ne,T as X,F as Z,J as z,E as fe,Q as ve,N as Ce,O as we,U as he,a3 as bt,P as Dt,a9 as Qe,V as Ie,aa as Ct,W as Ee,H as Ye,v as ke,x as Ve,_ as ye,h as me,c as ae,a1 as wt,a2 as It,ab as Xe,l as le,a4 as re,a5 as Et,p as Yt,ac as kt,$ as Vt,X as At,a6 as xt,ad as Pt,ae as Mt,S as De,af as Nt,M as $t,ag as Ft,ah as St,a8 as Ge,j as Tt,Y as Ut}from"./index-1ae8a691.js";import{u as Bt}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-da327601.js";/* empty css                     *//* empty css                  */import{P as ge}from"./index-e099722b.js";import{C as Ze,E as Rt}from"./CreatePurchase.vue_vue_type_style_index_0_scoped_0b5a1580_lang-dd48f447.js";/* empty css                        *//* empty css                */import{I as Ae,C as We}from"./investment-4b59c9de.js";/* empty css                    */import"./useUser-15c0fb72.js";const de=T=>(ke("data-v-b778bac1"),T=T(),Ve(),T),Lt={class:"pop-top"},qt=de(()=>a("div",{class:"title"},"Edit Client",-1)),zt={class:"sub-title"},Ot={class:"sub-title"},jt={class:"form"},Kt=de(()=>a("div",{class:"table-title"},"Personal Information",-1)),Ht={class:"block padding-t-20"},Gt=de(()=>a("div",{class:"table-title"},"Account Setting",-1)),Wt=de(()=>a("span",null,"Are you sure to delete this?",-1)),Jt={class:"dialog-footer"},Qt={class:"block padding-t-20"},Xt=de(()=>a("div",{class:"table-title"},"Commission Payment Records",-1)),Zt={class:"position"},ea=pe({__name:"EditClient",setup(T){const P=Je(),{cId:I}=oe(Ze),{func:R}=oe(ge);_e(async()=>{I.value&&(W(),m())});const N=b({}),V=b([]),M=b(!1),D=b(),n=se({name:"",countryCode:"",mobile:"",birth:"",withheldTax:!1,tfNum:"",bsb:"",accountName:"",accountNumber:"",targetAmount:""}),F=se({}),B=async _=>{_&&await _.validate((s,p)=>{s?(console.log("submit!"),G()):(z.error("Please enter correct content!"),console.log("error submit!",p))})};async function G(){let _={...n,id:I.value};const[s,p]=await x.editClient(_);!s&&p&&p.success&&(z.success("Edit successfully"),setTimeout(()=>{R()},1e3))}async function W(){var S,k,Y,O,h,C,J,L,K,ee;let _={id:I.value};const[s,p]=await x.queryClientDetailById(_);!s&&p&&(console.log(p.data),N.value=p.data,n.birth=H((S=p.data)==null?void 0:S.birth).format("YYYY-MM-DD")||"",n.name=((k=p.data)==null?void 0:k.name)||"",n.countryCode=((Y=p.data)==null?void 0:Y.countryCode)||"",n.mobile=((O=p.data)==null?void 0:O.mobile)||"",n.withheldTax=((h=p.data)==null?void 0:h.withheldTax)||!1,n.tfNum=((C=p.data)==null?void 0:C.tfNum)||"",n.bsb=((J=p.data)==null?void 0:J.bsb)||"",n.accountName=((L=p.data)==null?void 0:L.accountName)||"",n.accountNumber=((K=p.data)==null?void 0:K.accountNumber)||"",n.targetAmount=((ee=p.data)==null?void 0:ee.targetAmount)||"")}async function m(){let _={clientId:I.value};const[s,p]=await x.queryEntity(_);!s&&p&&(console.log(p==null?void 0:p.data),V.value=(p==null?void 0:p.data)||[])}const r=()=>{n.targetAmount>999999.99?n.targetAmount=999999.99:n.targetAmount=n.targetAmount.replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""},o=()=>{M.value=!0},y=async()=>{const _={id:N.value.id},[s,p]=await x.delClient(_);!s&&p&&(p.data&&z.success("delete success"),M.value=!1,P.push({path:"/client/index"}).catch(S=>{console.warn(S)}))};return(_,s)=>{var ue;const p=fe,S=ve,k=Ce,Y=we,O=he,h=bt,C=Dt,J=Qe,L=Ie,K=Ct,ee=Ee,ce=Ye;return A(),U(Z,null,[a("div",Lt,[a("div",null,[qt,a("div",zt,"Client ID: "+f(e(N).id),1),a("div",Ot,"DOB: "+f(e(H)(((ue=e(N))==null?void 0:ue.birth)||"").format("DD.MM.YYYY")),1)]),a("div",null,[t(S,{type:"primary",color:"#4E9F1C",onClick:s[0]||(s[0]=g=>B(e(D)))},{default:l(()=>[v(" Edit Client "),t(p,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})])]),a("div",jt,[t(ce,{ref_key:"ruleFormRef",ref:D,model:e(n),rules:e(F),"label-width":"200px","status-icon":""},{default:l(()=>[Kt,t(Y,{label:"Name",prop:"name"},{default:l(()=>[t(k,{modelValue:e(n).name,"onUpdate:modelValue":s[1]||(s[1]=g=>e(n).name=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Mobile number",prop:"mobile"},{default:l(()=>[t(k,{modelValue:e(n).mobile,"onUpdate:modelValue":s[2]||(s[2]=g=>e(n).mobile=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Country code",prop:"countryCode"},{default:l(()=>[t(k,{modelValue:e(n).countryCode,"onUpdate:modelValue":s[3]||(s[3]=g=>e(n).countryCode=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Birth",prop:"birth"},{default:l(()=>[t(O,{modelValue:e(n).birth,"onUpdate:modelValue":s[4]||(s[4]=g=>e(n).birth=g),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(Y,{label:"withheldTax",prop:"withheldTax"},{default:l(()=>[t(h,{modelValue:e(n).withheldTax,"onUpdate:modelValue":s[5]||(s[5]=g=>e(n).withheldTax=g),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),t(Y,{label:"TFN",prop:"tfNum"},{default:l(()=>[t(k,{modelValue:e(n).tfNum,"onUpdate:modelValue":s[6]||(s[6]=g=>e(n).tfNum=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Bsb",prop:"bsb"},{default:l(()=>[t(k,{modelValue:e(n).bsb,"onUpdate:modelValue":s[7]||(s[7]=g=>e(n).bsb=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Account name",prop:"accountName"},{default:l(()=>[t(k,{modelValue:e(n).accountName,"onUpdate:modelValue":s[8]||(s[8]=g=>e(n).accountName=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Account number",prop:"accountNumber"},{default:l(()=>[t(k,{modelValue:e(n).accountNumber,"onUpdate:modelValue":s[9]||(s[9]=g=>e(n).accountNumber=g)},null,8,["modelValue"])]),_:1}),t(Y,{label:"Target amount",prop:"targetAmount"},{default:l(()=>[t(k,{modelValue:e(n).targetAmount,"onUpdate:modelValue":s[10]||(s[10]=g=>e(n).targetAmount=g),type:"number",onInput:r},null,8,["modelValue"])]),_:1}),a("div",Ht,[Gt,t(Y,{label:"Login Account"},{default:l(()=>[v(f(e(N).email)+" ",1)]),_:1}),t(Y,{size:"small"},{default:l(()=>[t(C,{onClick:o},{default:l(()=>[v("Delete Account")]),_:1}),t(J,{modelValue:e(M),"onUpdate:modelValue":s[12]||(s[12]=g=>X(M)?M.value=g:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",Jt,[t(S,{onClick:s[11]||(s[11]=g=>M.value=!1)},{default:l(()=>[v("Cancel")]),_:1}),t(S,{type:"primary",onClick:y},{default:l(()=>[v(" Confirm ")]),_:1})])]),default:l(()=>[Wt]),_:1},8,["modelValue"])]),_:1})]),a("div",Qt,[Xt,t(ee,{data:e(V),height:"300","row-style":{height:"90px"},"header-cell-style":{background:"#BE9670",color:"#fff"},"cell-style":{"z-index":"auto"}},{default:l(()=>[t(L,{prop:"entityType",label:"Investor Type",align:"center"}),t(L,{prop:"entityName",label:"Investor Name",align:"center"}),t(L,{prop:"kycResult",label:"KYC Result",align:"center"}),t(L,{prop:"file1Front",label:"Document 1 Front",align:"center"},{default:l(g=>[a("div",Zt,[t(K,{style:{width:"100px",height:"100px"},src:g.row.file1Front,"preview-src-list":[g.row.file1Front],fit:"contain"},null,8,["src","preview-src-list"])])]),_:1}),t(L,{prop:"file1Back",label:"Document 1 Back",align:"center"},{default:l(g=>[t(K,{style:{width:"100px",height:"100px"},src:g.row.file1Back,"preview-src-list":[g.row.file1Back],fit:"contain"},null,8,["src","preview-src-list"])]),_:1}),t(L,{prop:"livePhoto",label:"Live Photo",align:"center"},{default:l(g=>[t(K,{style:{width:"100px",height:"100px"},src:g.row.livePhoto,"preview-src-list":[g.row.livePhoto],fit:"contain"},null,8,["src","preview-src-list"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["model","rules"])])],64)}}}),ta=ye(ea,[["__scopeId","data-v-b778bac1"]]),aa={class:"pop-top"},la={class:"title"},na={class:"form"},oa=pe({__name:"CreateInvestment",setup(T){const{iId:P,info:I}=oe(Ae),{func:R}=oe(ge);_e(async()=>{await G(),await W(),n.clientId=I.value.clientId,n.investmentEntityId=I.value.entityId});const N=b([]),V=b([]),M=b([]),D=b(),n=se({clientId:"",fundId:"",investmentEntityId:"",transactionDate:"",purchasedAmount:"",unitCertificateDate:"",purchaseEndDate:"",applicationFormSigned:""}),F=se({fundId:[{required:!0,message:"Please select fund",trigger:"change"}],unitCertificateDate:[{type:"date",required:!0,message:"Please pick a unitCertificateDate",trigger:"change"}],purchasedAmount:[{required:!0,message:"Please input Purchase Amount",trigger:"blur"}]}),B=async r=>{r&&await r.validate((o,y)=>{o?(console.log("submit!"),n.applicationFormSigned=M.value.length>0?M.value[0].raw:"",m()):(z.error("Please enter correct content!"),console.log("error submit!",y))})};async function G(){let r={};const[o,y]=await x.getClientsNames(r);!o&&y&&(N.value=(y==null?void 0:y.data)||[])}async function W(){let r={};const[o,y]=await x.getFundsNames(r);!o&&y&&(V.value=(y==null?void 0:y.data)||[])}async function m(){let r=n;const o=new FormData;Object.keys(r).forEach(s=>{[null,void 0,""].includes(r[s])||o.append(s,r[s])});const[y,_]=await x.createPurchasedFund(o);!y&&_&&_.success&&(z.success("Created successfully"),setTimeout(()=>{R()},1e3))}return(r,o)=>{const y=fe,_=ve,s=we,p=wt,S=It,k=he,Y=Ce,O=Xe,h=Ye;return A(),U(Z,null,[a("div",aa,[a("div",la,f(e(P)?"Edit Investment":"Create Investment"),1),a("div",null,[t(_,{type:"primary",color:"#4E9F1C",onClick:o[0]||(o[0]=C=>B(e(D)))},{default:l(()=>[v(f(e(P)?"Edit Investment":"New Investment")+" ",1),t(y,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})])]),a("div",na,[t(h,{ref_key:"ruleFormRef",ref:D,model:e(n),rules:e(F),"label-width":"200px","status-icon":""},{default:l(()=>[t(s,{label:"Client",prop:"clientId"},{default:l(()=>{var C;return[v(f(((C=e(I))==null?void 0:C.clientName)||""),1)]}),_:1}),t(s,{label:"Entity Name",prop:"investmentEntityId"},{default:l(()=>{var C;return[v(f(((C=e(I))==null?void 0:C.entityName)||""),1)]}),_:1}),t(s,{label:"Fund",prop:"fundId"},{default:l(()=>[t(S,{modelValue:e(n).fundId,"onUpdate:modelValue":o[1]||(o[1]=C=>e(n).fundId=C),placeholder:"Please Fund",filterable:"",clearable:""},{default:l(()=>[(A(!0),U(Z,null,me(e(V),(C,J)=>(A(),ae(p,{label:C.name,value:C.id,key:J},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"Transaction Date",prop:"transactionDate"},{default:l(()=>[t(k,{modelValue:e(n).transactionDate,"onUpdate:modelValue":o[2]||(o[2]=C=>e(n).transactionDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Purchase Amount",prop:"purchasedAmount"},{default:l(()=>[t(Y,{modelValue:e(n).purchasedAmount,"onUpdate:modelValue":o[3]||(o[3]=C=>e(n).purchasedAmount=C),type:"number"},null,8,["modelValue"])]),_:1}),t(s,{label:"U/C Date",prop:"unitCertificateDate"},{default:l(()=>[t(k,{modelValue:e(n).unitCertificateDate,"onUpdate:modelValue":o[4]||(o[4]=C=>e(n).unitCertificateDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Purchase End Date",prop:"purchaseEndDate"},{default:l(()=>[t(k,{modelValue:e(n).purchaseEndDate,"onUpdate:modelValue":o[5]||(o[5]=C=>e(n).purchaseEndDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Application form signed",prop:"applicationFormSigned"},{default:l(()=>[t(O,{"file-list":e(M),"onUpdate:fileList":o[6]||(o[6]=C=>X(M)?M.value=C:null),"auto-upload":!1,limit:1,"list-type":"text"},{trigger:l(()=>[t(_,{type:"primary"},{default:l(()=>[v("Choose file")]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])],64)}}}),sa=ye(oa,[["__scopeId","data-v-ac78f692"]]),ia=T=>(ke("data-v-0b5a1580"),T=T(),Ve(),T),da={class:"pop-top"},ca={class:"title"},ua={class:"form"},ra={key:0,class:"block padding-t-20"},ma=ia(()=>a("div",{class:"table-title"},"Interest Payment Records",-1)),pa=pe({__name:"CreatePurchase",setup(T){const{iId:P,info:I}=oe(Ae),{func:R}=oe(ge);_e(()=>{var m,r,o;D.clientId=(m=I.value)==null?void 0:m.clientId,D.fundId=(r=I.value)==null?void 0:r.fundId,D.investmentEntityId=(o=I.value)==null?void 0:o.entityId,P.value&&W()});const N=b({}),V=b([]),M=b(),D=se({clientId:"",fundId:"",investmentEntityId:"",transactionDate:"",purchasedAmount:"",unitCertificateDate:"",purchaseEndDate:"",applicationFormSigned:""}),n=se({unitCertificateDate:[{type:"date",required:!0,message:"Please pick a unitCertificateDate",trigger:"change"}],purchasedAmount:[{required:!0,message:"Please input Purchase Amount",trigger:"blur"}]}),F=async m=>{m&&await m.validate((r,o)=>{r?(console.log("submit!"),D.applicationFormSigned=V.value.length>0?V.value[0].raw:"",P.value?G():B()):(z.error("Please enter correct content!"),console.log("error submit!",o))})};async function B(){let m=D;const r=new FormData;Object.keys(m).forEach(_=>{[null,void 0,""].includes(m[_])||r.append(_,m[_])});const[o,y]=await x.createPurchasedFund(r);!o&&y&&y.success&&(z.success("Created successfully"),setTimeout(()=>{R()},1e3))}async function G(){let m={...D,id:P.value};const r=new FormData;Object.keys(m).forEach(_=>{[null,void 0,""].includes(m[_])||r.append(_,m[_])});const[o,y]=await x.editPurchasedFund(r);!o&&y&&y.success&&(z.success("Edit successfully"),setTimeout(()=>{R()},1e3))}async function W(){var y,_,s,p;let m={id:P.value};const[r,o]=await x.queryPurchasedFundById(m);!r&&o&&(console.log(o.data),N.value=o.data,D.transactionDate=H((y=o.data)==null?void 0:y.transactionDate).format("YYYY-MM-DD")||"",D.purchasedAmount=((_=o.data)==null?void 0:_.purchasedAmount)||"",D.unitCertificateDate=H((s=o.data)==null?void 0:s.unitCertificateDate).format("YYYY-MM-DD")||"",D.purchaseEndDate=H((p=o.data)==null?void 0:p.purchaseEndDate).format("YYYY-MM-DD")||"")}return(m,r)=>{const o=fe,y=ve,_=we,s=he,p=Ce,S=Xe,k=Ye,Y=Ie,O=Ee;return A(),U(Z,null,[a("div",da,[a("div",ca,f(e(P)?"Edit Purchase":"Create Purchase"),1),a("div",null,[t(y,{type:"primary",color:"#4E9F1C",onClick:r[0]||(r[0]=h=>F(e(M)))},{default:l(()=>[v(f(e(P)?"Edit Purchase":"New Purchase")+" ",1),t(o,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})])]),a("div",ua,[t(k,{ref_key:"ruleFormRef",ref:M,model:e(D),rules:e(n),"label-width":"200px","status-icon":""},{default:l(()=>[t(_,{label:"Client",prop:"clientId"},{default:l(()=>{var h;return[v(f(((h=e(I))==null?void 0:h.clientName)||""),1)]}),_:1}),t(_,{label:"Fund",prop:"fundId"},{default:l(()=>{var h;return[v(f(((h=e(I))==null?void 0:h.fundName)||""),1)]}),_:1}),t(_,{label:"Entity Name",prop:"entityName"},{default:l(()=>{var h;return[v(f(((h=e(I))==null?void 0:h.entityName)||""),1)]}),_:1}),t(_,{label:"Transaction Date",prop:"transactionDate"},{default:l(()=>[t(s,{modelValue:e(D).transactionDate,"onUpdate:modelValue":r[1]||(r[1]=h=>e(D).transactionDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"Purchase Amount",prop:"purchasedAmount"},{default:l(()=>[t(p,{modelValue:e(D).purchasedAmount,"onUpdate:modelValue":r[2]||(r[2]=h=>e(D).purchasedAmount=h),type:"number"},null,8,["modelValue"])]),_:1}),t(_,{label:"U/C Date",prop:"unitCertificateDate"},{default:l(()=>[t(s,{modelValue:e(D).unitCertificateDate,"onUpdate:modelValue":r[3]||(r[3]=h=>e(D).unitCertificateDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"Purchase End Date",prop:"purchaseEndDate"},{default:l(()=>[t(s,{modelValue:e(D).purchaseEndDate,"onUpdate:modelValue":r[4]||(r[4]=h=>e(D).purchaseEndDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"Application form signed",prop:"applicationFormSigned"},{default:l(()=>[t(S,{"file-list":e(V),"onUpdate:fileList":r[5]||(r[5]=h=>X(V)?V.value=h:null),"auto-upload":!1,limit:1,"list-type":"text"},{trigger:l(()=>[t(y,{type:"primary"},{default:l(()=>[v("Choose file")]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"]),e(P)?(A(),U("div",ra,[ma,t(O,{data:e(N).dividendHistory,height:"240","row-style":{height:"30px"},"header-cell-style":{background:"#BE9670",color:"#fff"}},{default:l(()=>[t(Y,{prop:"dividendDate",label:"Interest Payment Date",align:"center"}),t(Y,{prop:"dividendAmount",label:"Interest Amount",align:"center"})]),_:1},8,["data"])])):le("",!0)])],64)}}}),_a=ye(pa,[["__scopeId","data-v-0b5a1580"]]),$=T=>(ke("data-v-6023764f"),T=T(),Ve(),T),fa={class:"detail"},va={class:"top"},ha={class:"left"},ya={class:"name"},ga=$(()=>a("div",{class:"kyc"},null,-1)),ba={class:"client-id"},Da={class:"info"},Ca={class:"flex"},wa={class:"text"},Ia=$(()=>a("div",{class:"sub"},"Email",-1)),Ea={class:"flex"},Ya={class:"text"},ka=$(()=>a("div",{class:"sub"},"Phone",-1)),Va={class:"right"},Aa={class:"item"},xa=$(()=>a("div",{class:"title"},"D.O.B",-1)),Pa={class:"num"},Ma={class:"text"},Na={class:"text"},$a={class:"item p-l-60"},Fa=$(()=>a("div",{class:"title"},"Client Type:",-1)),Sa={class:"num"},Ta={class:"text"},Ua={class:"text"},Ba={class:"text"},Ra={class:"text"},La={class:"text"},qa=$(()=>a("div",{class:"round1"},null,-1)),za=$(()=>a("div",{class:"round2"},null,-1)),Oa={class:"entity"},ja={class:"flex"},Ka=$(()=>a("div",{class:"name"},"Entity List",-1)),Ha={class:"sub-name"},Ga={class:"list"},Wa=["onClick"],Ja={class:"name"},Qa={class:"bhg-id"},Xa={class:"email"},Za={class:"address"},el=["onClick"],tl={key:0,class:"investment"},al={class:"flex"},ll={class:"name"},nl=["onClick"],ol={class:"sub-name"},sl={class:"scrollbar-flex-content"},il=["onClick"],dl={key:1,class:"table-flex"},cl={class:"left"},ul={class:"name"},rl={class:"text-cut"},ml={class:"tag"},pl=$(()=>a("div",{class:"sub-name"},"Total investment Amount",-1)),_l={class:"number"},fl=$(()=>a("div",{class:"sub-name"},"Total investment Return",-1)),vl={class:"number"},hl=$(()=>a("div",{class:"sub-name"},"Cumulative Expected Interest Amount",-1)),yl={class:"number"},gl={class:"right"},bl={class:"flex-between"},Dl=$(()=>a("div",{class:"name"},"Investment Record",-1)),Cl={class:"email-select"},wl=$(()=>a("div",{class:"title"},"Annual Statement",-1)),Il={class:"table"},El={class:"pointer"},Yl={class:"action"},kl=["onClick"],Vl=["onClick"],Al=$(()=>a("span",null,"Are you sure to delete this?",-1)),xl={class:"dialog-footer"},Pl={class:"purchase"},Ml=$(()=>a("div",{class:"title"},"Purchase record",-1)),Nl={class:"tool-box"},$l=$(()=>a("div",{class:"flex"},null,-1)),Fl={class:"flex"},Sl={class:"table"},Tl={class:"pointer"},Ul={class:"action"},Bl=["onClick"],Rl=["onClick"],Ll=["onClick"],ql=$(()=>a("span",null,"Are you sure to delete this?",-1)),zl={class:"dialog-footer"},Ol={class:"pagination"},jl=$(()=>a("div",null,null,-1)),Kl=pe({__name:"detail",setup(T){const{setBreadcrumbList:P}=Bt(),I=b(),R=b(!0),N=[{name:"add",component:We},{name:"edit",component:We},{name:"investment",component:sa},{name:"purchase",component:_a},{name:"editClient",component:ta}],V=b(null),M=b(null),D=Je(),n=b({}),F=b([]),B=b(0),G=b({}),W=b([{name:"Ongoing Investment",value:"On-Going"},{name:"Investment History",value:"Completed"}]),m=b([]),r=b(0),o=b(0),y=b(null),_=b([]),s=b([]),p=b(0),S=b(10),k=b(1),Y=b({}),O=b(null),h=b(!1),C=b(null);_e(async()=>{await J(),await L()});async function J(){R.value=!0;let i={id:D.currentRoute.value.params.id};const[d,c]=await x.queryClientDetailById(i);R.value=!1,!d&&c&&(console.log(c.data),n.value=(c==null?void 0:c.data)||{})}async function L(){var u;V.value=null,ce();let i={clientId:D.currentRoute.value.params.id};const[d,c]=await x.queryEntity(i);if(!d&&c){console.log("queryEntity",c.data);const j=((u=D.currentRoute.value.query)==null?void 0:u.eId)||"";F.value=(c==null?void 0:c.data)||[];const Q=F.value.findIndex(te=>te.id===Number(j));B.value=Q!==-1?Q:0,F.value.length>0&&K()}}async function K(){var j;let i={pageSize:1e3,pageNum:1};console.log("selectEntity",F.value);let d={investmentEntityId:F.value[B.value].id};const[c,u]=await x.queryInvestment(d,i);if(R.value=!1,!c&&u){console.log(u.data.list);let te=(((j=u.data)==null?void 0:j.list)||[]).filter(ie=>ie.status===W.value[r.value].value);m.value=te,te.length>0&&ee()}else console.log(c)}async function ee(){var j;let i={pageSize:1e3,pageNum:1},d={entityId:F.value[B.value].id,fundId:m.value[o.value].fundId};const[c,u]=await x.queryPurchasedFunds(d,i);!c&&u?(console.log("getPurchasedFundsByEn",u.data.list),_.value=((j=u.data)==null?void 0:j.list)||[]):console.log(c)}async function ce(){var j,Q;let i={pageSize:S.value,pageNum:k.value},d={clientId:n.value.id};const[c,u]=await x.queryPurchasedFunds(d,i);!c&&u?(console.log("getPurchasedFundsByClient",u.data.list),s.value=((j=u.data)==null?void 0:j.list)||[],p.value=((Q=u.data)==null?void 0:Q.total)||0):console.log(c)}const ue=()=>{var i;P([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Edit Client"}]),V.value=N.findIndex(d=>d.name==="editClient"),C.value=n.value.id,I.value.handleIsShow()},g=()=>{var i;P([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Entity"}]),V.value=N.findIndex(d=>d.name==="add"),M.value=null,I.value.handleIsShow()},et=i=>{B.value=i,K()},tt=i=>{var d;P([{name:`${(d=n.value)==null?void 0:d.name}`},{name:"Edit Entity"}]),V.value=N.findIndex(c=>c.name==="edit"),M.value=i.id,G.value=i,I.value.handleIsShow()},at=()=>{var i;P([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Investment"}]),V.value=N.findIndex(d=>d.name==="investment"),Y.value={clientId:n.value.id,fundId:"",entityId:F.value[B.value].id,clientName:n.value.name,fundName:"",entityName:F.value[B.value].entityName},I.value.handleIsShow()},lt=()=>{var i;P([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Purchase"}]),V.value=N.findIndex(d=>d.name==="purchase"),O.value=null,Y.value=m.value[o.value],I.value.handleIsShow()},nt=i=>{var d;P([{name:`${(d=n.value)==null?void 0:d.name}`},{name:"Edit Purchase record"}]),V.value=N.findIndex(c=>c.name==="purchase"),O.value=i.id,Y.value=m.value[o.value],I.value.handleIsShow()},ot=()=>{h.value=!0},xe=async i=>{const d={id:i.id},[c,u]=await x.delPurchasedFund(d);!c&&u&&(u.data&&z.success("delete success"),h.value=!1,await L())},st=async i=>{R.value=!0;let d={id:i.id};const[c,u]=await x.sendUnitCertificate(d);R.value=!1,!c&&u&&u!=null&&u.success&&z.success("send success")},it=async i=>{let d={id:i.id};const[c,u]=await x.exportUnitCertificate(d);!c&&u&&u!=null&&u.success&&(console.log(u==null?void 0:u.data),u!=null&&u.data&&window.open(u==null?void 0:u.data),z.success("send success"))},dt=()=>{I.value&&I.value.handleIsShow()},ct=i=>{r.value=i,K()},ut=async()=>{console.log(m.value[o.value]);let i={startDate:y.value,idList:m.value[o.value].pfId,templateType:2};Pe(i)},rt=async i=>{console.log(m.value[o.value]);let d={startDate:H(new Date).startOf("year").format("YYYY-MM-DD"),id:i.id,templateType:2};Pe(d)};async function Pe(i){const[d,c]=await x.sendMail(i);!d&&c&&z.success("send success")}const mt=async()=>{console.log(m.value[o.value]);let i={date:y.value,id:m.value[o.value].pfId[0],template:2};console.log(i),Me(i)},pt=async i=>{let d={date:H(new Date).startOf("year").format("YYYY-MM-DD"),id:i.id,template:2};Me(d)};async function Me(i){x.exportPdf(i).then(d=>{console.log(d),z.success("download success");const c=document.createElement("a");c.style.display="none";const u=H().format("YYYY-MM-DD");c.setAttribute("download",`investment-${u}.pdf`),c.setAttribute("href",window.URL.createObjectURL(new Blob([d]))),document.body.appendChild(c),c.click(),document.body.removeChild(c)})}const _t=i=>{o.value=i},ft=i=>{k.value=i,ce()};return re(ge,{func:dt}),re(Ae,{iId:O,info:Y}),re(Rt,{eId:M,clientInfo:n,entityInfo:G}),re(Ze,{cId:C}),(i,d)=>{var Fe,Se,Te,Ue,Be,Re,Le,qe,ze,Oe,je,Ke,He;const c=fe,u=ve,j=Yt,Q=kt,te=he,ie=Vt,q=Ie,Ne=Qe,$e=Ee,vt=Ut,ht=At,yt=xt;return A(),U(Z,null,[Et((A(),U("div",fa,[a("div",va,[a("div",ha,[a("div",null,[a("div",ya,[v(f((Fe=e(n))==null?void 0:Fe.name)+" ",1),ga]),a("div",ba,"Client ID : "+f((Se=e(n))==null?void 0:Se.id),1)]),a("div",{class:"edit",onClick:ue},"Edit Profile"),a("div",Da,[a("div",Ca,[t(c,{class:"icon-bg",size:"24",color:"#fff"},{default:l(()=>[t(e(Pt))]),_:1}),a("div",wa,[Ia,a("div",null,f((Te=e(n))==null?void 0:Te.email),1)])]),a("div",Ea,[t(c,{class:"icon-bg",size:"24",color:"#fff"},{default:l(()=>[t(e(Mt))]),_:1}),a("div",Ya,[ka,a("div",null,f((Ue=e(n))==null?void 0:Ue.mobile),1)])])])]),a("div",Va,[a("div",Aa,[xa,a("div",Pa,f(e(H)((Be=e(n))==null?void 0:Be.birth).format("YYYY.MM.DD")),1),a("div",Ma,[v("Target Amount: "),a("span",null,"$"+f(((Re=e(n))==null?void 0:Re.targetAmount)||0),1)]),a("div",Na,[v("Create at: "),a("span",null,f((Le=e(n))==null?void 0:Le.createAt),1)])]),a("div",$a,[Fa,a("div",Sa,f((qe=e(n))==null?void 0:qe.clientType),1),a("div",Ta,[v("BSB: "),a("span",null,f((ze=e(n))==null?void 0:ze.bsb),1)]),a("div",Ua,[v("Account Name: "),a("span",null,f((Oe=e(n))==null?void 0:Oe.accountName),1)]),a("div",Ba,[v("Account Number: "),a("span",null,f((je=e(n))==null?void 0:je.accountNumber),1)]),a("div",Ra,[v("Withheld Tax: "),a("span",null,f((Ke=e(n))==null?void 0:Ke.withheldTax),1)]),a("div",La,[v("TF Number: "),a("span",null,f((He=e(n))==null?void 0:He.tfNum),1)])])]),qa,za]),a("div",Oa,[a("div",ja,[a("div",null,[Ka,a("div",Ha,[v("You have "),a("span",null,f(e(F).length),1),v(" Entities")])]),a("div",null,[t(u,{type:"primary",color:"#4E9F1C",onClick:g},{default:l(()=>[v(" New Entity "),t(c,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})])]),a("div",Ga,[(A(!0),U(Z,null,me(e(F),(w,E)=>(A(),U("div",{class:De(E===e(B)?"item act":"item"),key:E,onClick:be=>et(E)},[a("div",Ja,f(w.entityName||"Entity Name"),1),a("div",Qa,"BHG ID: "+f(w.bhgId),1),a("div",Xa,f(w.emailList?w.emailList.join(","):""),1),a("div",Za,[t(c,null,{default:l(()=>[t(e(Nt))]),_:1}),v(f(w.addressLine),1)]),a("div",{class:"edit",onClick:$t(be=>tt(w),["stop"])},[t(c,{color:E===e(B)?"#fff":"#D9D9D9"},{default:l(()=>[t(e(Ft))]),_:2},1032,["color"])],8,el)],10,Wa))),128))])]),e(F).length>0?(A(),U("div",tl,[a("div",al,[a("div",null,[a("div",ll,[(A(!0),U(Z,null,me(e(W),(w,E)=>(A(),U("div",{class:De(e(r)===E?"line act":"line"),key:E,onClick:be=>ct(E)},f(w.name),11,nl))),128))]),a("div",ol,[v("You have "),a("span",null,f(e(m).length),1),v(" Investments")])]),a("div",null,[t(u,{type:"primary",color:"#4E9F1C",onClick:at},{default:l(()=>[v(" New Investment "),t(c,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})])]),e(m).length>0?(A(),ae(j,{key:0},{default:l(()=>[a("div",sl,[(A(!0),U(Z,null,me(e(m),(w,E)=>(A(),U("p",{key:E,class:De(e(o)===E?"scrollbar-item item-act":"scrollbar-item"),onClick:be=>_t(E)}," Investment "+f(E+1),11,il))),128))])]),_:1})):le("",!0),e(m).length>0?(A(),U("div",dl,[a("div",cl,[a("div",ul,[a("span",rl,f(e(m)[e(o)].fundName),1),a("span",ml,[t(Q,{class:"text-white",color:e(m)[e(o)].status==="On-Going"?"#4E9F1C":"#BE9670"},{default:l(()=>[v(f(e(m)[e(o)].status),1)]),_:1},8,["color"])])]),pl,a("div",_l,"$"+f(e(m)[e(o)].purchasedAmount||0),1),fl,a("div",vl,"$"+f(e(m)[e(o)].currentReturn||0),1),hl,a("div",yl,"$"+f(e(m)[e(o)].totalReturn||0),1)]),a("div",gl,[a("div",bl,[Dl,a("div",null,[t(ie,{placement:"bottom",width:255,trigger:"click"},{reference:l(()=>[t(u,{class:"text-white",type:"primary",color:"#42A0BE"},{default:l(()=>[v(" Annual Statement "),t(c,null,{default:l(()=>[t(e(St))]),_:1})]),_:1})]),default:l(()=>[a("div",Cl,[wl,t(te,{modelValue:e(y),"onUpdate:modelValue":d[0]||(d[0]=w=>X(y)?y.value=w:null),type:"year",placeholder:"Pick a year",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),a("div",null,[t(u,{class:"text-white m-tb-20",type:"primary",color:"#BE9670",onClick:ut},{default:l(()=>[v(" Send ")]),_:1}),t(u,{class:"text-white m-tb-20 m-l-10",type:"primary",color:"#42A0BE",onClick:mt},{default:l(()=>[v(" Download ")]),_:1})])])]),_:1})])]),a("div",Il,[t($e,{data:e(_),height:"240","row-style":{height:"30px"},"header-cell-style":{background:"#BE9670",color:"#fff"}},{default:l(()=>[t(q,{prop:"purchaseEndDate",label:"Payment Date",align:"center"}),t(q,{prop:"purchasedAmount",label:"Investment Amount",align:"center"},{default:l(w=>[a("span",null,"$"+f(w.row.purchasedAmount),1)]),_:1}),t(q,{prop:"currentTotalReturn",label:"Current Return",align:"center"},{default:l(w=>[a("span",null,"$"+f(w.row.currentTotalReturn),1)]),_:1}),t(q,{prop:"",label:"Action",align:"center"},{default:l(w=>[a("div",El,[t(ie,{placement:"bottom",width:170,trigger:"hover"},{reference:l(()=>[t(c,{size:30,color:"#969696"},{default:l(()=>[t(e(Ge))]),_:1})]),default:l(()=>[a("div",Yl,[a("div",{class:"item",onClick:E=>rt(w.row)},"Send",8,kl),a("div",{class:"item",onClick:E=>pt(w.row)},"Download",8,Vl),t(Ne,{modelValue:e(h),"onUpdate:modelValue":d[2]||(d[2]=E=>X(h)?h.value=E:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",xl,[t(u,{onClick:d[1]||(d[1]=E=>h.value=!1)},{default:l(()=>[v("Cancel")]),_:1}),t(u,{type:"primary",onClick:E=>xe(w.row)},{default:l(()=>[v(" Confirm ")]),_:2},1032,["onClick"])])]),default:l(()=>[Al]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])])])])):le("",!0)])):le("",!0),a("div",Pl,[Ml,a("div",Nl,[$l,a("div",Fl,[e(m).length>0?(A(),ae(u,{key:0,type:"primary",color:"#4E9F1C",onClick:lt},{default:l(()=>[v(" New purchase "),t(c,null,{default:l(()=>[t(e(ne))]),_:1})]),_:1})):le("",!0)])]),a("div",Sl,[e(s).length>0?(A(),ae($e,{key:0,data:e(s),height:"600","row-style":{height:"80px"}},{default:l(()=>[t(q,{prop:"id",label:"Purchase ID",align:"center",width:"150",fixed:"left"}),t(q,{prop:"unitCertificateDate",label:"U/C Date",align:"left",width:"150"}),t(q,{prop:"transactionDate",label:"Transaction Date",align:"left",width:"150"}),t(q,{prop:"purchaseEndDate",label:"Interest End Date",width:"200"}),t(q,{prop:"createAt",label:"Create At",width:"200"}),t(q,{prop:"purchasedAmount",label:"Purchase Amount",width:"200"}),t(q,{prop:"currentMonthReturn",label:"Current Month Return",width:"200"}),t(q,{prop:"currentTotalReturn",label:"Current Total Return",width:"200"}),t(q,{prop:"",label:"Action",align:"center",fixed:"right"},{default:l(w=>[a("div",Tl,[t(ie,{placement:"bottom",width:170,trigger:"hover"},{reference:l(()=>[t(c,{size:30,color:"#969696"},{default:l(()=>[t(e(Ge))]),_:1})]),default:l(()=>[a("div",Ul,[a("div",{class:"item",onClick:E=>nt(w.row)},"Edit",8,Bl),a("div",{class:"item",onClick:ot},"Delete"),a("div",{class:"item",onClick:E=>st(w.row)},"Send",8,Rl),a("div",{class:"item",onClick:E=>it(w.row)},"Download",8,Ll),t(Ne,{modelValue:e(h),"onUpdate:modelValue":d[4]||(d[4]=E=>X(h)?h.value=E:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",zl,[t(u,{onClick:d[3]||(d[3]=E=>h.value=!1)},{default:l(()=>[v("Cancel")]),_:1}),t(u,{type:"primary",onClick:E=>xe(w.row)},{default:l(()=>[v(" Confirm ")]),_:2},1032,["onClick"])])]),default:l(()=>[ql]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(A(),ae(vt,{key:1,"image-size":200}))]),a("div",Ol,[jl,t(ht,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:e(p),"page-size":e(S),"onUpdate:pageSize":d[5]||(d[5]=w=>X(S)?S.value=w:null),"current-page":e(k),"onUpdate:currentPage":d[6]||(d[6]=w=>X(k)?k.value=w:null),onCurrentChange:ft},null,8,["total","page-size","current-page"])])])])),[[yt,e(R)]]),t(e(gt),{ref_key:"rightPanel",ref:I,onBackFn:L},{content:l(()=>[e(V)!==null?(A(),ae(Tt(N[e(V)].component),{key:0})):le("",!0)]),_:1},512)],64)}}});const pn=ye(Kl,[["__scopeId","data-v-6023764f"]]);export{pn as default};
