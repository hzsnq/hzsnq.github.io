/* empty css             *//* empty css                     */import{u as w}from"./useUser-5be204e9.js";import{a as h}from"./index-a2e47a3c.js";import{d as x,u as v,a as y,r as b,C as F,b as k,g as E,i as c,e as t,w as m,f as o,D as I,G as V,v as R,x as B,H as C,I as L,J as S,K as U,k as K,L as N,M as z,N as D,_ as q}from"./index-7e5bc782.js";import{_ as H}from"./bhg-logo-5b729188.js";const M=i=>(R("data-v-3bdb8fec"),i=i(),B(),i),P={class:"login-container"},A={class:"login-card"},G=M(()=>c("div",{class:"title"},[c("img",{src:H})],-1)),J={class:"content"},T=x({__name:"index",setup(i){const p=v(),f=y(),u=b(),{setUserInfo:g}=w(),e=F({loading:!1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"please enter user name",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"}]},handleLogin:()=>{u.value.validate(async _=>{if(_){e.loading=!0;const r={adminUserEmail:e.loginForm.username,password:e.loginForm.password},[n,s]=await h.userLogin(r);if(!n&&s)if(s!=null&&s.success){let d={token:s.data.token,roles:["superAdmin"],adminEmail:s.data.adminEmail};g(d),e.loading=!1;try{const a=d.roles;p.setRoutes(a),p.dynamicRoutes.forEach(l=>{C.addRoute(l)})}catch(a){console.log(a)}f.push({path:"/"}).catch(a=>{console.warn(a)})}else e.loading=!1;else console.log(n)}else return!1})}});return(_,r)=>{const n=N,s=z,d=D,a=V;return k(),E("div",P,[c("div",A,[G,c("div",J,[t(a,{ref_key:"loginFormDom",ref:u,model:o(e).loginForm,rules:o(e).loginRules,onKeyup:I(o(e).handleLogin,["enter"])},{default:m(()=>[t(s,{prop:"username"},{default:m(()=>[t(n,{modelValue:o(e).loginForm.username,"onUpdate:modelValue":r[0]||(r[0]=l=>o(e).loginForm.username=l),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":o(L),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(s,{prop:"password"},{default:m(()=>[t(n,{modelValue:o(e).loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=l=>o(e).loginForm.password=l),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":o(S),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{loading:o(e).loading,type:"primary",size:"large",color:"#BE9670",onClick:U(o(e).handleLogin,["prevent"])},{default:m(()=>[K(" 登 录 ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules","onKeyup"])])])])}}});const Y=q(T,[["__scopeId","data-v-3bdb8fec"]]);export{Y as default};
