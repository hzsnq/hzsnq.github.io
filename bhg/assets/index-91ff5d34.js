/* empty css             *//* empty css                     */import{u as b}from"./useUser-6c5288a9.js";/* empty css                 */import{d as v,u as F,a as y,r as k,C as E,b as I,g as V,i as c,e as t,w as p,f as s,D as A,G as L,v as R,x as S,H as B,I as C,J as U,K,k as N,L as z,M as D,N as q,_ as H}from"./index-5b70a67c.js";import{_ as M}from"./bhg-logo-5b729188.js";import{a as O}from"./index-4a2da8ba.js";const P=d=>(R("data-v-bbdd8008"),d=d(),S(),d),G={class:"login-container"},J={class:"login-card"},T=P(()=>c("div",{class:"title"},[c("img",{src:M})],-1)),W={class:"content"},$=v({__name:"index",setup(d){const _=F(),w=y(),g=k(),{setUserInfo:h}=b();let r=[];r["Super Admin"]="superAdmin",r["Fund Admin"]="fundAdmin",r["Fund Operation"]="fundOperation",r["Web Admin"]="webAdmin";const e=E({loading:!1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"please enter user name",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"}]},handleLogin:()=>{g.value.validate(async f=>{var a;if(f){e.loading=!0;const m={adminUserEmail:e.loginForm.username,password:e.loginForm.password},[l,o]=await O.userLogin(m);if(!l&&o)if(o!=null&&o.success){const u=(a=o==null?void 0:o.data)!=null&&a.roles?[r[o==null?void 0:o.data.roles[0]]]:[];let n={token:o.data.token,roles:u,adminEmail:o.data.adminEmail};h(n),e.loading=!1;try{const i=n.roles;_.setRoutes(i),_.dynamicRoutes.forEach(x=>{B.addRoute(x)})}catch(i){console.log(i)}w.push({path:u[0]==="webAdmin"?"/investment":"/"}).catch(i=>{console.warn(i)})}else e.loading=!1;else console.log(l)}else return!1})}});return(f,a)=>{const m=z,l=D,o=q,u=L;return I(),V("div",G,[c("div",J,[T,c("div",W,[t(u,{ref_key:"loginFormDom",ref:g,model:s(e).loginForm,rules:s(e).loginRules,onKeyup:A(s(e).handleLogin,["enter"])},{default:p(()=>[t(l,{prop:"username"},{default:p(()=>[t(m,{modelValue:s(e).loginForm.username,"onUpdate:modelValue":a[0]||(a[0]=n=>s(e).loginForm.username=n),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":s(C),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(l,{prop:"password"},{default:p(()=>[t(m,{modelValue:s(e).loginForm.password,"onUpdate:modelValue":a[1]||(a[1]=n=>s(e).loginForm.password=n),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":s(U),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),t(o,{loading:s(e).loading,type:"primary",size:"large",color:"#BE9670",onClick:K(s(e).handleLogin,["prevent"])},{default:p(()=>[N(" 登 录 ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules","onKeyup"])])])])}}});const se=H($,[["__scopeId","data-v-bbdd8008"]]);export{se as default};
