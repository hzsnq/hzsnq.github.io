/* empty css             *//* empty css                   *//* empty css                 */import{a as x}from"./index-a2e47a3c.js";/* empty css                   */import{P as ne}from"./index-a6d3aa60.js";import{i as W,_ as he}from"./el-descriptions-item-8a46a78a.js";import"./useUser-5be204e9.js";import{d as G,o as Q,r as _,C as le,b as E,g as $,i as s,t as v,f as l,e,w as t,k as m,X as oe,F as M,h as se,c as q,Y as z,E as re,N as ie,L as de,M as Ee,Z as ce,$ as ue,G as ye,_ as X,a0 as Ce,a1 as Re,v as pe,x as me,a2 as ae,a3 as Ie,Q as N,S as Pe,T as Ve,a4 as xe,a5 as Se,a6 as ke,j as Ae,l as Ue,R as Te,a7 as $e,W as De,U as Fe}from"./index-7e5bc782.js";import{u as Ne}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-565d1b4a.js";/* empty css                     */import{i as Me}from"./validate-add6ff74.js";const Z=Symbol("referral"),Be={class:"pop-top"},Le={class:"title"},qe={class:"form"},ze=G({__name:"CreatOrEditReferral",setup(w){const{rId:g}=W(Z),{func:d}=W(ne);Q(()=>{B(),g.value&&k()});const V=_([]),h=_(),i=le({adminUserEmail:"",roleId:null,password:"asdf1234",password2:"asdf1234"}),a=le({adminUserEmail:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(u,n,o)=>{n===""?o(new Error("Please input Email")):Me(n)?o():o(new Error("Email format is incorrect!"))},trigger:"blur"}],roleId:[{required:!0,message:"Please select Role",trigger:"change"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(u,n,o)=>{n===""?o(new Error("Please input the Password again")):n!==i.password?o(new Error("Two inputs don't match!")):o()},trigger:"blur"}]}),D=async u=>{u&&await u.validate((n,o)=>{n?(console.log("submit!"),g.value?C():S()):(z.error("Please enter correct content!"),console.log("error submit!",o))})};async function B(){let u={};const[n,o]=await x.queryRoles(u);!n&&o&&(V.value=(o==null?void 0:o.data)||[])}async function S(){let u=i;const[n,o]=await x.createAdminUser(u);!n&&o&&o.success&&(z.success("Created successfully"),setTimeout(()=>{d()},1e3))}async function C(){let u={...i,id:g.value};const[n,o]=await x.editAdmin(u);!n&&o&&o.success&&(z.success("Edit successfully"),setTimeout(()=>{d()},1e3))}async function k(){let u={id:g.value};const[n,o]=await x.queryReferralByIdWhenEdit(u);!n&&o&&console.log(o.data)}return(u,n)=>{const o=re,Y=ie,F=de,A=Ee,O=ce,j=ue,K=ye;return E(),$(M,null,[s("div",Be,[s("div",Le,v(l(g)?"Edit Client":"Create Client"),1),s("div",null,[e(Y,{type:"primary",color:"#4E9F1C",onClick:n[0]||(n[0]=f=>D(l(h)))},{default:t(()=>[m(v(l(g)?"Edit Client":"New Client")+" ",1),e(o,null,{default:t(()=>[e(l(oe))]),_:1})]),_:1})])]),s("div",qe,[e(K,{ref_key:"ruleFormRef",ref:h,model:l(i),rules:l(a),"label-width":"200px","status-icon":""},{default:t(()=>[e(A,{label:"Email",prop:"adminUserEmail"},{default:t(()=>[e(F,{modelValue:l(i).adminUserEmail,"onUpdate:modelValue":n[1]||(n[1]=f=>l(i).adminUserEmail=f)},null,8,["modelValue"])]),_:1}),e(A,{label:"Role",prop:"roleId"},{default:t(()=>[e(j,{modelValue:l(i).roleId,"onUpdate:modelValue":n[2]||(n[2]=f=>l(i).roleId=f),placeholder:"Select Role"},{default:t(()=>[(E(!0),$(M,null,se(l(V),(f,J)=>(E(),q(O,{label:f.roleName,value:f.id,key:J},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(A,{label:"Password",prop:"password"},{default:t(()=>[e(F,{modelValue:l(i).password,"onUpdate:modelValue":n[3]||(n[3]=f=>l(i).password=f),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(A,{label:"Password confirmation",prop:"password2"},{default:t(()=>[e(F,{modelValue:l(i).password2,"onUpdate:modelValue":n[4]||(n[4]=f=>l(i).password2=f),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])],64)}}});const te=X(ze,[["__scopeId","data-v-fc64fc1a"]]),Ye=w=>(pe("data-v-ad3cc008"),w=w(),me(),w),Oe=Ye(()=>s("div",{class:"pop-top"},[s("div",{class:"title"},"View Client"),s("div")],-1)),je={class:"form"},Ke=G({__name:"ViewReferral",setup(w){const{rId:g}=W(Z),d=_({});Q(()=>{V()});async function V(){let h={id:g.value};const[i,c]=await x.queryReferralById(h);!i&&c&&(console.log(c.data),d.value=(c==null?void 0:c.data)||{})}return(h,i)=>{const c=Ce,y=Re;return E(),$(M,null,[Oe,s("div",je,[e(y,{column:1,border:""},{default:t(()=>[e(c,{label:"ID","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v((a=l(d))==null?void 0:a.id),1)]}),_:1}),e(c,{label:"Name","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v((a=l(d))==null?void 0:a.name),1)]}),_:1}),e(c,{label:"Message","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.message)||"EMPTY"),1)]}),_:1}),e(c,{label:"Email","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v((a=l(d))==null?void 0:a.email),1)]}),_:1}),e(c,{label:"Create at","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v((a=l(d))==null?void 0:a.createAt),1)]}),_:1}),e(c,{label:"Update At","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.updateAt)||"EMPTY"),1)]}),_:1}),e(c,{label:"Phone","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.phone)||"EMPTY"),1)]}),_:1}),e(c,{label:"Interest","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.interest)||"EMPTY"),1)]}),_:1}),e(c,{label:"Suburb","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.suburb)||"EMPTY"),1)]}),_:1}),e(c,{label:"State","label-align":"center",align:"center"},{default:t(()=>{var a;return[m(v(((a=l(d))==null?void 0:a.state)||"EMPTY"),1)]}),_:1})]),_:1})])],64)}}});const We=X(Ke,[["__scopeId","data-v-ad3cc008"]]),H=w=>(pe("data-v-c8604e00"),w=w(),me(),w),Ge={class:"referral"},Qe=H(()=>s("div",{class:"title"},"Referral List",-1)),Xe={class:"tool-box"},Ze={class:"flex"},He={class:"table"},Je={class:"table-name"},el={class:"pointer"},ll={class:"action"},al=["onClick"],tl=["onClick"],nl=H(()=>s("span",null,"Are you sure to delete this?",-1)),ol={class:"dialog-footer"},sl={class:"pagination"},rl=H(()=>s("div",null,null,-1)),il=G({__name:"index",setup(w){const{setBreadcrumbList:g}=Ne(),d=_(),V=_(!0),h=[{name:"view",component:We},{name:"add",component:te},{name:"edit",component:te}],i=_(null),c=[{value:0,label:"Referral",name:"Referral"},{value:1,label:"Investment type",name:"investment"},{value:2,label:"Product type",name:"product"}],y=_(null),a=_(""),D=_([]),B=_(0),S=_(10),C=_(1),k=_(null),u=_(!1);Q(()=>{n()});async function n(){var L,P;i.value=null;let b={pageSize:S.value,pageNum:C.value},r={};y.value!==null&&(r={[c[y.value].name]:a.value});const[U,R]=await x.queryReferral(r,b);V.value=!1,!U&&R?(console.log(R.data),B.value=((L=R.data)==null?void 0:L.total)||0,D.value=((P=R.data)==null?void 0:P.list)||[]):console.log(U)}const o=b=>{C.value=b,n()},Y=()=>{y.value=null,a.value="",C.value=1,n()},F=()=>{C.value=1,n()},A=()=>{g([{name:"Create Referral"}]),i.value=h.findIndex(b=>b.name==="add"),k.value=null,d.value.handleIsShow()},O=b=>{g([{name:"View Referral"}]),i.value=h.findIndex(r=>r.name==="view"),k.value=b.id,d.value.handleIsShow()},j=b=>{g([{name:"Edit Referral"}]),i.value=h.findIndex(r=>r.name==="edit"),k.value=b.id,d.value.handleIsShow()},K=()=>{u.value=!0},f=async b=>{const r={id:b.id},[U,R]=await x.delReferral(r);!U&&R&&(R.data&&z.success("delete success"),u.value=!1,n())};return ae(ne,{func:()=>{d.value&&d.value.handleIsShow()}}),ae(Z,{rId:k}),(b,r)=>{const U=ce,R=ue,L=de,P=ie,ee=re,I=Te,_e=$e,fe=De,ve=Pe,ge=Fe,be=Ve,we=xe;return E(),$(M,null,[Ie((E(),$("div",Ge,[Qe,s("div",Xe,[s("div",Ze,[e(R,{class:"select",modelValue:l(y),"onUpdate:modelValue":r[0]||(r[0]=p=>N(y)?y.value=p:null),clearable:"",placeholder:"Filter by"},{default:t(()=>[(E(),$(M,null,se(c,p=>e(U,{key:p.value,label:p.label,value:p.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(L,{modelValue:l(a),"onUpdate:modelValue":r[1]||(r[1]=p=>N(a)?a.value=p:null),class:"m-lr-20",placeholder:"Search","prefix-icon":l(Se),clearable:""},null,8,["modelValue","prefix-icon"]),e(P,{class:"text-white",type:"primary",color:"#BE9670",onClick:F},{default:t(()=>[m(" Search ")]),_:1}),e(P,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:Y},{default:t(()=>[m(" Clear ")]),_:1})]),s("div",null,[e(P,{type:"primary",color:"#4E9F1C",onClick:A},{default:t(()=>[m(" New Referral "),e(ee,null,{default:t(()=>[e(l(oe))]),_:1})]),_:1})])]),s("div",He,[l(D).length>0?(E(),q(ve,{key:0,data:l(D),height:"600","row-style":{height:"80px"}},{default:t(()=>[e(I,{prop:"id",label:"Referral ID",align:"center"}),e(I,{prop:"name",label:"Entity",align:"left"},{default:t(p=>[s("div",Je,[s("span",null,v(p.row.name),1)])]),_:1}),e(I,{prop:"clientName",label:"Client",align:"left"}),e(I,{prop:"fundName",label:"Fund"}),e(I,{prop:"commissionRate",label:"Commission Rate"}),e(I,{prop:"commissionAmount",label:"Commission Amount"}),e(I,{prop:"financingAmount",label:"Total Financing Amount"}),e(I,{prop:"createAt",label:"Create at"}),e(I,{prop:"",label:"Action",align:"center"},{default:t(p=>[s("div",el,[e(fe,{placement:"bottom",width:170,trigger:"hover"},{reference:t(()=>[e(ee,{size:30,color:"#969696"},{default:t(()=>[e(l(ke))]),_:1})]),default:t(()=>[s("div",ll,[s("div",{class:"item",onClick:T=>O(p.row)},"View",8,al),s("div",{class:"item",onClick:T=>j(p.row)},"Edit",8,tl),s("div",{class:"item",onClick:r[2]||(r[2]=T=>K())},"Delete"),e(_e,{modelValue:l(u),"onUpdate:modelValue":r[4]||(r[4]=T=>N(u)?u.value=T:null),title:"Message",width:"30%","align-center":""},{footer:t(()=>[s("span",ol,[e(P,{onClick:r[3]||(r[3]=T=>u.value=!1)},{default:t(()=>[m("Cancel")]),_:1}),e(P,{type:"primary",onClick:T=>f(p.row)},{default:t(()=>[m(" Confirm ")]),_:2},1032,["onClick"])])]),default:t(()=>[nl]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(E(),q(ge,{key:1,"image-size":200}))]),s("div",sl,[rl,e(be,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:l(B),"page-size":l(S),"onUpdate:pageSize":r[5]||(r[5]=p=>N(S)?S.value=p:null),"current-page":l(C),"onUpdate:currentPage":r[6]||(r[6]=p=>N(C)?C.value=p:null),onCurrentChange:o},null,8,["total","page-size","current-page"])])])),[[we,l(V)]]),e(l(he),{ref_key:"rightPanel",ref:d,onBackFn:n},{content:t(()=>[l(i)!==null?(E(),q(Ae(h[l(i)].component),{key:0})):Ue("",!0)]),_:1},512)],64)}}});const El=X(il,[["__scopeId","data-v-c8604e00"]]);export{El as default};
