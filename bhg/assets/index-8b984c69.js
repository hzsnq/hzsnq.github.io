import{a as R}from"./index-62d2fc31.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                   */import{d as O,r as i,o as H,b as p,g as h,i as c,F as A,h as Y,t as r,f as t,e as l,w as n,k as u,J as re,ak as pe,al as _e,Q as K,v as J,x as Q,_ as W,a4 as L,a5 as me,T as V,c as $,a2 as ve,N as fe,W as ge,X as be,a6 as he,a7 as ye,R as Ee,a8 as Ce,j as we,l as ke,a1 as Ie,V as Se,E as xe,$ as Ve,Y as Ae}from"./index-53be2c6b.js";import{u as X}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-05b22a52.js";import{i as F,_ as Te}from"./index-c38978f2.js";/* empty css                             */import{P as G}from"./index-e099722b.js";import"./useUser-a1bf5fc0.js";const Z=Symbol("audit"),Pe=m=>(J("data-v-2670bdf1"),m=m(),Q(),m),De={class:"pop-top"},$e={class:"title"},Be=Pe(()=>c("div",null,null,-1)),Me={class:"form"},Ye={class:"btn-group"},Ne=O({__name:"ViewAudit",setup(m){const{breadcrumbList:N}=X(),{aId:g}=F(Z),{func:C}=F(G),d=i({});H(()=>{w()});async function w(){let k={id:g.value};const[_,o]=await R.queryAuditById(k);!_&&o&&(console.log(o.data),d.value=(o==null?void 0:o.data)||{})}const T=async k=>{let _={id:g.value,status:k};const[o,v]=await R.editAudit(_);!o&&v&&(re.success("Change successfully"),setTimeout(()=>{C()},1e3))};return(k,_)=>{const o=pe,v=_e,f=K;return p(),h(A,null,[c("div",De,[c("div",$e,[(p(!0),h(A,null,Y(t(N),(e,P)=>(p(),h("span",{key:P},r(e.name),1))),128)),c("span",null," - ID:"+r(t(g)),1)]),Be]),c("div",Me,[l(v,{title:"Information Update",column:1,border:""},{default:n(()=>[l(o,{label:"ID","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r((e=t(d))==null?void 0:e.id),1)]}),_:1}),l(o,{label:"Name","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r((e=t(d))==null?void 0:e.name),1)]}),_:1}),l(o,{label:"Message","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.message)||"EMPTY"),1)]}),_:1}),l(o,{label:"Email","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r((e=t(d))==null?void 0:e.email),1)]}),_:1}),l(o,{label:"Create at","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r((e=t(d))==null?void 0:e.createAt),1)]}),_:1}),l(o,{label:"Update At","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.updateAt)||"EMPTY"),1)]}),_:1}),l(o,{label:"Phone","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.phone)||"EMPTY"),1)]}),_:1}),l(o,{label:"Interest","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.interest)||"EMPTY"),1)]}),_:1}),l(o,{label:"Suburb","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.suburb)||"EMPTY"),1)]}),_:1}),l(o,{label:"State","label-align":"center",align:"center"},{default:n(()=>{var e;return[u(r(((e=t(d))==null?void 0:e.state)||"EMPTY"),1)]}),_:1})]),_:1})]),c("div",Ye,[l(f,{color:"#4E9F1C",onClick:_[0]||(_[0]=e=>T("Approved"))},{default:n(()=>[u("Approve")]),_:1}),l(f,{color:"#DC0000",onClick:_[1]||(_[1]=e=>T("Rejected"))},{default:n(()=>[u("Reject")]),_:1}),l(f,{class:"text-white",color:"#BDBDBD",onClick:t(C)},{default:n(()=>[u("Cancel")]),_:1},8,["onClick"])])],64)}}});const Re=W(Ne,[["__scopeId","data-v-2670bdf1"]]),U=m=>(J("data-v-e2474bf2"),m=m(),Q(),m),Ue={class:"audit"},ze=U(()=>c("div",{class:"title"},"Audit List",-1)),je={class:"tool-box"},qe={class:"flex"},Le=U(()=>c("div",null,null,-1)),Fe={class:"table"},Oe={class:"pointer"},He={class:"action"},Ke=["onClick"],Je={class:"pagination"},Qe=U(()=>c("div",null,null,-1)),We=O({__name:"index",setup(m){const{setBreadcrumbList:N}=X(),g=i(),C=i(!0),d=[{name:"view",component:Re}],w=i(null),T=[{value:0,label:"Email",name:"creatorName"}],k=i([{code:"Client Update"},{code:"Re-Investment request"},{code:"Entity Update"}]),_=i([{code:"Approved"},{code:"Rejected"},{code:"Pending approval"}]),o=i(null),v=i(null),f=i(null),e=i(""),P=i([]),z=i(0),B=i(10),y=i(1),j=i(null);H(()=>{I()});async function I(){var M,D;w.value=null;let E={pageSize:B.value,pageNum:y.value},s={};o.value!==null&&(s={[T[o.value].name]:e.value}),f.value!==null&&(s={...s,status:f.value}),v.value!==null&&(s={...s,auditType:v.value}),C.value=!1;const[S,b]=await R.queryAudit(s,E);C.value=!1,!S&&b?(console.log(b.data.list),z.value=((M=b.data)==null?void 0:M.total)||0,P.value=((D=b.data)==null?void 0:D.list)||[]):console.log(S)}const ee=E=>{y.value=E,I()},le=()=>{o.value=null,e.value="",y.value=1,I()},te=()=>{y.value=1,I()},ae=async E=>{N([{name:`${E.auditType} Request`}]),w.value=d.findIndex(s=>s.name==="view"),j.value=E.id,g.value.handleIsShow()},ne=()=>{g.value&&g.value.handleIsShow()},q=()=>{I()};return L(G,{func:ne}),L(Z,{aId:j}),(E,s)=>{const S=Ie,b=ve,M=fe,D=K,x=Se,oe=xe,se=Ve,ce=ge,ie=Ae,ue=be,de=he;return p(),h(A,null,[me((p(),h("div",Ue,[ze,c("div",je,[c("div",qe,[l(b,{class:"select",modelValue:t(o),"onUpdate:modelValue":s[0]||(s[0]=a=>V(o)?o.value=a:null),clearable:"",placeholder:"Filter by"},{default:n(()=>[(p(),h(A,null,Y(T,a=>l(S,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(M,{modelValue:t(e),"onUpdate:modelValue":s[1]||(s[1]=a=>V(e)?e.value=a:null),class:"m-lr-20 width-200",placeholder:"Search","prefix-icon":t(ye),clearable:""},null,8,["modelValue","prefix-icon"]),l(D,{class:"text-white",type:"primary",color:"#BE9670",onClick:te},{default:n(()=>[u(" Search ")]),_:1}),l(D,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:le},{default:n(()=>[u(" Clear ")]),_:1}),l(b,{class:"select m-l-20",modelValue:t(v),"onUpdate:modelValue":s[2]||(s[2]=a=>V(v)?v.value=a:null),clearable:"",placeholder:"Type",onChange:q},{default:n(()=>[(p(!0),h(A,null,Y(t(k),a=>(p(),$(S,{key:a.code,label:a.code,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(b,{class:"select m-l-20",modelValue:t(f),"onUpdate:modelValue":s[3]||(s[3]=a=>V(f)?f.value=a:null),clearable:"",placeholder:"Status",onChange:q},{default:n(()=>[(p(!0),h(A,null,Y(t(_),a=>(p(),$(S,{key:a.code,label:a.code,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Le]),c("div",Fe,[t(P).length>0?(p(),$(ce,{key:0,data:t(P),height:"600","row-style":{height:"80px"}},{default:n(()=>[l(x,{prop:"id",label:"Request ID",align:"center"}),l(x,{prop:"auditType",label:"Type",align:"left"}),l(x,{prop:"creatorName",label:"Email",align:"left"}),l(x,{prop:"status",label:"Status"}),l(x,{prop:"updatedAt",label:"Request Time"},{default:n(a=>[c("span",null,r(t(Ee)(a.row.updatedAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),l(x,{prop:"",label:"Action",align:"center"},{default:n(a=>[c("div",Oe,[l(se,{placement:"bottom",width:170,trigger:"hover"},{reference:n(()=>[l(oe,{size:30,color:"#969696"},{default:n(()=>[l(t(Ce))]),_:1})]),default:n(()=>[c("div",He,[c("div",{class:"item",onClick:Xe=>ae(a.row)},"View",8,Ke)])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(p(),$(ie,{key:1,"image-size":200}))]),c("div",Je,[Qe,l(ue,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:t(z),"page-size":t(B),"onUpdate:pageSize":s[4]||(s[4]=a=>V(B)?B.value=a:null),"current-page":t(y),"onUpdate:currentPage":s[5]||(s[5]=a=>V(y)?y.value=a:null),onCurrentChange:ee},null,8,["total","page-size","current-page"])])])),[[de,t(C)]]),l(t(Te),{ref_key:"rightPanel",ref:g,onBackFn:I},{content:n(()=>[t(w)!==null?(p(),$(we(d[t(w)].component),{key:0})):ke("",!0)]),_:1},512)],64)}}});const ul=W(We,[["__scopeId","data-v-e2474bf2"]]);export{ul as default};
