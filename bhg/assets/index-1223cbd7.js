/* empty css             *//* empty css                   *//* empty css                 */import{a as x}from"./index-a2e47a3c.js";/* empty css                   */import{P as oe}from"./index-a6d3aa60.js";import{i as G,_ as ye}from"./el-descriptions-item-8a46a78a.js";import"./useUser-5be204e9.js";import{d as X,o as Z,r as m,C as te,b as C,g as T,i,t as g,f as l,e,w as a,k as _,X as se,F as R,h as Q,c as L,Y,E as ie,N as re,L as de,M as Ee,Z as ue,$ as ce,G as Ie,_ as H,a0 as Ve,a1 as Pe,v as pe,x as me,a2 as ae,a3 as xe,Q as A,S as Se,T as ke,a4 as Te,a5 as Ue,a6 as De,j as $e,l as Ae,R as Re,a7 as Fe,W as Me,U as qe}from"./index-7e5bc782.js";import{u as Be}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-565d1b4a.js";/* empty css                     */import{i as Le}from"./validate-add6ff74.js";const J=Symbol("client"),Ne={class:"pop-top"},ze={class:"title"},Ye={class:"form"},Oe=X({__name:"CreatOrEditClient",setup(h){const{cId:b}=G(J),{func:u}=G(oe);Z(()=>{k(),b.value&&U()});const S=m([]),y=m(),d=te({adminUserEmail:"",roleId:null,password:"asdf1234",password2:"asdf1234"}),t=te({adminUserEmail:[{required:!0,message:"Please input Email",trigger:"blur"},{validator:(c,o,n)=>{o===""?n(new Error("Please input Email")):Le(o)?n():n(new Error("Email format is incorrect!"))},trigger:"blur"}],roleId:[{required:!0,message:"Please select Role",trigger:"change"}],password:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"}],password2:[{required:!0,message:"Please input Password",trigger:"blur"},{min:8,max:16,message:"Length should be 8 to 16",trigger:"blur"},{validator:(c,o,n)=>{o===""?n(new Error("Please input the Password again")):o!==d.password?n(new Error("Two inputs don't match!")):n()},trigger:"blur"}]}),M=async c=>{c&&await c.validate((o,n)=>{o?(console.log("submit!"),b.value?N():q()):(Y.error("Please enter correct content!"),console.log("error submit!",n))})};async function k(){let c={};const[o,n]=await x.queryRoles(c);!o&&n&&(S.value=(n==null?void 0:n.data)||[])}async function q(){let c=d;const[o,n]=await x.createAdminUser(c);!o&&n&&n.success&&(Y.success("Created successfully"),setTimeout(()=>{u()},1e3))}async function N(){let c={...d,id:b.value};const[o,n]=await x.editAdmin(c);!o&&n&&n.success&&(Y.success("Edit successfully"),setTimeout(()=>{u()},1e3))}async function U(){let c={id:b.value};const[o,n]=await x.queryFundByIdWhenEdit(c);!o&&n&&console.log(n.data)}return(c,o)=>{const n=ie,V=re,B=de,D=Ee,O=ue,j=ce,K=Ie;return C(),T(R,null,[i("div",Ne,[i("div",ze,g(l(b)?"Edit Client":"Create Client"),1),i("div",null,[e(V,{type:"primary",color:"#4E9F1C",onClick:o[0]||(o[0]=v=>M(l(y)))},{default:a(()=>[_(g(l(b)?"Edit Client":"New Client")+" ",1),e(n,null,{default:a(()=>[e(l(se))]),_:1})]),_:1})])]),i("div",Ye,[e(K,{ref_key:"ruleFormRef",ref:y,model:l(d),rules:l(t),"label-width":"200px","status-icon":""},{default:a(()=>[e(D,{label:"Email",prop:"adminUserEmail"},{default:a(()=>[e(B,{modelValue:l(d).adminUserEmail,"onUpdate:modelValue":o[1]||(o[1]=v=>l(d).adminUserEmail=v)},null,8,["modelValue"])]),_:1}),e(D,{label:"Role",prop:"roleId"},{default:a(()=>[e(j,{modelValue:l(d).roleId,"onUpdate:modelValue":o[2]||(o[2]=v=>l(d).roleId=v),placeholder:"Select Role"},{default:a(()=>[(C(!0),T(R,null,Q(l(S),(v,W)=>(C(),L(O,{label:v.roleName,value:v.id,key:W},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(D,{label:"Password",prop:"password"},{default:a(()=>[e(B,{modelValue:l(d).password,"onUpdate:modelValue":o[3]||(o[3]=v=>l(d).password=v),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1}),e(D,{label:"Password confirmation",prop:"password2"},{default:a(()=>[e(B,{modelValue:l(d).password2,"onUpdate:modelValue":o[4]||(o[4]=v=>l(d).password2=v),type:"password",placeholder:"Please input password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])],64)}}});const ne=H(Oe,[["__scopeId","data-v-d3da5785"]]),je=h=>(pe("data-v-7fdf59e7"),h=h(),me(),h),Ke=je(()=>i("div",{class:"pop-top"},[i("div",{class:"title"},"View Client"),i("div")],-1)),We={class:"form"},Ge=X({__name:"ViewClient",setup(h){const{cId:b}=G(J),u=m({});Z(()=>{S()});async function S(){let y={id:b.value};const[d,p]=await x.queryClientDetailById(y);!d&&p&&(console.log(p.data),u.value=(p==null?void 0:p.data)||{})}return(y,d)=>{const p=Ve,F=Pe;return C(),T(R,null,[Ke,i("div",We,[e(F,{column:1,border:""},{default:a(()=>[e(p,{label:"ID","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g((t=l(u))==null?void 0:t.id),1)]}),_:1}),e(p,{label:"Name","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g((t=l(u))==null?void 0:t.name),1)]}),_:1}),e(p,{label:"Message","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.message)||"EMPTY"),1)]}),_:1}),e(p,{label:"Email","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g((t=l(u))==null?void 0:t.email),1)]}),_:1}),e(p,{label:"Create at","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g((t=l(u))==null?void 0:t.createAt),1)]}),_:1}),e(p,{label:"Update At","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.updateAt)||"EMPTY"),1)]}),_:1}),e(p,{label:"Phone","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.phone)||"EMPTY"),1)]}),_:1}),e(p,{label:"Interest","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.interest)||"EMPTY"),1)]}),_:1}),e(p,{label:"Suburb","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.suburb)||"EMPTY"),1)]}),_:1}),e(p,{label:"State","label-align":"center",align:"center"},{default:a(()=>{var t;return[_(g(((t=l(u))==null?void 0:t.state)||"EMPTY"),1)]}),_:1})]),_:1})])],64)}}});const Qe=H(Ge,[["__scopeId","data-v-7fdf59e7"]]),ee=h=>(pe("data-v-302014f7"),h=h(),me(),h),Xe={class:"client"},Ze=ee(()=>i("div",{class:"title"},"Client List",-1)),He={class:"tool-box"},Je={class:"flex"},el={class:"table"},ll={class:"table-name"},tl={class:"pointer"},al={class:"action"},nl=["onClick"],ol=["onClick"],sl=ee(()=>i("span",null,"Are you sure to delete this?",-1)),il={class:"dialog-footer"},rl={class:"pagination"},dl=ee(()=>i("div",null,null,-1)),ul=X({__name:"index",setup(h){const{setBreadcrumbList:b}=Be(),u=m(),S=m(!0),y=[{name:"view",component:Qe},{name:"add",component:ne},{name:"edit",component:ne}],d=m(null),p=[{value:0,label:"Client",name:"Client"},{value:1,label:"Investment type",name:"investment"},{value:2,label:"Product type",name:"product"}],F=m(),t=m(null),M=m(null),k=m(""),q=m([]),N=m(0),U=m(10),c=m(1),o=m(null),n=m(!1);Z(()=>{V(),B()});async function V(){var z,P;d.value=null;let f={pageSize:U.value,pageNum:c.value},s={};t.value!==null&&(s={[p[t.value].name]:k.value});const[w,E]=await x.queryClients(s,f);S.value=!1,!w&&E?(console.log(E.data),N.value=((z=E.data)==null?void 0:z.total)||0,q.value=((P=E.data)==null?void 0:P.list)||[]):console.log(w)}async function B(){let f={type:"language"};const[s,w]=await x.queryDictionary(f);!s&&w?F.value=(w==null?void 0:w.data)||[]:console.log(s)}const D=f=>{c.value=f,V()},O=()=>{t.value=null,k.value="",c.value=1,V()},j=()=>{c.value=1,V()},K=()=>{b([{name:"Create Client"}]),d.value=y.findIndex(f=>f.name==="add"),o.value=null,u.value.handleIsShow()},v=f=>{b([{name:"View Client"}]),d.value=y.findIndex(s=>s.name==="view"),o.value=f.id,u.value.handleIsShow()},W=f=>{b([{name:"Edit Client"}]),d.value=y.findIndex(s=>s.name==="edit"),o.value=f.id,u.value.handleIsShow()},_e=()=>{n.value=!0},fe=async f=>{const s={id:f.id},[w,E]=await x.delClient(s);!w&&E&&(E.data&&Y.success("delete success"),n.value=!1,V())};return ae(oe,{func:()=>{u.value&&u.value.handleIsShow()}}),ae(J,{cId:o}),(f,s)=>{const w=ue,E=ce,z=de,P=re,le=ie,I=Re,ve=Fe,ge=Me,be=Se,we=qe,Ce=ke,he=Te;return C(),T(R,null,[xe((C(),T("div",Xe,[Ze,i("div",He,[i("div",Je,[e(E,{class:"select",modelValue:l(t),"onUpdate:modelValue":s[0]||(s[0]=r=>A(t)?t.value=r:null),clearable:"",placeholder:"Filter by"},{default:a(()=>[(C(),T(R,null,Q(p,r=>e(w,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(z,{modelValue:l(k),"onUpdate:modelValue":s[1]||(s[1]=r=>A(k)?k.value=r:null),class:"m-lr-20",placeholder:"Search","prefix-icon":l(Ue),clearable:""},null,8,["modelValue","prefix-icon"]),e(P,{class:"text-white",type:"primary",color:"#BE9670",onClick:j},{default:a(()=>[_(" Search ")]),_:1}),e(P,{class:"text-828282",type:"primary",color:"#E8E8E8",onClick:O},{default:a(()=>[_(" Clear ")]),_:1}),e(E,{class:"select-250 m-l-20",modelValue:l(M),"onUpdate:modelValue":s[2]||(s[2]=r=>A(M)?M.value=r:null),clearable:"",placeholder:"Client type"},{default:a(()=>[(C(!0),T(R,null,Q(l(F),r=>(C(),L(w,{key:r.value,label:r.code,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),i("div",null,[e(P,{type:"primary",color:"#4E9F1C",onClick:K},{default:a(()=>[_(" New Client "),e(le,null,{default:a(()=>[e(l(se))]),_:1})]),_:1})])]),i("div",el,[l(q).length>0?(C(),L(be,{key:0,data:l(q),height:"600","row-style":{height:"80px"}},{default:a(()=>[e(I,{prop:"id",label:"Client ID",align:"center"}),e(I,{prop:"name",label:"Client",align:"left"},{default:a(r=>[i("div",ll,[i("span",null,g(r.row.name),1)])]),_:1}),e(I,{prop:"birth",label:"Birth",align:"left"}),e(I,{prop:"email",label:"Email"}),e(I,{prop:"mobile",label:"Mobile"}),e(I,{prop:"clientType",label:"Client Type"}),e(I,{prop:"",label:"Total Investment Amount"}),e(I,{prop:"",label:"Pervious Month Investment Return (End of month)"}),e(I,{prop:"",label:"Total current Investment Return"}),e(I,{prop:"",label:"Action",align:"center"},{default:a(r=>[i("div",tl,[e(ge,{placement:"bottom",width:170,trigger:"hover"},{reference:a(()=>[e(le,{size:30,color:"#969696"},{default:a(()=>[e(l(De))]),_:1})]),default:a(()=>[i("div",al,[i("div",{class:"item",onClick:$=>v(r.row)},"View",8,nl),i("div",{class:"item",onClick:$=>W(r.row)},"Reset password",8,ol),i("div",{class:"item",onClick:s[3]||(s[3]=$=>_e())},"Delete"),e(ve,{modelValue:l(n),"onUpdate:modelValue":s[5]||(s[5]=$=>A(n)?n.value=$:null),title:"Message",width:"30%","align-center":""},{footer:a(()=>[i("span",il,[e(P,{onClick:s[4]||(s[4]=$=>n.value=!1)},{default:a(()=>[_("Cancel")]),_:1}),e(P,{type:"primary",onClick:$=>fe(r.row)},{default:a(()=>[_(" Confirm ")]),_:2},1032,["onClick"])])]),default:a(()=>[sl]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(C(),L(we,{key:1,"image-size":200}))]),i("div",rl,[dl,e(Ce,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:l(N),"page-size":l(U),"onUpdate:pageSize":s[6]||(s[6]=r=>A(U)?U.value=r:null),"current-page":l(c),"onUpdate:currentPage":s[7]||(s[7]=r=>A(c)?c.value=r:null),onCurrentChange:D},null,8,["total","page-size","current-page"])])])),[[he,l(S)]]),e(l(ye),{ref_key:"rightPanel",ref:u,onBackFn:V},{content:a(()=>[l(d)!==null?(C(),L($e(y[l(d)].component),{key:0})):Ae("",!0)]),_:1},512)],64)}}});const Il=H(ul,[["__scopeId","data-v-302014f7"]]);export{Il as default};
