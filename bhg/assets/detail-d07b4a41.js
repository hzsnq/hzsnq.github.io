import{a as P}from"./index-35b0e3a1.js";/* empty css                   *//* empty css                 *//* empty css                 *//* empty css                *//* empty css                  */import{i as ie,_ as Dt}from"./index-79b2cd3e.js";/* empty css                       */import{d as fe,a as Ze,o as ve,r as b,G as de,S as Q,b as w,h as x,j as a,t as v,g as e,f as t,e as l,l as _,a1 as se,U as te,F as ae,K as z,E as he,R as ye,O as Ie,P as Ee,V as ge,a4 as Ct,Q as wt,ab as Je,W as Ye,ac as It,X as ke,I as Ve,x as Ae,y as xe,_ as be,i as _e,c as ee,a2 as Et,a3 as Yt,ad as et,m as oe,a5 as pe,a6 as kt,a7 as H,q as Vt,ae as At,a0 as xt,Y as Pt,a8 as Nt,af as Mt,ag as Ft,T as we,ah as $t,N as St,ai as Tt,aj as Ut,aa as Qe,k as Bt,Z as Rt}from"./index-5a0eb1b1.js";import{u as Lt}from"./AppMain.vue_vue_type_style_index_0_scoped_41d4e859_lang-bdfc2e53.js";/* empty css                     *//* empty css                  */import{P as De}from"./index-e099722b.js";import{C as tt,E as qt}from"./CreatePurchase.vue_vue_type_style_index_0_scoped_0b5a1580_lang-dd48f447.js";/* empty css                        *//* empty css                */import{I as Pe,C as Xe}from"./investment-72547c18.js";/* empty css                    */import"./useUser-46e05e2c.js";const ce=U=>(Ae("data-v-b778bac1"),U=U(),xe(),U),zt={class:"pop-top"},Ot=ce(()=>a("div",{class:"title"},"Edit Client",-1)),jt={class:"sub-title"},Kt={class:"sub-title"},Gt={class:"form"},Ht=ce(()=>a("div",{class:"table-title"},"Personal Information",-1)),Wt={class:"block padding-t-20"},Qt=ce(()=>a("div",{class:"table-title"},"Account Setting",-1)),Xt=ce(()=>a("span",null,"Are you sure to delete this?",-1)),Zt={class:"dialog-footer"},Jt={class:"block padding-t-20"},ea=ce(()=>a("div",{class:"table-title"},"Commission Payment Records",-1)),ta={class:"position"},aa=fe({__name:"EditClient",setup(U){const N=Ze(),{cId:E}=ie(tt),{func:L}=ie(De);ve(async()=>{E.value&&(Z(),m())});const F=b({}),A=b([]),M=b(!1),D=b(),n=de({name:"",countryCode:"",mobile:"",birth:"",withheldTax:!1,tfNum:"",bsb:"",accountName:"",accountNumber:"",targetAmount:""}),S=de({}),R=async f=>{f&&await f.validate((s,p)=>{s?(console.log("submit!"),X()):(z.error("Please enter correct content!"),console.log("error submit!",p))})};async function X(){let f={...n,id:E.value};const[s,p]=await P.editClient(f);!s&&p&&p.success&&(z.success("Edit successfully"),setTimeout(()=>{L()},1e3))}async function Z(){var T,V,k,O,h,C,J,q,K,le;let f={id:E.value};const[s,p]=await P.queryClientDetailById(f);!s&&p&&(console.log(p.data),F.value=p.data,n.birth=Q((T=p.data)==null?void 0:T.birth).format("YYYY-MM-DD")||"",n.name=((V=p.data)==null?void 0:V.name)||"",n.countryCode=((k=p.data)==null?void 0:k.countryCode)||"",n.mobile=((O=p.data)==null?void 0:O.mobile)||"",n.withheldTax=((h=p.data)==null?void 0:h.withheldTax)||!1,n.tfNum=((C=p.data)==null?void 0:C.tfNum)||"",n.bsb=((J=p.data)==null?void 0:J.bsb)||"",n.accountName=((q=p.data)==null?void 0:q.accountName)||"",n.accountNumber=((K=p.data)==null?void 0:K.accountNumber)||"",n.targetAmount=((le=p.data)==null?void 0:le.targetAmount)||"")}async function m(){let f={clientId:E.value};const[s,p]=await P.queryEntity(f);!s&&p&&(console.log(p==null?void 0:p.data),A.value=(p==null?void 0:p.data)||[])}const r=()=>{n.targetAmount>999999.99?n.targetAmount=999999.99:n.targetAmount=n.targetAmount.replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""},o=()=>{M.value=!0},y=async()=>{const f={id:F.value.id},[s,p]=await P.delClient(f);!s&&p&&(p.data&&z.success("delete success"),M.value=!1,N.push({path:"/client/index"}).catch(T=>{console.warn(T)}))};return(f,s)=>{var re;const p=he,T=ye,V=Ie,k=Ee,O=ge,h=Ct,C=wt,J=Je,q=Ye,K=It,le=ke,ue=Ve;return w(),x(ae,null,[a("div",zt,[a("div",null,[Ot,a("div",jt,"Client ID: "+v(e(F).id),1),a("div",Kt,"DOB: "+v(e(Q)(((re=e(F))==null?void 0:re.birth)||"").format("DD.MM.YYYY")),1)]),a("div",null,[t(T,{type:"primary",color:"#4E9F1C",onClick:s[0]||(s[0]=g=>R(e(D)))},{default:l(()=>[_(" Edit Client "),t(p,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})])]),a("div",Gt,[t(ue,{ref_key:"ruleFormRef",ref:D,model:e(n),rules:e(S),"label-width":"200px","status-icon":""},{default:l(()=>[Ht,t(k,{label:"Name",prop:"name"},{default:l(()=>[t(V,{modelValue:e(n).name,"onUpdate:modelValue":s[1]||(s[1]=g=>e(n).name=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Mobile number",prop:"mobile"},{default:l(()=>[t(V,{modelValue:e(n).mobile,"onUpdate:modelValue":s[2]||(s[2]=g=>e(n).mobile=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Country code",prop:"countryCode"},{default:l(()=>[t(V,{modelValue:e(n).countryCode,"onUpdate:modelValue":s[3]||(s[3]=g=>e(n).countryCode=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Birth",prop:"birth"},{default:l(()=>[t(O,{modelValue:e(n).birth,"onUpdate:modelValue":s[4]||(s[4]=g=>e(n).birth=g),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(k,{label:"withheldTax",prop:"withheldTax"},{default:l(()=>[t(h,{modelValue:e(n).withheldTax,"onUpdate:modelValue":s[5]||(s[5]=g=>e(n).withheldTax=g),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1}),t(k,{label:"TFN",prop:"tfNum"},{default:l(()=>[t(V,{modelValue:e(n).tfNum,"onUpdate:modelValue":s[6]||(s[6]=g=>e(n).tfNum=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Bsb",prop:"bsb"},{default:l(()=>[t(V,{modelValue:e(n).bsb,"onUpdate:modelValue":s[7]||(s[7]=g=>e(n).bsb=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Account name",prop:"accountName"},{default:l(()=>[t(V,{modelValue:e(n).accountName,"onUpdate:modelValue":s[8]||(s[8]=g=>e(n).accountName=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Account number",prop:"accountNumber"},{default:l(()=>[t(V,{modelValue:e(n).accountNumber,"onUpdate:modelValue":s[9]||(s[9]=g=>e(n).accountNumber=g)},null,8,["modelValue"])]),_:1}),t(k,{label:"Target amount",prop:"targetAmount"},{default:l(()=>[t(V,{modelValue:e(n).targetAmount,"onUpdate:modelValue":s[10]||(s[10]=g=>e(n).targetAmount=g),type:"number",onInput:r},null,8,["modelValue"])]),_:1}),a("div",Wt,[Qt,t(k,{label:"Login Account"},{default:l(()=>[_(v(e(F).email)+" ",1)]),_:1}),t(k,{size:"small"},{default:l(()=>[t(C,{onClick:o},{default:l(()=>[_("Delete Account")]),_:1}),t(J,{modelValue:e(M),"onUpdate:modelValue":s[12]||(s[12]=g=>te(M)?M.value=g:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",Zt,[t(T,{onClick:s[11]||(s[11]=g=>M.value=!1)},{default:l(()=>[_("Cancel")]),_:1}),t(T,{type:"primary",onClick:y},{default:l(()=>[_(" Confirm ")]),_:1})])]),default:l(()=>[Xt]),_:1},8,["modelValue"])]),_:1})]),a("div",Jt,[ea,t(le,{data:e(A),height:"300","row-style":{height:"90px"},"header-cell-style":{background:"#BE9670",color:"#fff"},"cell-style":{"z-index":"auto"}},{default:l(()=>[t(q,{prop:"entityType",label:"Investor Type",align:"center"}),t(q,{prop:"entityName",label:"Investor Name",align:"center"}),t(q,{prop:"kycResult",label:"KYC Result",align:"center"}),t(q,{prop:"file1Front",label:"Document 1 Front",align:"center"},{default:l(g=>[a("div",ta,[t(K,{style:{width:"100px",height:"100px"},src:g.row.file1Front,"preview-src-list":[g.row.file1Front],fit:"contain"},null,8,["src","preview-src-list"])])]),_:1}),t(q,{prop:"file1Back",label:"Document 1 Back",align:"center"},{default:l(g=>[t(K,{style:{width:"100px",height:"100px"},src:g.row.file1Back,"preview-src-list":[g.row.file1Back],fit:"contain"},null,8,["src","preview-src-list"])]),_:1}),t(q,{prop:"livePhoto",label:"Live Photo",align:"center"},{default:l(g=>[t(K,{style:{width:"100px",height:"100px"},src:g.row.livePhoto,"preview-src-list":[g.row.livePhoto],fit:"contain"},null,8,["src","preview-src-list"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["model","rules"])])],64)}}}),la=be(aa,[["__scopeId","data-v-b778bac1"]]),na={class:"pop-top"},oa={class:"title"},sa={class:"form"},ia=fe({__name:"CreateInvestment",setup(U){const{iId:N,info:E}=ie(Pe),{func:L}=ie(De);ve(async()=>{await X(),await Z(),n.clientId=E.value.clientId,n.investmentEntityId=E.value.entityId});const F=b([]),A=b([]),M=b([]),D=b(),n=de({clientId:"",fundId:"",investmentEntityId:"",transactionDate:"",purchasedAmount:"",unitCertificateDate:"",purchaseEndDate:"",applicationFormSigned:""}),S=de({fundId:[{required:!0,message:"Please select fund",trigger:"change"}],unitCertificateDate:[{type:"date",required:!0,message:"Please pick a unitCertificateDate",trigger:"change"}],purchasedAmount:[{required:!0,message:"Please input Purchase Amount",trigger:"blur"}]}),R=async r=>{r&&await r.validate((o,y)=>{o?(console.log("submit!"),n.applicationFormSigned=M.value.length>0?M.value[0].raw:"",m()):(z.error("Please enter correct content!"),console.log("error submit!",y))})};async function X(){let r={};const[o,y]=await P.getClientsNames(r);!o&&y&&(F.value=(y==null?void 0:y.data)||[])}async function Z(){let r={};const[o,y]=await P.getFundsNames(r);!o&&y&&(A.value=(y==null?void 0:y.data)||[])}async function m(){let r=n;const o=new FormData;Object.keys(r).forEach(s=>{[null,void 0,""].includes(r[s])||o.append(s,r[s])});const[y,f]=await P.createPurchasedFund(o);!y&&f&&f.success&&(z.success("Created successfully"),setTimeout(()=>{L()},1e3))}return(r,o)=>{const y=he,f=ye,s=Ee,p=Et,T=Yt,V=ge,k=Ie,O=et,h=Ve;return w(),x(ae,null,[a("div",na,[a("div",oa,v(e(N)?"Edit Investment":"Create Investment"),1),a("div",null,[t(f,{type:"primary",color:"#4E9F1C",onClick:o[0]||(o[0]=C=>R(e(D)))},{default:l(()=>[_(v(e(N)?"Edit Investment":"New Investment")+" ",1),t(y,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})])]),a("div",sa,[t(h,{ref_key:"ruleFormRef",ref:D,model:e(n),rules:e(S),"label-width":"200px","status-icon":""},{default:l(()=>[t(s,{label:"Client",prop:"clientId"},{default:l(()=>{var C;return[_(v(((C=e(E))==null?void 0:C.clientName)||""),1)]}),_:1}),t(s,{label:"Entity Name",prop:"investmentEntityId"},{default:l(()=>{var C;return[_(v(((C=e(E))==null?void 0:C.entityName)||""),1)]}),_:1}),t(s,{label:"Fund",prop:"fundId"},{default:l(()=>[t(T,{modelValue:e(n).fundId,"onUpdate:modelValue":o[1]||(o[1]=C=>e(n).fundId=C),placeholder:"Please Fund",filterable:"",clearable:""},{default:l(()=>[(w(!0),x(ae,null,_e(e(A),(C,J)=>(w(),ee(p,{label:C.name,value:C.id,key:J},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"Transaction Date",prop:"transactionDate"},{default:l(()=>[t(V,{modelValue:e(n).transactionDate,"onUpdate:modelValue":o[2]||(o[2]=C=>e(n).transactionDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Purchase Amount",prop:"purchasedAmount"},{default:l(()=>[t(k,{modelValue:e(n).purchasedAmount,"onUpdate:modelValue":o[3]||(o[3]=C=>e(n).purchasedAmount=C),type:"number"},null,8,["modelValue"])]),_:1}),t(s,{label:"U/C Date",prop:"unitCertificateDate"},{default:l(()=>[t(V,{modelValue:e(n).unitCertificateDate,"onUpdate:modelValue":o[4]||(o[4]=C=>e(n).unitCertificateDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Purchase End Date",prop:"purchaseEndDate"},{default:l(()=>[t(V,{modelValue:e(n).purchaseEndDate,"onUpdate:modelValue":o[5]||(o[5]=C=>e(n).purchaseEndDate=C),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"Application form signed",prop:"applicationFormSigned"},{default:l(()=>[t(O,{"file-list":e(M),"onUpdate:fileList":o[6]||(o[6]=C=>te(M)?M.value=C:null),"auto-upload":!1,limit:1,"list-type":"text"},{trigger:l(()=>[t(f,{type:"primary"},{default:l(()=>[_("Choose file")]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])],64)}}}),da=be(ia,[["__scopeId","data-v-ac78f692"]]),ca=U=>(Ae("data-v-0b5a1580"),U=U(),xe(),U),ua={class:"pop-top"},ra={class:"title"},ma={class:"form"},pa={key:0,class:"block padding-t-20"},_a=ca(()=>a("div",{class:"table-title"},"Interest Payment Records",-1)),fa=fe({__name:"CreatePurchase",setup(U){const{iId:N,info:E}=ie(Pe),{func:L}=ie(De);ve(()=>{var m,r,o;D.clientId=(m=E.value)==null?void 0:m.clientId,D.fundId=(r=E.value)==null?void 0:r.fundId,D.investmentEntityId=(o=E.value)==null?void 0:o.entityId,N.value&&Z()});const F=b({}),A=b([]),M=b(),D=de({clientId:"",fundId:"",investmentEntityId:"",transactionDate:"",purchasedAmount:"",unitCertificateDate:"",purchaseEndDate:"",applicationFormSigned:""}),n=de({unitCertificateDate:[{type:"date",required:!0,message:"Please pick a unitCertificateDate",trigger:"change"}],purchasedAmount:[{required:!0,message:"Please input Purchase Amount",trigger:"blur"}]}),S=async m=>{m&&await m.validate((r,o)=>{r?(console.log("submit!"),D.applicationFormSigned=A.value.length>0?A.value[0].raw:"",N.value?X():R()):(z.error("Please enter correct content!"),console.log("error submit!",o))})};async function R(){let m=D;const r=new FormData;Object.keys(m).forEach(f=>{[null,void 0,""].includes(m[f])||r.append(f,m[f])});const[o,y]=await P.createPurchasedFund(r);!o&&y&&y.success&&(z.success("Created successfully"),setTimeout(()=>{L()},1e3))}async function X(){let m={...D,id:N.value};const r=new FormData;Object.keys(m).forEach(f=>{[null,void 0,""].includes(m[f])||r.append(f,m[f])});const[o,y]=await P.editPurchasedFund(r);!o&&y&&y.success&&(z.success("Edit successfully"),setTimeout(()=>{L()},1e3))}async function Z(){var y,f,s,p;let m={id:N.value};const[r,o]=await P.queryPurchasedFundById(m);!r&&o&&(console.log(o.data),F.value=o.data,D.transactionDate=Q((y=o.data)==null?void 0:y.transactionDate).format("YYYY-MM-DD")||"",D.purchasedAmount=((f=o.data)==null?void 0:f.purchasedAmount)||"",D.unitCertificateDate=Q((s=o.data)==null?void 0:s.unitCertificateDate).format("YYYY-MM-DD")||"",D.purchaseEndDate=Q((p=o.data)==null?void 0:p.purchaseEndDate).format("YYYY-MM-DD")||"")}return(m,r)=>{const o=he,y=ye,f=Ee,s=ge,p=Ie,T=et,V=Ve,k=Ye,O=ke;return w(),x(ae,null,[a("div",ua,[a("div",ra,v(e(N)?"Edit Purchase":"Create Purchase"),1),a("div",null,[t(y,{type:"primary",color:"#4E9F1C",onClick:r[0]||(r[0]=h=>S(e(M)))},{default:l(()=>[_(v(e(N)?"Edit Purchase":"New Purchase")+" ",1),t(o,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})])]),a("div",ma,[t(V,{ref_key:"ruleFormRef",ref:M,model:e(D),rules:e(n),"label-width":"200px","status-icon":""},{default:l(()=>[t(f,{label:"Client",prop:"clientId"},{default:l(()=>{var h;return[_(v(((h=e(E))==null?void 0:h.clientName)||""),1)]}),_:1}),t(f,{label:"Fund",prop:"fundId"},{default:l(()=>{var h;return[_(v(((h=e(E))==null?void 0:h.fundName)||""),1)]}),_:1}),t(f,{label:"Entity Name",prop:"entityName"},{default:l(()=>{var h;return[_(v(((h=e(E))==null?void 0:h.entityName)||""),1)]}),_:1}),t(f,{label:"Transaction Date",prop:"transactionDate"},{default:l(()=>[t(s,{modelValue:e(D).transactionDate,"onUpdate:modelValue":r[1]||(r[1]=h=>e(D).transactionDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"Purchase Amount",prop:"purchasedAmount"},{default:l(()=>[t(p,{modelValue:e(D).purchasedAmount,"onUpdate:modelValue":r[2]||(r[2]=h=>e(D).purchasedAmount=h),type:"number"},null,8,["modelValue"])]),_:1}),t(f,{label:"U/C Date",prop:"unitCertificateDate"},{default:l(()=>[t(s,{modelValue:e(D).unitCertificateDate,"onUpdate:modelValue":r[3]||(r[3]=h=>e(D).unitCertificateDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"Purchase End Date",prop:"purchaseEndDate"},{default:l(()=>[t(s,{modelValue:e(D).purchaseEndDate,"onUpdate:modelValue":r[4]||(r[4]=h=>e(D).purchaseEndDate=h),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"Application form signed",prop:"applicationFormSigned"},{default:l(()=>[t(T,{"file-list":e(A),"onUpdate:fileList":r[5]||(r[5]=h=>te(A)?A.value=h:null),"auto-upload":!1,limit:1,"list-type":"text"},{trigger:l(()=>[t(y,{type:"primary"},{default:l(()=>[_("Choose file")]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"]),e(N)?(w(),x("div",pa,[_a,t(O,{data:e(F).dividendHistory,height:"240","row-style":{height:"30px"},"header-cell-style":{background:"#BE9670",color:"#fff"}},{default:l(()=>[t(k,{prop:"dividendDate",label:"Interest Payment Date",align:"center"}),t(k,{prop:"dividendAmount",label:"Interest Amount",align:"center"})]),_:1},8,["data"])])):oe("",!0)])],64)}}}),va=be(fa,[["__scopeId","data-v-0b5a1580"]]),$=U=>(Ae("data-v-63390f07"),U=U(),xe(),U),ha={class:"detail"},ya={class:"top"},ga={class:"left"},ba={class:"name"},Da=$(()=>a("div",{class:"kyc"},null,-1)),Ca={class:"client-id"},wa={class:"info"},Ia={class:"flex"},Ea={class:"text"},Ya=$(()=>a("div",{class:"sub"},"Email",-1)),ka={class:"flex"},Va={class:"text"},Aa=$(()=>a("div",{class:"sub"},"Phone",-1)),xa={class:"right"},Pa={class:"item"},Na=$(()=>a("div",{class:"title"},"D.O.B",-1)),Ma={class:"num"},Fa={class:"text"},$a={class:"text"},Sa={class:"item p-l-60"},Ta=$(()=>a("div",{class:"title"},"Client Type:",-1)),Ua={class:"num"},Ba={class:"text"},Ra={class:"text"},La={class:"text"},qa={class:"text"},za={class:"text"},Oa=$(()=>a("div",{class:"round1"},null,-1)),ja=$(()=>a("div",{class:"round2"},null,-1)),Ka={class:"entity"},Ga={class:"flex"},Ha=$(()=>a("div",{class:"name"},"Entity List",-1)),Wa={class:"sub-name"},Qa={class:"list"},Xa=["onClick"],Za={class:"name"},Ja={class:"bhg-id"},el={class:"email"},tl={class:"address"},al=["onClick"],ll={key:0,class:"investment"},nl={class:"flex"},ol={class:"name"},sl=["onClick"],il={class:"sub-name"},dl={class:"scrollbar-flex-content"},cl=["onClick"],ul={key:1,class:"table-flex"},rl={class:"left"},ml={class:"name"},pl={class:"text-cut"},_l={class:"tag"},fl=$(()=>a("div",{class:"sub-name"},"Total investment Amount",-1)),vl={class:"number"},hl=$(()=>a("div",{class:"sub-name"},"Total investment Return",-1)),yl={class:"number"},gl=$(()=>a("div",{class:"sub-name"},"Cumulative Expected Interest Amount",-1)),bl={class:"number"},Dl={class:"right"},Cl={class:"flex-between"},wl=$(()=>a("div",{class:"name"},"Investment Record",-1)),Il={class:"email-select"},El=$(()=>a("div",{class:"title"},"Annual Statement",-1)),Yl={class:"table"},kl={class:"pointer"},Vl={class:"action"},Al=["onClick"],xl=["onClick"],Pl=$(()=>a("span",null,"Are you sure to delete this?",-1)),Nl={class:"dialog-footer"},Ml={class:"purchase"},Fl=$(()=>a("div",{class:"title"},"Purchase record",-1)),$l={class:"tool-box"},Sl=$(()=>a("div",{class:"flex"},null,-1)),Tl={class:"flex"},Ul={class:"table"},Bl={class:"pointer"},Rl={class:"action"},Ll=["onClick"],ql=["onClick"],zl=["onClick"],Ol=$(()=>a("span",null,"Are you sure to delete this?",-1)),jl={class:"dialog-footer"},Kl={class:"pagination"},Gl=$(()=>a("div",null,null,-1)),Hl=fe({__name:"detail",setup(U){const{setBreadcrumbList:N}=Lt(),E=b(),L=b(!0),F=[{name:"add",component:Xe},{name:"edit",component:Xe},{name:"investment",component:da},{name:"purchase",component:va},{name:"editClient",component:la}],A=b(null),M=b(null),D=Ze(),n=b({}),S=b([]),R=b(0),X=b({}),Z=b([{name:"Ongoing Investment",value:"On-Going"},{name:"Investment History",value:"Completed"}]),m=b([]),r=b(0),o=b(0),y=b(null),f=b([]),s=b([]),p=b(0),T=b(10),V=b(1),k=b({}),O=b(null),h=b(!1),C=b(null);ve(async()=>{await J(),await q()});async function J(){L.value=!0;let i={id:D.currentRoute.value.params.id};const[d,c]=await P.queryClientDetailById(i);L.value=!1,!d&&c&&(console.log(c.data),n.value=(c==null?void 0:c.data)||{})}async function q(){var u;A.value=null,ue();let i={clientId:D.currentRoute.value.params.id};const[d,c]=await P.queryEntity(i);if(!d&&c){console.log("queryEntity",c.data);const j=((u=D.currentRoute.value.query)==null?void 0:u.eId)||"";S.value=(c==null?void 0:c.data)||[];const G=S.value.findIndex(me=>me.id===Number(j));R.value=G!==-1?G:0,S.value.length>0&&K()}}async function K(){var j,G;let i={pageSize:1e3,pageNum:1};console.log("selectEntity",S.value);let d={investmentEntityId:S.value[R.value].id};const[c,u]=await P.queryInvestment(d,i);if(L.value=!1,!c&&u){console.log((j=u.data)==null?void 0:j.list);let ne=(((G=u.data)==null?void 0:G.list)||[]).filter(B=>B.status===Z.value[r.value].value);m.value=ne,ne.length>0&&le()}else console.log(c)}async function le(){var j;let i={pageSize:1e3,pageNum:1},d={entityId:S.value[R.value].id,fundId:m.value[o.value].fundId};const[c,u]=await P.queryPurchasedFunds(d,i);!c&&u?(console.log("getPurchasedFundsByEn",u.data.list),f.value=((j=u.data)==null?void 0:j.list)||[]):console.log(c)}async function ue(){var j,G;let i={pageSize:T.value,pageNum:V.value},d={clientId:n.value.id};const[c,u]=await P.queryPurchasedFunds(d,i);!c&&u?(console.log("getPurchasedFundsByClient",u.data.list),s.value=((j=u.data)==null?void 0:j.list)||[],p.value=((G=u.data)==null?void 0:G.total)||0):console.log(c)}const re=()=>{var i;N([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Edit Client"}]),A.value=F.findIndex(d=>d.name==="editClient"),C.value=n.value.id,E.value.handleIsShow()},g=()=>{var i;N([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Entity"}]),A.value=F.findIndex(d=>d.name==="add"),M.value=null,E.value.handleIsShow()},at=i=>{R.value=i,K()},lt=i=>{var d;N([{name:`${(d=n.value)==null?void 0:d.name}`},{name:"Edit Entity"}]),A.value=F.findIndex(c=>c.name==="edit"),M.value=i.id,X.value=i,E.value.handleIsShow()},nt=()=>{var i;N([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Investment"}]),A.value=F.findIndex(d=>d.name==="investment"),k.value={clientId:n.value.id,fundId:"",entityId:S.value[R.value].id,clientName:n.value.name,fundName:"",entityName:S.value[R.value].entityName},E.value.handleIsShow()},ot=()=>{var i;N([{name:`${(i=n.value)==null?void 0:i.name}`},{name:"Create Purchase"}]),A.value=F.findIndex(d=>d.name==="purchase"),O.value=null,k.value=m.value[o.value],E.value.handleIsShow()},st=i=>{var d;N([{name:`${(d=n.value)==null?void 0:d.name}`},{name:"Edit Purchase record"}]),A.value=F.findIndex(c=>c.name==="purchase"),O.value=i.id,k.value=m.value[o.value],E.value.handleIsShow()},it=()=>{h.value=!0},Ne=async i=>{const d={id:i.id},[c,u]=await P.delPurchasedFund(d);!c&&u&&(u.data&&z.success("delete success"),h.value=!1,await q())},dt=async i=>{L.value=!0;let d={id:i.id};const[c,u]=await P.sendUnitCertificate(d);L.value=!1,!c&&u&&u!=null&&u.success&&z.success("send success")},ct=async i=>{let d={id:i.id};const[c,u]=await P.exportUnitCertificate(d);!c&&u&&u!=null&&u.success&&(console.log(u==null?void 0:u.data),u!=null&&u.data&&window.open(u==null?void 0:u.data),z.success("send success"))},ut=()=>{E.value&&E.value.handleIsShow()},rt=i=>{r.value=i,K()},mt=async()=>{console.log(m.value[o.value]);let i={startDate:y.value,idList:m.value[o.value].pfId,templateType:2};Me(i)},pt=async i=>{console.log(m.value[o.value]);let d={startDate:Q(new Date).startOf("year").format("YYYY-MM-DD"),id:i.id,templateType:2};Me(d)};async function Me(i){const[d,c]=await P.sendMail(i);!d&&c&&z.success("send success")}const _t=async()=>{console.log(m.value[o.value]);let i={date:y.value,id:m.value[o.value].pfId[0],template:2};console.log(i),Fe(i)},ft=async i=>{let d={date:Q(new Date).startOf("year").format("YYYY-MM-DD"),id:i.id,template:2};Fe(d)};async function Fe(i){P.exportPdf(i).then(d=>{console.log(d),z.success("download success");const c=document.createElement("a");c.style.display="none";const u=Q().format("YYYY-MM-DD");c.setAttribute("download",`investment-${u}.pdf`),c.setAttribute("href",window.URL.createObjectURL(new Blob([d]))),document.body.appendChild(c),c.click(),document.body.removeChild(c)})}const vt=i=>{o.value=i},ht=i=>{V.value=i,ue()};return pe(De,{func:ut}),pe(Pe,{iId:O,info:k}),pe(qt,{eId:M,clientInfo:n,entityInfo:X}),pe(tt,{cId:C}),(i,d)=>{var Te,Ue,Be,Re,Le,qe,ze,Oe,je,Ke,Ge,He,We;const c=he,u=ye,j=Vt,G=At,me=ge,ne=xt,B=Ye,$e=Je,Se=ke,yt=Rt,gt=Pt,W=kt("permission"),bt=Nt;return w(),x(ae,null,[H((w(),x("div",ha,[a("div",ya,[a("div",ga,[a("div",null,[a("div",ba,[_(v((Te=e(n))==null?void 0:Te.name)+" ",1),Da]),a("div",Ca,"Client ID : "+v((Ue=e(n))==null?void 0:Ue.id),1)]),H((w(),x("div",{class:"edit",onClick:re},[_("Edit Profile")])),[[W,"Client"]]),a("div",wa,[a("div",Ia,[t(c,{class:"icon-bg",size:"24",color:"#fff"},{default:l(()=>[t(e(Mt))]),_:1}),a("div",Ea,[Ya,a("div",null,v((Be=e(n))==null?void 0:Be.email),1)])]),a("div",ka,[t(c,{class:"icon-bg",size:"24",color:"#fff"},{default:l(()=>[t(e(Ft))]),_:1}),a("div",Va,[Aa,a("div",null,v((Re=e(n))==null?void 0:Re.mobile),1)])])])]),a("div",xa,[a("div",Pa,[Na,a("div",Ma,v(e(Q)((Le=e(n))==null?void 0:Le.birth).format("YYYY.MM.DD")),1),a("div",Fa,[_("Target Amount: "),a("span",null,"$"+v(((qe=e(n))==null?void 0:qe.targetAmount)||0),1)]),a("div",$a,[_("Create at: "),a("span",null,v((ze=e(n))==null?void 0:ze.createAt),1)])]),a("div",Sa,[Ta,a("div",Ua,v((Oe=e(n))==null?void 0:Oe.clientType),1),a("div",Ba,[_("BSB: "),a("span",null,v((je=e(n))==null?void 0:je.bsb),1)]),a("div",Ra,[_("Account Name: "),a("span",null,v((Ke=e(n))==null?void 0:Ke.accountName),1)]),a("div",La,[_("Account Number: "),a("span",null,v((Ge=e(n))==null?void 0:Ge.accountNumber),1)]),a("div",qa,[_("Withheld Tax: "),a("span",null,v((He=e(n))==null?void 0:He.withheldTax),1)]),a("div",za,[_("TF Number: "),a("span",null,v((We=e(n))==null?void 0:We.tfNum),1)])])]),Oa,ja]),a("div",Ka,[a("div",Ga,[a("div",null,[Ha,a("div",Wa,[_("You have "),a("span",null,v(e(S).length),1),_(" Entities")])]),a("div",null,[H((w(),ee(u,{type:"primary",color:"#4E9F1C",onClick:g},{default:l(()=>[_(" New Entity "),t(c,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})),[[W,"Client"]])])]),a("div",Qa,[(w(!0),x(ae,null,_e(e(S),(I,Y)=>(w(),x("div",{class:we(Y===e(R)?"item act":"item"),key:Y,onClick:Ce=>at(Y)},[a("div",Za,v(I.entityName||"Entity Name"),1),a("div",Ja,"BHG ID: "+v(I.bhgId),1),a("div",el,v(I.emailList?I.emailList.join(","):""),1),a("div",tl,[t(c,null,{default:l(()=>[t(e($t))]),_:1}),_(v(I.addressLine),1)]),H((w(),x("div",{class:"edit",onClick:St(Ce=>lt(I),["stop"])},[t(c,{color:Y===e(R)?"#fff":"#D9D9D9"},{default:l(()=>[t(e(Tt))]),_:2},1032,["color"])],8,al)),[[W,"Client"]])],10,Xa))),128))])]),e(S).length>0?(w(),x("div",ll,[a("div",nl,[a("div",null,[a("div",ol,[(w(!0),x(ae,null,_e(e(Z),(I,Y)=>(w(),x("div",{class:we(e(r)===Y?"line act":"line"),key:Y,onClick:Ce=>rt(Y)},v(I.name),11,sl))),128))]),a("div",il,[_("You have "),a("span",null,v(e(m).length),1),_(" Investments")])]),a("div",null,[H((w(),ee(u,{type:"primary",color:"#4E9F1C",onClick:nt},{default:l(()=>[_(" New Investment "),t(c,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})),[[W,"Investment"]])])]),e(m).length>0?(w(),ee(j,{key:0},{default:l(()=>[a("div",dl,[(w(!0),x(ae,null,_e(e(m),(I,Y)=>(w(),x("p",{key:Y,class:we(e(o)===Y?"scrollbar-item item-act":"scrollbar-item"),onClick:Ce=>vt(Y)}," Investment "+v(Y+1),11,cl))),128))])]),_:1})):oe("",!0),e(m).length>0?(w(),x("div",ul,[a("div",rl,[a("div",ml,[a("span",pl,v(e(m)[e(o)].fundName),1),a("span",_l,[t(G,{class:"text-white",color:e(m)[e(o)].status==="On-Going"?"#4E9F1C":"#BE9670"},{default:l(()=>[_(v(e(m)[e(o)].status),1)]),_:1},8,["color"])])]),fl,a("div",vl,"$"+v(e(m)[e(o)].purchasedAmount||0),1),hl,a("div",yl,"$"+v(e(m)[e(o)].currentReturn||0),1),gl,a("div",bl,"$"+v(e(m)[e(o)].totalReturn||0),1)]),a("div",Dl,[a("div",Cl,[wl,H((w(),x("div",null,[t(ne,{placement:"bottom",width:255,trigger:"click"},{reference:l(()=>[t(u,{class:"text-white",type:"primary",color:"#42A0BE"},{default:l(()=>[_(" Annual Statement "),t(c,null,{default:l(()=>[t(e(Ut))]),_:1})]),_:1})]),default:l(()=>[a("div",Il,[El,t(me,{modelValue:e(y),"onUpdate:modelValue":d[0]||(d[0]=I=>te(y)?y.value=I:null),type:"year",placeholder:"Pick a year",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),a("div",null,[t(u,{class:"text-white m-tb-20",type:"primary",color:"#BE9670",onClick:mt},{default:l(()=>[_(" Send ")]),_:1}),t(u,{class:"text-white m-tb-20 m-l-10",type:"primary",color:"#42A0BE",onClick:_t},{default:l(()=>[_(" Download ")]),_:1})])])]),_:1})])),[[W,"Investment"]])]),a("div",Yl,[t(Se,{data:e(f),height:"240","row-style":{height:"30px"},"header-cell-style":{background:"#BE9670",color:"#fff"}},{default:l(()=>[t(B,{prop:"purchaseEndDate",label:"Payment Date",align:"center"}),t(B,{prop:"purchasedAmount",label:"Investment Amount",align:"center"},{default:l(I=>[a("span",null,"$"+v(I.row.purchasedAmount),1)]),_:1}),t(B,{prop:"currentTotalReturn",label:"Current Return",align:"center"},{default:l(I=>[a("span",null,"$"+v(I.row.currentTotalReturn),1)]),_:1}),t(B,{prop:"",label:"Action",align:"center"},{default:l(I=>[a("div",kl,[t(ne,{placement:"bottom",width:170,trigger:"hover"},{reference:l(()=>[t(c,{size:30,color:"#969696"},{default:l(()=>[t(e(Qe))]),_:1})]),default:l(()=>[a("div",Vl,[H((w(),x("div",{class:"item",onClick:Y=>pt(I.row)},[_("Send")],8,Al)),[[W,"Investment"]]),H((w(),x("div",{class:"item",onClick:Y=>ft(I.row)},[_("Download")],8,xl)),[[W,"Investment"]]),t($e,{modelValue:e(h),"onUpdate:modelValue":d[2]||(d[2]=Y=>te(h)?h.value=Y:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",Nl,[t(u,{onClick:d[1]||(d[1]=Y=>h.value=!1)},{default:l(()=>[_("Cancel")]),_:1}),t(u,{type:"primary",onClick:Y=>Ne(I.row)},{default:l(()=>[_(" Confirm ")]),_:2},1032,["onClick"])])]),default:l(()=>[Pl]),_:2},1032,["modelValue"])])]),_:2},1024)])]),_:1})]),_:1},8,["data"])])])])):oe("",!0)])):oe("",!0),a("div",Ml,[Fl,a("div",$l,[Sl,a("div",Tl,[e(m).length>0?H((w(),ee(u,{key:0,type:"primary",color:"#4E9F1C",onClick:ot},{default:l(()=>[_(" New purchase "),t(c,null,{default:l(()=>[t(e(se))]),_:1})]),_:1})),[[W,"Investment"]]):oe("",!0)])]),a("div",Ul,[e(s).length>0?(w(),ee(Se,{key:0,data:e(s),height:"600","row-style":{height:"80px"}},{default:l(()=>[t(B,{prop:"id",label:"Purchase ID",align:"center",width:"150",fixed:"left"}),t(B,{prop:"unitCertificateDate",label:"U/C Date",align:"left",width:"150"}),t(B,{prop:"transactionDate",label:"Transaction Date",align:"left",width:"150"}),t(B,{prop:"purchaseEndDate",label:"Interest End Date",width:"200"}),t(B,{prop:"createAt",label:"Create At",width:"200"}),t(B,{prop:"purchasedAmount",label:"Purchase Amount",width:"200"}),t(B,{prop:"currentMonthReturn",label:"Current Month Return",width:"200"}),t(B,{prop:"currentTotalReturn",label:"Current Total Return",width:"200"}),t(B,{prop:"",label:"Action",align:"center",fixed:"right"},{default:l(I=>[a("div",Bl,[t(ne,{placement:"bottom",width:170,trigger:"hover"},{reference:l(()=>[t(c,{size:30,color:"#969696"},{default:l(()=>[t(e(Qe))]),_:1})]),default:l(()=>[H((w(),x("div",Rl,[a("div",{class:"item",onClick:Y=>st(I.row)},"Edit",8,Ll),a("div",{class:"item",onClick:it},"Delete"),a("div",{class:"item",onClick:Y=>dt(I.row)},"Send",8,ql),a("div",{class:"item",onClick:Y=>ct(I.row)},"Download",8,zl),t($e,{modelValue:e(h),"onUpdate:modelValue":d[4]||(d[4]=Y=>te(h)?h.value=Y:null),title:"Message",width:"30%","align-center":""},{footer:l(()=>[a("span",jl,[t(u,{onClick:d[3]||(d[3]=Y=>h.value=!1)},{default:l(()=>[_("Cancel")]),_:1}),t(u,{type:"primary",onClick:Y=>Ne(I.row)},{default:l(()=>[_(" Confirm ")]),_:2},1032,["onClick"])])]),default:l(()=>[Ol]),_:2},1032,["modelValue"])])),[[W,"Investment"]])]),_:2},1024)])]),_:1})]),_:1},8,["data"])):(w(),ee(yt,{key:1,"image-size":200}))]),a("div",Kl,[Gl,t(gt,{background:"",layout:"total,consists of sizes, prev, pager, next, jumper, ->, slot",total:e(p),"page-size":e(T),"onUpdate:pageSize":d[5]||(d[5]=I=>te(T)?T.value=I:null),"current-page":e(V),"onUpdate:currentPage":d[6]||(d[6]=I=>te(V)?V.value=I:null),onCurrentChange:ht},null,8,["total","page-size","current-page"])])])])),[[bt,e(L)]]),t(e(Dt),{ref_key:"rightPanel",ref:E,onBackFn:q},{content:l(()=>[e(A)!==null?(w(),ee(Bt(F[e(A)].component),{key:0})):oe("",!0)]),_:1},512)],64)}}});const fn=be(Hl,[["__scopeId","data-v-63390f07"]]);export{fn as default};
