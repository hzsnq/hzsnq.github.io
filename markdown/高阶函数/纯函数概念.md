[[toc]]

# çº¯å‡½æ•°

## çº¯å‡½æ•°çš„æ¦‚å¿µ

- çº¯å‡½æ•°ï¼š**ç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º**ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ã€‚
- çº¯å‡½æ•°ç±»ä¼¼æ•°å­¦ä¸­çš„å‡½æ•°ï¼ˆç”¨æ¥æè¿°è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ï¼‰ï¼Œy=f(x)
- lodash æ˜¯ä¸€ä¸ªçº¯å‡½æ•°çš„åŠŸèƒ½åº“ï¼Œæä¾›äº†å¯¹æ•°ç»„ã€æ•°å­—ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ã€å‡½æ•°ç­‰æ“ä½œçš„ä¸€äº›æ–¹æ³•

ä¸¾ä¸ª ğŸŒ°

- æ•°ç»„çš„ slice å’Œ splice åˆ†åˆ«æ˜¯ï¼šçº¯å‡½æ•°å’Œä¸çº¯çš„å‡½æ•°
- slice è¿”å›æ•°ç»„ä¸­çš„æŒ‡å®šéƒ¨åˆ†ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„
- splice å¯¹æ•°ç»„è¿›è¡Œæ“ä½œè¿”å›è¯¥æ•°ç»„ï¼Œä¼šæ”¹å˜åŸæ•°ç»„

\`\`\`js
let array = [1, 2, 3, 4, 5]
//çº¯å‡½æ•°
array.slice(0, 3)
array.slice(0, 3)
array.slice(0, 3)
// => [1,2,3]
// => [1,2,3]
// => [1,2,3]

//ä¸çº¯å‡½æ•°
array.splice(0, 3)
array.splice(0, 3)
array.splice(0, 3)
// => [1,2,3]
// => [4,5]
// => []
\`\`\`

- å‡½æ•°å¼ç¼–ç¨‹ä¸ä¼šä¿ç•™è®¡ç®—ä¸­é—´çš„ç»“æœï¼Œæ‰€ä»¥å˜é‡æ˜¯ä¸å¯å˜çš„ï¼ˆæ— çŠ¶æ€çš„ï¼‰
- æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœäº¤ç»™å¦ä¸€ä¸ªå‡½æ•°å»å¤„ç†

## çº¯å‡½æ•°çš„å¥½å¤„

- å¯ç¼“å­˜ï¼šå› ä¸ºçº¯å‡½æ•°å¯¹ç›¸åŒçš„è¾“å…¥å§‹ç»ˆæœ‰ç›¸åŒçš„ç»“æœï¼Œæ‰€ä»¥å¯ä»¥æŠŠçº¯å‡½æ•°çš„ç»“æœç¼“å­˜èµ·æ¥ã€‚
- å¯æµ‹è¯•ï¼šçº¯å‡½æ•°è®©æµ‹è¯•æ›´æ–¹ä¾¿
- å¹¶è¡Œå¤„ç†ï¼š
  åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¹¶è¡Œæ“ä½œå…±äº«çš„å†…å­˜æ•°æ®å¯èƒ½ä¼šå‡ºç°æ„å¤–æƒ…å†µ
  çº¯å‡½æ•°ä¸éœ€è¦è®¿é—®å…±äº«çš„å†…å­˜æ•°æ®ï¼Œæ‰€ä»¥åœ¨å¹¶è¡Œç¯å¢ƒä¸‹å¯ä»¥ä»»æ„è¿è¡Œçº¯å‡½æ•°ï¼ˆWeb Workerï¼‰

\`\`\`js
const _ = require('lodash')

function getArea(r) {
  console.log(r)
  return Math.PI * r * r
}

let area = _.memoize(getArea)
console.log(area(6))
\`\`\`

- è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ª memoize å‡½æ•°

\`\`\`js
function memoize(f) {
  let cache = []
  return function () {
    let key = JSON.stringify(arguments)
    cache[key] = cache[key] || f.apply(f, arguments)
    return cache[key]
  }
}
\`\`\`

## çº¯å‡½æ•°çš„å‰¯ä½œç”¨

- çº¯å‡½æ•°ï¼šå¯¹äºç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„**å‰¯ä½œç”¨**

\`\`\`js
// ä¸çº¯çš„
let mini = 18
function checkAge(age) {
  return age >= mini
}

//çº¯çš„ï¼ˆæœ‰ç¡¬ç¼–ç ï¼Œåç»­å¯ä»¥é€šè¿‡æŸ¯é‡ŒåŒ–è§£å†³ï¼‰
function checkAge(age) {
  let mini = 18
  return age >= mini
}
\`\`\`

- å‰¯ä½œç”¨è®©ä¸€ä¸ªå‡½æ•°å˜çš„ä¸çº¯ï¼Œçº¯å‡½æ•°çš„æ ¹æ®ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå¦‚æœå‡½æ•°ä¾èµ–äºå¤–éƒ¨çš„çŠ¶æ€å°±æ— æ³•ä¿è¯è¾“å‡ºç›¸åŒï¼Œå°±ä¼šå¸¦æ¥å‰¯ä½œç”¨ã€‚
- å‰¯ä½œç”¨çš„æ¥æºï¼š
  - é…ç½®æ–‡ä»¶
  - æ•°æ®åº“
  - è·å–ç”¨æˆ·çš„è¾“å…¥
  - ......
- æ‰€æœ‰çš„å¤–éƒ¨äº¤äº’éƒ½æœ‰å¯èƒ½ä»£ç†å‰¯ä½œç”¨ï¼Œå‰¯ä½œç”¨ä¹Ÿä½¿å¾—æ–¹æ³•é€šç”¨æ€§ä¸‹é™ä¸é€‚åˆå¯æ‰©å±•å’Œå¯é‡ç”¨æ€§ï¼ŒåŒæ—¶å‰¯ä½œç”¨ä¼šç»™ç¨‹åºä¸­å¸¦æ¥å®‰å…¨éšæ‚£ï¼Œç»™ç¨‹åºå¸¦æ¥ä¸ç¡®å®šæ€§ï¼Œä½†æ˜¯å‰¯ä½œç”¨ä¸å¯èƒ½å®Œå…¨ç¦æ­¢ï¼Œå°½å¯èƒ½æ§åˆ¶å®ƒä»¬åœ¨å¯æ§èŒƒå›´å†…å‘ç”Ÿã€‚

## æŸ¯é‡ŒåŒ–

- ä½¿ç”¨æŸ¯é‡ŒåŒ–è§£å†³ä¸Šä¸€ä¸ªæ¡ˆä¾‹ä¸­ç¡¬ç¼–ç çš„é—®é¢˜

\`\`\`js
//çº¯çš„ï¼ˆæœ‰ç¡¬ç¼–ç ï¼Œåç»­å¯ä»¥é€šè¿‡æŸ¯é‡ŒåŒ–è§£å†³ï¼‰
function checkAge(age) {
  let mini = 18
  return age >= mini
}

//ä¼˜åŒ– æ™®é€šçº¯å‡½æ•°
function checkAge(min, age) {
  return age >= mini
}
checkAge(18, 24)
checkAge(18, 20)
checkAge(18, 30)

//æŸ¯é‡ŒåŒ–
function checkAge(min) {
  return function (age) {
    return age >= min
  }
}

//ES6å†™æ³•

const checkAge = (min) => (age) => age >= min

let checkAge18 = checkAge(18)
let checkAge20 = checkAge(20)

checkAge18(24)
checkAge20(35)
\`\`\`

- æŸ¯é‡ŒåŒ–
  - å½“ä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå…ˆä¼ é€’ä¸€éƒ¨åˆ†å‚æ•°è°ƒç”¨å®ƒï¼ˆè¿™éƒ¨åˆ†å‚æ•°ä»¥åæ°¸è¿œä¸å˜ï¼‰
  - ç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°æ¥æ”¶å‰©ä½™çš„å‚æ•°ï¼Œè¿”å›ç»“æœ

## lodash ä¸­çš„æŸ¯é‡ŒåŒ–å‡½æ•°

- curry(func)
  - åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ´»å¤šä¸ª func çš„å‚æ•°ï¼Œå¦‚æœ func æ‰€éœ€è¦çš„å‚æ•°éƒ½è¢«æä¾›åˆ™æ‰§è¡Œ func å¹¶è¿”å›æ‰§è¡Œçš„ç»“æœï¼Œå¦åˆ™ç»§ç»­è¿”å›è¯¥å‡½æ•°å¹¶ç­‰å¾…æ¥æ”¶å‰©ä½™çš„å‚æ•°ã€‚
  - å‚æ•°ï¼šéœ€è¦æŸ¯é‡ŒåŒ–çš„å‡½æ•°
  - è¿”å›å€¼ï¼šæŸ¯é‡ŒåŒ–åçš„å‡½æ•°

\`\`\`js
const _ = require('lodash')

//éœ€è¦æŸ¯é‡ŒåŒ–çš„å‡½æ•°
function getSum(a, b, c) {
  return a + b + c
}

//æŸ¯é‡ŒåŒ–åçš„å‡½æ•°
const curried = _.curry(getSum)

//æµ‹è¯•
console.log(curried(1, 2, 3))
console.log(curried(1, 2)(3))
console.log(curried(1)(2, 3))
console.log(curried(1)(2)(3))
\`\`\`

- æŸ¯é‡ŒåŒ–æ¡ˆä¾‹

\`\`\`js
const _ = require('lodash')

//æŸ¯é‡ŒåŒ–æ¡ˆä¾‹
// ''.match(/\s+/g)
// ''.match(/\d+/g)

const match = _.curry(function (reg, str) {
  return str.match(reg)
})

const checkSpace = match(/\s+/g)
const checkNumber = match(/\d+/g)

// console.log(checkSpace('hello world'))
// console.log(checkNumber('123abc'))

// const filter = _.curry(function (fun, array) {
//     return array.filter(fun)
// })

//es6å†™æ³•
const filter = _.curry((fun, array) => array.filter(fun))

console.log(filter(checkSpace, ['John Conner', 'John_Dinner']))

const findSpace = filter(checkSpace)

console.log(findSpace(['John Conner', 'John_Dinner']))
\`\`\`

## æŸ¯é‡ŒåŒ–åŸç†æ¨¡æ‹Ÿ

\`\`\`js
//æ¨¡æ‹Ÿå®ç°lodashä¸­çš„curryæ–¹æ³•

function getSum(a, b, c) {
  return a + b + c
}

//æ–¹æ³•çš„é•¿åº¦è¿”å›çš„æ˜¯ä¼ å‚çš„æ€»æ•°
console.log(getSum.length)

function curry(fnc) {
  return function curryFn(...args) {
    console.log(args.length, args, 'args')
    if (args.length < fnc.length) {
      return function () {
        return curryFn(...args.concat(Array.from(arguments)))
      }
    }
    return fnc(...args)
  }
}

const curried = curry(getSum)

// console.log(curried(1, 2, 3))
// console.log(curried(1, 2)(3))
// console.log(curried(1)(2, 3))
console.log(curried(1)(2)(3))
\`\`\`

## æ€»ç»“

- æŸ¯é‡ŒåŒ–å¯ä»¥è®©æˆ‘ä»¬ç»™ä¸€ä¸ªå‡½æ•°ä¼ é€’è¾ƒå°‘çš„å‚æ•°å¾—åˆ°ä¸€ä¸ªå·²ç»è®°ä½äº†æŸäº›å›ºå®šå‚æ•°çš„æ–°å‡½æ•°
- è¿™æ˜¯ä¸€ç§å¯¹å‡½æ•°å‚æ•°çš„â€˜ç¼“å­˜â€™
- è®©å‡½æ•°å˜çš„æ›´çµæ´»ï¼Œè®©å‡½æ•°çš„ç²’åº¦æ›´å°
- å¯ä»¥æŠŠå¤šå…ƒå‡½æ•°è½¬æ¢æˆä¸€å…ƒå‡½æ•°ï¼Œå¯ä»¥ç»„åˆä½¿ç”¨å‡½æ•°äº§ç”Ÿå¼ºå¤§çš„åŠŸèƒ½
